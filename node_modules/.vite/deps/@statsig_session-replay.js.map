{
  "version": 3,
  "sources": ["../../rrweb/es/rrweb/packages/rrweb-snapshot/es/rrweb-snapshot.js", "../../rrweb/es/rrweb/packages/rrweb/src/utils.js", "../../rrweb/es/rrweb/packages/types/dist/types.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/mutation.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/error-handler.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/observer.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/cross-origin-iframe-mirror.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/iframe-manager.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/shadow-dom-manager.js", "../../rrweb/es/rrweb/ext/tslib/tslib.es6.js", "../../rrweb/es/rrweb/ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/serialize-args.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/2d.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/webgl.js", "../../rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__funcToSource.js", "../../rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__browser__createInlineWorkerFactory.js", "../../rrweb/es/rrweb/_virtual/image-bitmap-data-url-worker.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas-manager.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/stylesheet-manager.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/processed-node-manager.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/index.js", "../../rrweb/es/rrweb/packages/rrdom/es/rrdom.js", "../../rrweb/es/rrweb/packages/rrweb/src/index.js", "../../rrweb/es/rrweb/ext/fflate/esm/browser.js", "../../rrweb/es/rrweb/packages/rrweb/src/packer/base.js", "../../rrweb/es/rrweb/packages/rrweb/src/packer/pack.js", "../../rrweb/es/rrweb/packages/rrweb/src/packer/unpack.js", "../../rrweb/es/rrweb/packages/rrweb/src/plugins/console/record/error-stack-parser.js", "../../rrweb/es/rrweb/packages/rrweb/src/plugins/console/record/stringify.js", "../../rrweb/es/rrweb/packages/rrweb/src/plugins/console/record/index.js", "../../rrweb/es/rrweb/packages/rrweb/src/plugins/console/replay/index.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/canvas/deserialize-args.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/canvas/webgl.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/canvas/2d.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/canvas/index.js", "../../rrweb/es/rrweb/ext/mitt/dist/mitt.mjs.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/smoothscroll.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/timer.js", "../../rrweb/es/rrweb/ext/@xstate/fsm/es/index.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/machine.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/styles/inject-style.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/media/index.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/index.js", "../../rrweb/es/rrweb/packages/rrweb/src/entries/all.js", "../../@statsig/session-replay/src/SessionReplayClient.js", "../../@statsig/session-replay/src/SessionReplayUtils.js", "../../@statsig/session-replay/src/SizeOf.js", "../../@statsig/session-replay/src/SessionReplayBase.js", "../../@statsig/session-replay/src/SessionReplay.js", "../../@statsig/session-replay/src/TriggeredSessionReplay.js", "../../@statsig/session-replay/src/index.js"],
  "sourcesContent": ["var NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType || (NodeType = {}));\n\nfunction isElement(n) {\r\n    return n.nodeType === n.ELEMENT_NODE;\r\n}\r\nfunction isShadowRoot(n) {\r\n    const host = n === null || n === void 0 ? void 0 : n.host;\r\n    return Boolean((host === null || host === void 0 ? void 0 : host.shadowRoot) === n);\r\n}\r\nfunction isNativeShadowDom(shadowRoot) {\r\n    return Object.prototype.toString.call(shadowRoot) === '[object ShadowRoot]';\r\n}\r\nfunction fixBrowserCompatibilityIssuesInCSS(cssText) {\r\n    if (cssText.includes(' background-clip: text;') &&\r\n        !cssText.includes(' -webkit-background-clip: text;')) {\r\n        cssText = cssText.replace(/\\sbackground-clip:\\s*text;/g, ' -webkit-background-clip: text; background-clip: text;');\r\n    }\r\n    return cssText;\r\n}\r\nfunction escapeImportStatement(rule) {\r\n    const { cssText } = rule;\r\n    if (cssText.split('\"').length < 3)\r\n        return cssText;\r\n    const statement = ['@import', `url(${JSON.stringify(rule.href)})`];\r\n    if (rule.layerName === '') {\r\n        statement.push(`layer`);\r\n    }\r\n    else if (rule.layerName) {\r\n        statement.push(`layer(${rule.layerName})`);\r\n    }\r\n    if (rule.supportsText) {\r\n        statement.push(`supports(${rule.supportsText})`);\r\n    }\r\n    if (rule.media.length) {\r\n        statement.push(rule.media.mediaText);\r\n    }\r\n    return statement.join(' ') + ';';\r\n}\r\nfunction stringifyStylesheet(s) {\r\n    try {\r\n        const rules = s.rules || s.cssRules;\r\n        return rules\r\n            ? fixBrowserCompatibilityIssuesInCSS(Array.from(rules, stringifyRule).join(''))\r\n            : null;\r\n    }\r\n    catch (error) {\r\n        return null;\r\n    }\r\n}\r\nfunction stringifyRule(rule) {\r\n    let importStringified;\r\n    if (isCSSImportRule(rule)) {\r\n        try {\r\n            importStringified =\r\n                stringifyStylesheet(rule.styleSheet) ||\r\n                    escapeImportStatement(rule);\r\n        }\r\n        catch (error) {\r\n        }\r\n    }\r\n    else if (isCSSStyleRule(rule) && rule.selectorText.includes(':')) {\r\n        return fixSafariColons(rule.cssText);\r\n    }\r\n    return importStringified || rule.cssText;\r\n}\r\nfunction fixSafariColons(cssStringified) {\r\n    const regex = /(\\[(?:[\\w-]+)[^\\\\])(:(?:[\\w-]+)\\])/gm;\r\n    return cssStringified.replace(regex, '$1\\\\$2');\r\n}\r\nfunction isCSSImportRule(rule) {\r\n    return 'styleSheet' in rule;\r\n}\r\nfunction isCSSStyleRule(rule) {\r\n    return 'selectorText' in rule;\r\n}\r\nclass Mirror {\r\n    constructor() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    getId(n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        const id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    }\r\n    getNode(id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    }\r\n    getIds() {\r\n        return Array.from(this.idNodeMap.keys());\r\n    }\r\n    getMeta(n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    }\r\n    removeNodeFromMap(n) {\r\n        const id = this.getId(n);\r\n        this.idNodeMap.delete(id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach((childNode) => this.removeNodeFromMap(childNode));\r\n        }\r\n    }\r\n    has(id) {\r\n        return this.idNodeMap.has(id);\r\n    }\r\n    hasNode(node) {\r\n        return this.nodeMetaMap.has(node);\r\n    }\r\n    add(n, meta) {\r\n        const id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    }\r\n    replace(id, n) {\r\n        const oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            const meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    }\r\n    reset() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n}\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nfunction maskInputValue({ element, maskInputOptions, tagName, type, value, maskInputFn, }) {\r\n    let text = value || '';\r\n    const actualType = type && toLowerCase(type);\r\n    if (maskInputOptions[tagName.toLowerCase()] ||\r\n        (actualType && maskInputOptions[actualType])) {\r\n        if (maskInputFn) {\r\n            text = maskInputFn(text, element);\r\n        }\r\n        else {\r\n            text = '*'.repeat(text.length);\r\n        }\r\n    }\r\n    return text;\r\n}\r\nfunction toLowerCase(str) {\r\n    return str.toLowerCase();\r\n}\r\nconst ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\r\nfunction is2DCanvasBlank(canvas) {\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx)\r\n        return true;\r\n    const chunkSize = 50;\r\n    for (let x = 0; x < canvas.width; x += chunkSize) {\r\n        for (let y = 0; y < canvas.height; y += chunkSize) {\r\n            const getImageData = ctx.getImageData;\r\n            const originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData\r\n                ? getImageData[ORIGINAL_ATTRIBUTE_NAME]\r\n                : getImageData;\r\n            const pixelBuffer = new Uint32Array(originalGetImageData.call(ctx, x, y, Math.min(chunkSize, canvas.width - x), Math.min(chunkSize, canvas.height - y)).data.buffer);\r\n            if (pixelBuffer.some((pixel) => pixel !== 0))\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction isNodeMetaEqual(a, b) {\r\n    if (!a || !b || a.type !== b.type)\r\n        return false;\r\n    if (a.type === NodeType.Document)\r\n        return a.compatMode === b.compatMode;\r\n    else if (a.type === NodeType.DocumentType)\r\n        return (a.name === b.name &&\r\n            a.publicId === b.publicId &&\r\n            a.systemId === b.systemId);\r\n    else if (a.type === NodeType.Comment ||\r\n        a.type === NodeType.Text ||\r\n        a.type === NodeType.CDATA)\r\n        return a.textContent === b.textContent;\r\n    else if (a.type === NodeType.Element)\r\n        return (a.tagName === b.tagName &&\r\n            JSON.stringify(a.attributes) ===\r\n                JSON.stringify(b.attributes) &&\r\n            a.isSVG === b.isSVG &&\r\n            a.needBlock === b.needBlock);\r\n    return false;\r\n}\r\nfunction getInputType(element) {\r\n    const type = element.type;\r\n    return element.hasAttribute('data-rr-is-password')\r\n        ? 'password'\r\n        : type\r\n            ?\r\n                toLowerCase(type)\r\n            : null;\r\n}\r\nfunction extractFileExtension(path, baseURL) {\r\n    var _a;\r\n    let url;\r\n    try {\r\n        url = new URL(path, baseURL !== null && baseURL !== void 0 ? baseURL : window.location.href);\r\n    }\r\n    catch (err) {\r\n        return null;\r\n    }\r\n    const regex = /\\.([0-9a-z]+)(?:$)/i;\r\n    const match = url.pathname.match(regex);\r\n    return (_a = match === null || match === void 0 ? void 0 : match[1]) !== null && _a !== void 0 ? _a : null;\r\n}\n\nlet _id = 1;\r\nconst tagNameRegex = new RegExp('[^a-z0-9-_:]');\r\nconst IGNORED_NODE = -2;\r\nfunction genId() {\r\n    return _id++;\r\n}\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'form';\r\n    }\r\n    const processedTagName = toLowerCase(element.tagName);\r\n    if (tagNameRegex.test(processedTagName)) {\r\n        return 'div';\r\n    }\r\n    return processedTagName;\r\n}\r\nfunction extractOrigin(url) {\r\n    let origin = '';\r\n    if (url.indexOf('//') > -1) {\r\n        origin = url.split('/').slice(0, 3).join('/');\r\n    }\r\n    else {\r\n        origin = url.split('/')[0];\r\n    }\r\n    origin = origin.split('?')[0];\r\n    return origin;\r\n}\r\nlet canvasService;\r\nlet canvasCtx;\r\nconst URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\r\nconst URL_PROTOCOL_MATCH = /^(?:[a-z+]+:)?\\/\\//i;\r\nconst URL_WWW_MATCH = /^www\\..*/i;\r\nconst DATA_URI = /^(data:)([^,]*),(.*)/i;\r\nfunction absoluteToStylesheet(cssText, href) {\r\n    return (cssText || '').replace(URL_IN_CSS_REF, (origin, quote1, path1, quote2, path2, path3) => {\r\n        const filePath = path1 || path2 || path3;\r\n        const maybeQuote = quote1 || quote2 || '';\r\n        if (!filePath) {\r\n            return origin;\r\n        }\r\n        if (URL_PROTOCOL_MATCH.test(filePath) || URL_WWW_MATCH.test(filePath)) {\r\n            return `url(${maybeQuote}${filePath}${maybeQuote})`;\r\n        }\r\n        if (DATA_URI.test(filePath)) {\r\n            return `url(${maybeQuote}${filePath}${maybeQuote})`;\r\n        }\r\n        if (filePath[0] === '/') {\r\n            return `url(${maybeQuote}${extractOrigin(href) + filePath}${maybeQuote})`;\r\n        }\r\n        const stack = href.split('/');\r\n        const parts = filePath.split('/');\r\n        stack.pop();\r\n        for (const part of parts) {\r\n            if (part === '.') {\r\n                continue;\r\n            }\r\n            else if (part === '..') {\r\n                stack.pop();\r\n            }\r\n            else {\r\n                stack.push(part);\r\n            }\r\n        }\r\n        return `url(${maybeQuote}${stack.join('/')}${maybeQuote})`;\r\n    });\r\n}\r\nconst SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\r\nconst SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\r\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\r\n    if (attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    let pos = 0;\r\n    function collectCharacters(regEx) {\r\n        let chars;\r\n        const match = regEx.exec(attributeValue.substring(pos));\r\n        if (match) {\r\n            chars = match[0];\r\n            pos += chars.length;\r\n            return chars;\r\n        }\r\n        return '';\r\n    }\r\n    const output = [];\r\n    while (true) {\r\n        collectCharacters(SRCSET_COMMAS_OR_SPACES);\r\n        if (pos >= attributeValue.length) {\r\n            break;\r\n        }\r\n        let url = collectCharacters(SRCSET_NOT_SPACES);\r\n        if (url.slice(-1) === ',') {\r\n            url = absoluteToDoc(doc, url.substring(0, url.length - 1));\r\n            output.push(url);\r\n        }\r\n        else {\r\n            let descriptorsStr = '';\r\n            url = absoluteToDoc(doc, url);\r\n            let inParens = false;\r\n            while (true) {\r\n                const c = attributeValue.charAt(pos);\r\n                if (c === '') {\r\n                    output.push((url + descriptorsStr).trim());\r\n                    break;\r\n                }\r\n                else if (!inParens) {\r\n                    if (c === ',') {\r\n                        pos += 1;\r\n                        output.push((url + descriptorsStr).trim());\r\n                        break;\r\n                    }\r\n                    else if (c === '(') {\r\n                        inParens = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (c === ')') {\r\n                        inParens = false;\r\n                    }\r\n                }\r\n                descriptorsStr += c;\r\n                pos += 1;\r\n            }\r\n        }\r\n    }\r\n    return output.join(', ');\r\n}\r\nconst cachedDocument = new WeakMap();\r\nfunction absoluteToDoc(doc, attributeValue) {\r\n    if (!attributeValue || attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    return getHref(doc, attributeValue);\r\n}\r\nfunction isSVGElement(el) {\r\n    return Boolean(el.tagName === 'svg' || el.ownerSVGElement);\r\n}\r\nfunction getHref(doc, customHref) {\r\n    let a = cachedDocument.get(doc);\r\n    if (!a) {\r\n        a = doc.createElement('a');\r\n        cachedDocument.set(doc, a);\r\n    }\r\n    if (!customHref) {\r\n        customHref = '';\r\n    }\r\n    else if (customHref.startsWith('blob:') || customHref.startsWith('data:')) {\r\n        return customHref;\r\n    }\r\n    a.setAttribute('href', customHref);\r\n    return a.href;\r\n}\r\nfunction transformAttribute(doc, tagName, name, value) {\r\n    if (!value) {\r\n        return value;\r\n    }\r\n    if (name === 'src' ||\r\n        (name === 'href' && !(tagName === 'use' && value[0] === '#'))) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'xlink:href' && value[0] !== '#') {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'background' &&\r\n        (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'srcset') {\r\n        return getAbsoluteSrcsetString(doc, value);\r\n    }\r\n    else if (name === 'style') {\r\n        return absoluteToStylesheet(value, getHref(doc));\r\n    }\r\n    else if (tagName === 'object' && name === 'data') {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    return value;\r\n}\r\nfunction ignoreAttribute(tagName, name, _value) {\r\n    return (tagName === 'video' || tagName === 'audio') && name === 'autoplay';\r\n}\r\nfunction _isBlockedElement(element, blockClass, blockSelector) {\r\n    try {\r\n        if (typeof blockClass === 'string') {\r\n            if (element.classList.contains(blockClass)) {\r\n                return true;\r\n            }\r\n        }\r\n        else {\r\n            for (let eIndex = element.classList.length; eIndex--;) {\r\n                const className = element.classList[eIndex];\r\n                if (blockClass.test(className)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        if (blockSelector) {\r\n            return element.matches(blockSelector);\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n    return false;\r\n}\r\nfunction classMatchesRegex(node, regex, checkAncestors) {\r\n    if (!node)\r\n        return false;\r\n    if (node.nodeType !== node.ELEMENT_NODE) {\r\n        if (!checkAncestors)\r\n            return false;\r\n        return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n    }\r\n    for (let eIndex = node.classList.length; eIndex--;) {\r\n        const className = node.classList[eIndex];\r\n        if (regex.test(className)) {\r\n            return true;\r\n        }\r\n    }\r\n    if (!checkAncestors)\r\n        return false;\r\n    return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n}\r\nfunction needMaskingText(node, maskTextClass, maskTextSelector, checkAncestors) {\r\n    try {\r\n        const el = node.nodeType === node.ELEMENT_NODE\r\n            ? node\r\n            : node.parentElement;\r\n        if (el === null)\r\n            return false;\r\n        if (typeof maskTextClass === 'string') {\r\n            if (checkAncestors) {\r\n                if (el.closest(`.${maskTextClass}`))\r\n                    return true;\r\n            }\r\n            else {\r\n                if (el.classList.contains(maskTextClass))\r\n                    return true;\r\n            }\r\n        }\r\n        else {\r\n            if (classMatchesRegex(el, maskTextClass, checkAncestors))\r\n                return true;\r\n        }\r\n        if (maskTextSelector) {\r\n            if (checkAncestors) {\r\n                if (el.closest(maskTextSelector))\r\n                    return true;\r\n            }\r\n            else {\r\n                if (el.matches(maskTextSelector))\r\n                    return true;\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n    return false;\r\n}\r\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\r\n    const win = iframeEl.contentWindow;\r\n    if (!win) {\r\n        return;\r\n    }\r\n    let fired = false;\r\n    let readyState;\r\n    try {\r\n        readyState = win.document.readyState;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (readyState !== 'complete') {\r\n        const timer = setTimeout(() => {\r\n            if (!fired) {\r\n                listener();\r\n                fired = true;\r\n            }\r\n        }, iframeLoadTimeout);\r\n        iframeEl.addEventListener('load', () => {\r\n            clearTimeout(timer);\r\n            fired = true;\r\n            listener();\r\n        });\r\n        return;\r\n    }\r\n    const blankUrl = 'about:blank';\r\n    if (win.location.href !== blankUrl ||\r\n        iframeEl.src === blankUrl ||\r\n        iframeEl.src === '') {\r\n        setTimeout(listener, 0);\r\n        return iframeEl.addEventListener('load', listener);\r\n    }\r\n    iframeEl.addEventListener('load', listener);\r\n}\r\nfunction onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {\r\n    let fired = false;\r\n    let styleSheetLoaded;\r\n    try {\r\n        styleSheetLoaded = link.sheet;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (styleSheetLoaded)\r\n        return;\r\n    const timer = setTimeout(() => {\r\n        if (!fired) {\r\n            listener();\r\n            fired = true;\r\n        }\r\n    }, styleSheetLoadTimeout);\r\n    link.addEventListener('load', () => {\r\n        clearTimeout(timer);\r\n        fired = true;\r\n        listener();\r\n    });\r\n}\r\nfunction serializeNode(n, options) {\r\n    const { doc, mirror, blockClass, blockSelector, needsMask, inlineStylesheet, maskInputOptions = {}, maskTextFn, maskInputFn, dataURLOptions = {}, inlineImages, recordCanvas, keepIframeSrcFn, newlyAddedElement = false, } = options;\r\n    const rootId = getRootId(doc, mirror);\r\n    switch (n.nodeType) {\r\n        case n.DOCUMENT_NODE:\r\n            if (n.compatMode !== 'CSS1Compat') {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: [],\r\n                    compatMode: n.compatMode,\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: [],\r\n                };\r\n            }\r\n        case n.DOCUMENT_TYPE_NODE:\r\n            return {\r\n                type: NodeType.DocumentType,\r\n                name: n.name,\r\n                publicId: n.publicId,\r\n                systemId: n.systemId,\r\n                rootId,\r\n            };\r\n        case n.ELEMENT_NODE:\r\n            return serializeElementNode(n, {\r\n                doc,\r\n                blockClass,\r\n                blockSelector,\r\n                inlineStylesheet,\r\n                maskInputOptions,\r\n                maskInputFn,\r\n                dataURLOptions,\r\n                inlineImages,\r\n                recordCanvas,\r\n                keepIframeSrcFn,\r\n                newlyAddedElement,\r\n                rootId,\r\n            });\r\n        case n.TEXT_NODE:\r\n            return serializeTextNode(n, {\r\n                doc,\r\n                needsMask,\r\n                maskTextFn,\r\n                rootId,\r\n            });\r\n        case n.CDATA_SECTION_NODE:\r\n            return {\r\n                type: NodeType.CDATA,\r\n                textContent: '',\r\n                rootId,\r\n            };\r\n        case n.COMMENT_NODE:\r\n            return {\r\n                type: NodeType.Comment,\r\n                textContent: n.textContent || '',\r\n                rootId,\r\n            };\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction getRootId(doc, mirror) {\r\n    if (!mirror.hasNode(doc))\r\n        return undefined;\r\n    const docId = mirror.getId(doc);\r\n    return docId === 1 ? undefined : docId;\r\n}\r\nfunction serializeTextNode(n, options) {\r\n    var _a;\r\n    const { needsMask, maskTextFn, rootId } = options;\r\n    const parentTagName = n.parentNode && n.parentNode.tagName;\r\n    let textContent = n.textContent;\r\n    const isStyle = parentTagName === 'STYLE' ? true : undefined;\r\n    const isScript = parentTagName === 'SCRIPT' ? true : undefined;\r\n    if (isStyle && textContent) {\r\n        try {\r\n            if (n.nextSibling || n.previousSibling) {\r\n            }\r\n            else if ((_a = n.parentNode.sheet) === null || _a === void 0 ? void 0 : _a.cssRules) {\r\n                textContent = stringifyStylesheet(n.parentNode.sheet);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.warn(`Cannot get CSS styles from text's parentNode. Error: ${err}`, n);\r\n        }\r\n        textContent = absoluteToStylesheet(textContent, getHref(options.doc));\r\n    }\r\n    if (isScript) {\r\n        textContent = 'SCRIPT_PLACEHOLDER';\r\n    }\r\n    if (!isStyle && !isScript && textContent && needsMask) {\r\n        textContent = maskTextFn\r\n            ? maskTextFn(textContent, n.parentElement)\r\n            : textContent.replace(/[\\S]/g, '*');\r\n    }\r\n    return {\r\n        type: NodeType.Text,\r\n        textContent: textContent || '',\r\n        isStyle,\r\n        rootId,\r\n    };\r\n}\r\nfunction serializeElementNode(n, options) {\r\n    const { doc, blockClass, blockSelector, inlineStylesheet, maskInputOptions = {}, maskInputFn, dataURLOptions = {}, inlineImages, recordCanvas, keepIframeSrcFn, newlyAddedElement = false, rootId, } = options;\r\n    const needBlock = _isBlockedElement(n, blockClass, blockSelector);\r\n    const tagName = getValidTagName(n);\r\n    let attributes = {};\r\n    const len = n.attributes.length;\r\n    for (let i = 0; i < len; i++) {\r\n        const attr = n.attributes[i];\r\n        if (!ignoreAttribute(tagName, attr.name, attr.value)) {\r\n            attributes[attr.name] = transformAttribute(doc, tagName, toLowerCase(attr.name), attr.value);\r\n        }\r\n    }\r\n    if (tagName === 'link' && inlineStylesheet) {\r\n        const stylesheet = Array.from(doc.styleSheets).find((s) => {\r\n            return s.href === n.href;\r\n        });\r\n        let cssText = null;\r\n        if (stylesheet) {\r\n            cssText = stringifyStylesheet(stylesheet);\r\n        }\r\n        if (cssText) {\r\n            delete attributes.rel;\r\n            delete attributes.href;\r\n            attributes._cssText = absoluteToStylesheet(cssText, stylesheet.href);\r\n        }\r\n    }\r\n    if (tagName === 'style' &&\r\n        n.sheet &&\r\n        !(n.innerText || n.textContent || '').trim().length) {\r\n        const cssText = stringifyStylesheet(n.sheet);\r\n        if (cssText) {\r\n            attributes._cssText = absoluteToStylesheet(cssText, getHref(doc));\r\n        }\r\n    }\r\n    if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\r\n        const value = n.value;\r\n        const checked = n.checked;\r\n        if (attributes.type !== 'radio' &&\r\n            attributes.type !== 'checkbox' &&\r\n            attributes.type !== 'submit' &&\r\n            attributes.type !== 'button' &&\r\n            value) {\r\n            attributes.value = maskInputValue({\r\n                element: n,\r\n                type: getInputType(n),\r\n                tagName,\r\n                value,\r\n                maskInputOptions,\r\n                maskInputFn,\r\n            });\r\n        }\r\n        else if (checked) {\r\n            attributes.checked = checked;\r\n        }\r\n    }\r\n    if (tagName === 'option') {\r\n        if (n.selected && !maskInputOptions['select']) {\r\n            attributes.selected = true;\r\n        }\r\n        else {\r\n            delete attributes.selected;\r\n        }\r\n    }\r\n    if (tagName === 'canvas' && recordCanvas) {\r\n        if (n.__context === '2d') {\r\n            if (!is2DCanvasBlank(n)) {\r\n                attributes.rr_dataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n        }\r\n        else if (!('__context' in n)) {\r\n            const canvasDataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            const blankCanvas = document.createElement('canvas');\r\n            blankCanvas.width = n.width;\r\n            blankCanvas.height = n.height;\r\n            const blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            if (canvasDataURL !== blankCanvasDataURL) {\r\n                attributes.rr_dataURL = canvasDataURL;\r\n            }\r\n        }\r\n    }\r\n    if (tagName === 'img' && inlineImages) {\r\n        if (!canvasService) {\r\n            canvasService = doc.createElement('canvas');\r\n            canvasCtx = canvasService.getContext('2d');\r\n        }\r\n        const image = n;\r\n        const oldValue = image.crossOrigin;\r\n        image.crossOrigin = 'anonymous';\r\n        const recordInlineImage = () => {\r\n            image.removeEventListener('load', recordInlineImage);\r\n            try {\r\n                canvasService.width = image.naturalWidth;\r\n                canvasService.height = image.naturalHeight;\r\n                canvasCtx.drawImage(image, 0, 0);\r\n                attributes.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n            catch (err) {\r\n                console.warn(`Cannot inline img src=${image.currentSrc}! Error: ${err}`);\r\n            }\r\n            oldValue\r\n                ? (attributes.crossOrigin = oldValue)\r\n                : image.removeAttribute('crossorigin');\r\n        };\r\n        if (image.complete && image.naturalWidth !== 0)\r\n            recordInlineImage();\r\n        else\r\n            image.addEventListener('load', recordInlineImage);\r\n    }\r\n    if (tagName === 'audio' || tagName === 'video') {\r\n        const mediaAttributes = attributes;\r\n        mediaAttributes.rr_mediaState = n.paused\r\n            ? 'paused'\r\n            : 'played';\r\n        mediaAttributes.rr_mediaCurrentTime = n.currentTime;\r\n        mediaAttributes.rr_mediaPlaybackRate = n.playbackRate;\r\n        mediaAttributes.rr_mediaMuted = n.muted;\r\n        mediaAttributes.rr_mediaLoop = n.loop;\r\n        mediaAttributes.rr_mediaVolume = n.volume;\r\n    }\r\n    if (!newlyAddedElement) {\r\n        if (n.scrollLeft) {\r\n            attributes.rr_scrollLeft = n.scrollLeft;\r\n        }\r\n        if (n.scrollTop) {\r\n            attributes.rr_scrollTop = n.scrollTop;\r\n        }\r\n    }\r\n    if (needBlock) {\r\n        const { width, height } = n.getBoundingClientRect();\r\n        attributes = {\r\n            class: attributes.class,\r\n            rr_width: `${width}px`,\r\n            rr_height: `${height}px`,\r\n        };\r\n    }\r\n    if (tagName === 'iframe' && !keepIframeSrcFn(attributes.src)) {\r\n        if (!n.contentDocument) {\r\n            attributes.rr_src = attributes.src;\r\n        }\r\n        delete attributes.src;\r\n    }\r\n    let isCustomElement;\r\n    try {\r\n        if (customElements.get(tagName))\r\n            isCustomElement = true;\r\n    }\r\n    catch (e) {\r\n    }\r\n    return {\r\n        type: NodeType.Element,\r\n        tagName,\r\n        attributes,\r\n        childNodes: [],\r\n        isSVG: isSVGElement(n) || undefined,\r\n        needBlock,\r\n        rootId,\r\n        isCustom: isCustomElement,\r\n    };\r\n}\r\nfunction lowerIfExists(maybeAttr) {\r\n    if (maybeAttr === undefined || maybeAttr === null) {\r\n        return '';\r\n    }\r\n    else {\r\n        return maybeAttr.toLowerCase();\r\n    }\r\n}\r\nfunction slimDOMExcluded(sn, slimDOMOptions) {\r\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\r\n        return true;\r\n    }\r\n    else if (sn.type === NodeType.Element) {\r\n        if (slimDOMOptions.script &&\r\n            (sn.tagName === 'script' ||\r\n                (sn.tagName === 'link' &&\r\n                    (sn.attributes.rel === 'preload' ||\r\n                        sn.attributes.rel === 'modulepreload') &&\r\n                    sn.attributes.as === 'script') ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'prefetch' &&\r\n                    typeof sn.attributes.href === 'string' &&\r\n                    extractFileExtension(sn.attributes.href) === 'js'))) {\r\n            return true;\r\n        }\r\n        else if (slimDOMOptions.headFavicon &&\r\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\r\n                (sn.tagName === 'meta' &&\r\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\r\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\r\n            return true;\r\n        }\r\n        else if (sn.tagName === 'meta') {\r\n            if (slimDOMOptions.headMetaDescKeywords &&\r\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaSocial &&\r\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\r\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\r\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaRobots &&\r\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\r\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\r\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaHttpEquiv &&\r\n                sn.attributes['http-equiv'] !== undefined) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaAuthorship &&\r\n                (lowerIfExists(sn.attributes.name) === 'author' ||\r\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\r\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\r\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\r\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\r\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\r\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaVerification &&\r\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\r\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction serializeNodeWithId(n, options) {\r\n    const { doc, mirror, blockClass, blockSelector, maskTextClass, maskTextSelector, skipChild = false, inlineStylesheet = true, maskInputOptions = {}, maskTextFn, maskInputFn, slimDOMOptions, dataURLOptions = {}, inlineImages = false, recordCanvas = false, onSerialize, onIframeLoad, iframeLoadTimeout = 5000, onStylesheetLoad, stylesheetLoadTimeout = 5000, keepIframeSrcFn = () => false, newlyAddedElement = false, } = options;\r\n    let { needsMask } = options;\r\n    let { preserveWhiteSpace = true } = options;\r\n    if (!needsMask &&\r\n        n.childNodes) {\r\n        const checkAncestors = needsMask === undefined;\r\n        needsMask = needMaskingText(n, maskTextClass, maskTextSelector, checkAncestors);\r\n    }\r\n    const _serializedNode = serializeNode(n, {\r\n        doc,\r\n        mirror,\r\n        blockClass,\r\n        blockSelector,\r\n        needsMask,\r\n        inlineStylesheet,\r\n        maskInputOptions,\r\n        maskTextFn,\r\n        maskInputFn,\r\n        dataURLOptions,\r\n        inlineImages,\r\n        recordCanvas,\r\n        keepIframeSrcFn,\r\n        newlyAddedElement,\r\n    });\r\n    if (!_serializedNode) {\r\n        console.warn(n, 'not serialized');\r\n        return null;\r\n    }\r\n    let id;\r\n    if (mirror.hasNode(n)) {\r\n        id = mirror.getId(n);\r\n    }\r\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\r\n        (!preserveWhiteSpace &&\r\n            _serializedNode.type === NodeType.Text &&\r\n            !_serializedNode.isStyle &&\r\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\r\n        id = IGNORED_NODE;\r\n    }\r\n    else {\r\n        id = genId();\r\n    }\r\n    const serializedNode = Object.assign(_serializedNode, { id });\r\n    mirror.add(n, serializedNode);\r\n    if (id === IGNORED_NODE) {\r\n        return null;\r\n    }\r\n    if (onSerialize) {\r\n        onSerialize(n);\r\n    }\r\n    let recordChild = !skipChild;\r\n    if (serializedNode.type === NodeType.Element) {\r\n        recordChild = recordChild && !serializedNode.needBlock;\r\n        delete serializedNode.needBlock;\r\n        const shadowRoot = n.shadowRoot;\r\n        if (shadowRoot && isNativeShadowDom(shadowRoot))\r\n            serializedNode.isShadowHost = true;\r\n    }\r\n    if ((serializedNode.type === NodeType.Document ||\r\n        serializedNode.type === NodeType.Element) &&\r\n        recordChild) {\r\n        if (slimDOMOptions.headWhitespace &&\r\n            serializedNode.type === NodeType.Element &&\r\n            serializedNode.tagName === 'head') {\r\n            preserveWhiteSpace = false;\r\n        }\r\n        const bypassOptions = {\r\n            doc,\r\n            mirror,\r\n            blockClass,\r\n            blockSelector,\r\n            needsMask,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            skipChild,\r\n            inlineStylesheet,\r\n            maskInputOptions,\r\n            maskTextFn,\r\n            maskInputFn,\r\n            slimDOMOptions,\r\n            dataURLOptions,\r\n            inlineImages,\r\n            recordCanvas,\r\n            preserveWhiteSpace,\r\n            onSerialize,\r\n            onIframeLoad,\r\n            iframeLoadTimeout,\r\n            onStylesheetLoad,\r\n            stylesheetLoadTimeout,\r\n            keepIframeSrcFn,\r\n        };\r\n        if (serializedNode.type === NodeType.Element &&\r\n            serializedNode.tagName === 'textarea' &&\r\n            serializedNode.attributes.value !== undefined) ;\r\n        else {\r\n            for (const childN of Array.from(n.childNodes)) {\r\n                const serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n                if (serializedChildNode) {\r\n                    serializedNode.childNodes.push(serializedChildNode);\r\n                }\r\n            }\r\n        }\r\n        if (isElement(n) && n.shadowRoot) {\r\n            for (const childN of Array.from(n.shadowRoot.childNodes)) {\r\n                const serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n                if (serializedChildNode) {\r\n                    isNativeShadowDom(n.shadowRoot) &&\r\n                        (serializedChildNode.isShadow = true);\r\n                    serializedNode.childNodes.push(serializedChildNode);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (n.parentNode &&\r\n        isShadowRoot(n.parentNode) &&\r\n        isNativeShadowDom(n.parentNode)) {\r\n        serializedNode.isShadow = true;\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'iframe') {\r\n        onceIframeLoaded(n, () => {\r\n            const iframeDoc = n.contentDocument;\r\n            if (iframeDoc && onIframeLoad) {\r\n                const serializedIframeNode = serializeNodeWithId(iframeDoc, {\r\n                    doc: iframeDoc,\r\n                    mirror,\r\n                    blockClass,\r\n                    blockSelector,\r\n                    needsMask,\r\n                    maskTextClass,\r\n                    maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet,\r\n                    maskInputOptions,\r\n                    maskTextFn,\r\n                    maskInputFn,\r\n                    slimDOMOptions,\r\n                    dataURLOptions,\r\n                    inlineImages,\r\n                    recordCanvas,\r\n                    preserveWhiteSpace,\r\n                    onSerialize,\r\n                    onIframeLoad,\r\n                    iframeLoadTimeout,\r\n                    onStylesheetLoad,\r\n                    stylesheetLoadTimeout,\r\n                    keepIframeSrcFn,\r\n                });\r\n                if (serializedIframeNode) {\r\n                    onIframeLoad(n, serializedIframeNode);\r\n                }\r\n            }\r\n        }, iframeLoadTimeout);\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'link' &&\r\n        typeof serializedNode.attributes.rel === 'string' &&\r\n        (serializedNode.attributes.rel === 'stylesheet' ||\r\n            (serializedNode.attributes.rel === 'preload' &&\r\n                typeof serializedNode.attributes.href === 'string' &&\r\n                extractFileExtension(serializedNode.attributes.href) === 'css'))) {\r\n        onceStylesheetLoaded(n, () => {\r\n            if (onStylesheetLoad) {\r\n                const serializedLinkNode = serializeNodeWithId(n, {\r\n                    doc,\r\n                    mirror,\r\n                    blockClass,\r\n                    blockSelector,\r\n                    needsMask,\r\n                    maskTextClass,\r\n                    maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet,\r\n                    maskInputOptions,\r\n                    maskTextFn,\r\n                    maskInputFn,\r\n                    slimDOMOptions,\r\n                    dataURLOptions,\r\n                    inlineImages,\r\n                    recordCanvas,\r\n                    preserveWhiteSpace,\r\n                    onSerialize,\r\n                    onIframeLoad,\r\n                    iframeLoadTimeout,\r\n                    onStylesheetLoad,\r\n                    stylesheetLoadTimeout,\r\n                    keepIframeSrcFn,\r\n                });\r\n                if (serializedLinkNode) {\r\n                    onStylesheetLoad(n, serializedLinkNode);\r\n                }\r\n            }\r\n        }, stylesheetLoadTimeout);\r\n    }\r\n    return serializedNode;\r\n}\r\nfunction snapshot(n, options) {\r\n    const { mirror = new Mirror(), blockClass = 'rr-block', blockSelector = null, maskTextClass = 'rr-mask', maskTextSelector = null, inlineStylesheet = true, inlineImages = false, recordCanvas = false, maskAllInputs = false, maskTextFn, maskInputFn, slimDOM = false, dataURLOptions, preserveWhiteSpace, onSerialize, onIframeLoad, iframeLoadTimeout, onStylesheetLoad, stylesheetLoadTimeout, keepIframeSrcFn = () => false, } = options || {};\r\n    const maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true,\r\n        }\r\n        : maskAllInputs === false\r\n            ? {\r\n                password: true,\r\n            }\r\n            : maskAllInputs;\r\n    const slimDOMOptions = slimDOM === true || slimDOM === 'all'\r\n        ?\r\n            {\r\n                script: true,\r\n                comment: true,\r\n                headFavicon: true,\r\n                headWhitespace: true,\r\n                headMetaDescKeywords: slimDOM === 'all',\r\n                headMetaSocial: true,\r\n                headMetaRobots: true,\r\n                headMetaHttpEquiv: true,\r\n                headMetaAuthorship: true,\r\n                headMetaVerification: true,\r\n            }\r\n        : slimDOM === false\r\n            ? {}\r\n            : slimDOM;\r\n    return serializeNodeWithId(n, {\r\n        doc: n,\r\n        mirror,\r\n        blockClass,\r\n        blockSelector,\r\n        maskTextClass,\r\n        maskTextSelector,\r\n        skipChild: false,\r\n        inlineStylesheet,\r\n        maskInputOptions,\r\n        maskTextFn,\r\n        maskInputFn,\r\n        slimDOMOptions,\r\n        dataURLOptions,\r\n        inlineImages,\r\n        recordCanvas,\r\n        preserveWhiteSpace,\r\n        onSerialize,\r\n        onIframeLoad,\r\n        iframeLoadTimeout,\r\n        onStylesheetLoad,\r\n        stylesheetLoadTimeout,\r\n        keepIframeSrcFn,\r\n        newlyAddedElement: false,\r\n    });\r\n}\r\n\nconst commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\r\nfunction parse(css, options = {}) {\r\n    let lineno = 1;\r\n    let column = 1;\r\n    function updatePosition(str) {\r\n        const lines = str.match(/\\n/g);\r\n        if (lines) {\r\n            lineno += lines.length;\r\n        }\r\n        const i = str.lastIndexOf('\\n');\r\n        column = i === -1 ? column + str.length : str.length - i;\r\n    }\r\n    function position() {\r\n        const start = { line: lineno, column };\r\n        return (node) => {\r\n            node.position = new Position(start);\r\n            whitespace();\r\n            return node;\r\n        };\r\n    }\r\n    class Position {\r\n        constructor(start) {\r\n            this.start = start;\r\n            this.end = { line: lineno, column };\r\n            this.source = options.source;\r\n        }\r\n    }\r\n    Position.prototype.content = css;\r\n    const errorsList = [];\r\n    function error(msg) {\r\n        const err = new Error(`${options.source || ''}:${lineno}:${column}: ${msg}`);\r\n        err.reason = msg;\r\n        err.filename = options.source;\r\n        err.line = lineno;\r\n        err.column = column;\r\n        err.source = css;\r\n        if (options.silent) {\r\n            errorsList.push(err);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    function stylesheet() {\r\n        const rulesList = rules();\r\n        return {\r\n            type: 'stylesheet',\r\n            stylesheet: {\r\n                source: options.source,\r\n                rules: rulesList,\r\n                parsingErrors: errorsList,\r\n            },\r\n        };\r\n    }\r\n    function open() {\r\n        return match(/^{\\s*/);\r\n    }\r\n    function close() {\r\n        return match(/^}/);\r\n    }\r\n    function rules() {\r\n        let node;\r\n        const rules = [];\r\n        whitespace();\r\n        comments(rules);\r\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\r\n            if (node) {\r\n                rules.push(node);\r\n                comments(rules);\r\n            }\r\n        }\r\n        return rules;\r\n    }\r\n    function match(re) {\r\n        const m = re.exec(css);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        const str = m[0];\r\n        updatePosition(str);\r\n        css = css.slice(str.length);\r\n        return m;\r\n    }\r\n    function whitespace() {\r\n        match(/^\\s*/);\r\n    }\r\n    function comments(rules = []) {\r\n        let c;\r\n        while ((c = comment())) {\r\n            if (c) {\r\n                rules.push(c);\r\n            }\r\n            c = comment();\r\n        }\r\n        return rules;\r\n    }\r\n    function comment() {\r\n        const pos = position();\r\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\r\n            return;\r\n        }\r\n        let i = 2;\r\n        while ('' !== css.charAt(i) &&\r\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\r\n            ++i;\r\n        }\r\n        i += 2;\r\n        if ('' === css.charAt(i - 1)) {\r\n            return error('End of comment missing');\r\n        }\r\n        const str = css.slice(2, i - 2);\r\n        column += 2;\r\n        updatePosition(str);\r\n        css = css.slice(i);\r\n        column += 2;\r\n        return pos({\r\n            type: 'comment',\r\n            comment: str,\r\n        });\r\n    }\r\n    function selector() {\r\n        whitespace();\r\n        while (css[0] == '}') {\r\n            error('extra closing bracket');\r\n            css = css.slice(1);\r\n            whitespace();\r\n        }\r\n        const m = match(/^(((?<!\\\\)\"(?:\\\\\"|[^\"])*\"|(?<!\\\\)'(?:\\\\'|[^'])*'|[^{])+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        const cleanedInput = m[0]\r\n            .trim()\r\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\r\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, (m) => {\r\n            return m.replace(/,/g, '\\u200C');\r\n        });\r\n        return customSplit(cleanedInput).map((s) => s.replace(/\\u200C/g, ',').trim());\r\n    }\r\n    function customSplit(input) {\r\n        const result = [];\r\n        let currentSegment = '';\r\n        let depthParentheses = 0;\r\n        let depthBrackets = 0;\r\n        let currentStringChar = null;\r\n        for (const char of input) {\r\n            const hasStringEscape = currentSegment.endsWith('\\\\');\r\n            if (currentStringChar) {\r\n                if (currentStringChar === char && !hasStringEscape) {\r\n                    currentStringChar = null;\r\n                }\r\n            }\r\n            else if (char === '(') {\r\n                depthParentheses++;\r\n            }\r\n            else if (char === ')') {\r\n                depthParentheses--;\r\n            }\r\n            else if (char === '[') {\r\n                depthBrackets++;\r\n            }\r\n            else if (char === ']') {\r\n                depthBrackets--;\r\n            }\r\n            else if ('\\'\"'.includes(char)) {\r\n                currentStringChar = char;\r\n            }\r\n            if (char === ',' && depthParentheses === 0 && depthBrackets === 0) {\r\n                result.push(currentSegment);\r\n                currentSegment = '';\r\n            }\r\n            else {\r\n                currentSegment += char;\r\n            }\r\n        }\r\n        if (currentSegment) {\r\n            result.push(currentSegment);\r\n        }\r\n        return result;\r\n    }\r\n    function declaration() {\r\n        const pos = position();\r\n        const propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\r\n        if (!propMatch) {\r\n            return;\r\n        }\r\n        const prop = trim(propMatch[0]);\r\n        if (!match(/^:\\s*/)) {\r\n            return error(`property missing ':'`);\r\n        }\r\n        const val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\r\n        const ret = pos({\r\n            type: 'declaration',\r\n            property: prop.replace(commentre, ''),\r\n            value: val ? trim(val[0]).replace(commentre, '') : '',\r\n        });\r\n        match(/^[;\\s]*/);\r\n        return ret;\r\n    }\r\n    function declarations() {\r\n        const decls = [];\r\n        if (!open()) {\r\n            return error(`missing '{'`);\r\n        }\r\n        comments(decls);\r\n        let decl;\r\n        while ((decl = declaration())) {\r\n            if (decl !== false) {\r\n                decls.push(decl);\r\n                comments(decls);\r\n            }\r\n            decl = declaration();\r\n        }\r\n        if (!close()) {\r\n            return error(`missing '}'`);\r\n        }\r\n        return decls;\r\n    }\r\n    function keyframe() {\r\n        let m;\r\n        const vals = [];\r\n        const pos = position();\r\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\r\n            vals.push(m[1]);\r\n            match(/^,\\s*/);\r\n        }\r\n        if (!vals.length) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'keyframe',\r\n            values: vals,\r\n            declarations: declarations(),\r\n        });\r\n    }\r\n    function atkeyframes() {\r\n        const pos = position();\r\n        let m = match(/^@([-\\w]+)?keyframes\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        const vendor = m[1];\r\n        m = match(/^([-\\w]+)\\s*/);\r\n        if (!m) {\r\n            return error('@keyframes missing name');\r\n        }\r\n        const name = m[1];\r\n        if (!open()) {\r\n            return error(`@keyframes missing '{'`);\r\n        }\r\n        let frame;\r\n        let frames = comments();\r\n        while ((frame = keyframe())) {\r\n            frames.push(frame);\r\n            frames = frames.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(`@keyframes missing '}'`);\r\n        }\r\n        return pos({\r\n            type: 'keyframes',\r\n            name,\r\n            vendor,\r\n            keyframes: frames,\r\n        });\r\n    }\r\n    function atsupports() {\r\n        const pos = position();\r\n        const m = match(/^@supports *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        const supports = trim(m[1]);\r\n        if (!open()) {\r\n            return error(`@supports missing '{'`);\r\n        }\r\n        const style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(`@supports missing '}'`);\r\n        }\r\n        return pos({\r\n            type: 'supports',\r\n            supports,\r\n            rules: style,\r\n        });\r\n    }\r\n    function athost() {\r\n        const pos = position();\r\n        const m = match(/^@host\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(`@host missing '{'`);\r\n        }\r\n        const style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(`@host missing '}'`);\r\n        }\r\n        return pos({\r\n            type: 'host',\r\n            rules: style,\r\n        });\r\n    }\r\n    function atmedia() {\r\n        const pos = position();\r\n        const m = match(/^@media *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        const media = trim(m[1]);\r\n        if (!open()) {\r\n            return error(`@media missing '{'`);\r\n        }\r\n        const style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(`@media missing '}'`);\r\n        }\r\n        return pos({\r\n            type: 'media',\r\n            media,\r\n            rules: style,\r\n        });\r\n    }\r\n    function atcustommedia() {\r\n        const pos = position();\r\n        const m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'custom-media',\r\n            name: trim(m[1]),\r\n            media: trim(m[2]),\r\n        });\r\n    }\r\n    function atpage() {\r\n        const pos = position();\r\n        const m = match(/^@page */);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        const sel = selector() || [];\r\n        if (!open()) {\r\n            return error(`@page missing '{'`);\r\n        }\r\n        let decls = comments();\r\n        let decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(`@page missing '}'`);\r\n        }\r\n        return pos({\r\n            type: 'page',\r\n            selectors: sel,\r\n            declarations: decls,\r\n        });\r\n    }\r\n    function atdocument() {\r\n        const pos = position();\r\n        const m = match(/^@([-\\w]+)?document *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        const vendor = trim(m[1]);\r\n        const doc = trim(m[2]);\r\n        if (!open()) {\r\n            return error(`@document missing '{'`);\r\n        }\r\n        const style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(`@document missing '}'`);\r\n        }\r\n        return pos({\r\n            type: 'document',\r\n            document: doc,\r\n            vendor,\r\n            rules: style,\r\n        });\r\n    }\r\n    function atfontface() {\r\n        const pos = position();\r\n        const m = match(/^@font-face\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(`@font-face missing '{'`);\r\n        }\r\n        let decls = comments();\r\n        let decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(`@font-face missing '}'`);\r\n        }\r\n        return pos({\r\n            type: 'font-face',\r\n            declarations: decls,\r\n        });\r\n    }\r\n    const atimport = _compileAtrule('import');\r\n    const atcharset = _compileAtrule('charset');\r\n    const atnamespace = _compileAtrule('namespace');\r\n    function _compileAtrule(name) {\r\n        const re = new RegExp('^@' +\r\n            name +\r\n            '\\\\s*((?:' +\r\n            [\r\n                '(?<!\\\\\\\\)\"(?:\\\\\\\\\"|[^\"])*\"',\r\n                \"(?<!\\\\\\\\)'(?:\\\\\\\\'|[^'])*'\",\r\n                '[^;]',\r\n            ].join('|') +\r\n            ')+);');\r\n        return () => {\r\n            const pos = position();\r\n            const m = match(re);\r\n            if (!m) {\r\n                return;\r\n            }\r\n            const ret = { type: name };\r\n            ret[name] = m[1].trim();\r\n            return pos(ret);\r\n        };\r\n    }\r\n    function atrule() {\r\n        if (css[0] !== '@') {\r\n            return;\r\n        }\r\n        return (atkeyframes() ||\r\n            atmedia() ||\r\n            atcustommedia() ||\r\n            atsupports() ||\r\n            atimport() ||\r\n            atcharset() ||\r\n            atnamespace() ||\r\n            atdocument() ||\r\n            atpage() ||\r\n            athost() ||\r\n            atfontface());\r\n    }\r\n    function rule() {\r\n        const pos = position();\r\n        const sel = selector();\r\n        if (!sel) {\r\n            return error('selector missing');\r\n        }\r\n        comments();\r\n        return pos({\r\n            type: 'rule',\r\n            selectors: sel,\r\n            declarations: declarations(),\r\n        });\r\n    }\r\n    return addParent(stylesheet());\r\n}\r\nfunction trim(str) {\r\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\r\n}\r\nfunction addParent(obj, parent) {\r\n    const isNode = obj && typeof obj.type === 'string';\r\n    const childParent = isNode ? obj : parent;\r\n    for (const k of Object.keys(obj)) {\r\n        const value = obj[k];\r\n        if (Array.isArray(value)) {\r\n            value.forEach((v) => {\r\n                addParent(v, childParent);\r\n            });\r\n        }\r\n        else if (value && typeof value === 'object') {\r\n            addParent(value, childParent);\r\n        }\r\n    }\r\n    if (isNode) {\r\n        Object.defineProperty(obj, 'parent', {\r\n            configurable: true,\r\n            writable: true,\r\n            enumerable: false,\r\n            value: parent || null,\r\n        });\r\n    }\r\n    return obj;\r\n}\n\nconst tagMap = {\r\n    script: 'noscript',\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient',\r\n};\r\nfunction getTagName(n) {\r\n    let tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\r\n    if (tagName === 'link' && n.attributes._cssText) {\r\n        tagName = 'style';\r\n    }\r\n    return tagName;\r\n}\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\nconst MEDIA_SELECTOR = /(max|min)-device-(width|height)/;\r\nconst MEDIA_SELECTOR_GLOBAL = new RegExp(MEDIA_SELECTOR.source, 'g');\r\nconst HOVER_SELECTOR = /([^\\\\]):hover/;\r\nconst HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR.source, 'g');\r\nfunction adaptCssForReplay(cssText, cache) {\r\n    const cachedStyle = cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.get(cssText);\r\n    if (cachedStyle)\r\n        return cachedStyle;\r\n    const ast = parse(cssText, {\r\n        silent: true,\r\n    });\r\n    if (!ast.stylesheet) {\r\n        return cssText;\r\n    }\r\n    const selectors = [];\r\n    const medias = [];\r\n    function getSelectors(rule) {\r\n        if ('selectors' in rule && rule.selectors) {\r\n            rule.selectors.forEach((selector) => {\r\n                if (HOVER_SELECTOR.test(selector)) {\r\n                    selectors.push(selector);\r\n                }\r\n            });\r\n        }\r\n        if ('media' in rule && rule.media && MEDIA_SELECTOR.test(rule.media)) {\r\n            medias.push(rule.media);\r\n        }\r\n        if ('rules' in rule && rule.rules) {\r\n            rule.rules.forEach(getSelectors);\r\n        }\r\n    }\r\n    getSelectors(ast.stylesheet);\r\n    let result = cssText;\r\n    if (selectors.length > 0) {\r\n        const selectorMatcher = new RegExp(selectors\r\n            .filter((selector, index) => selectors.indexOf(selector) === index)\r\n            .sort((a, b) => b.length - a.length)\r\n            .map((selector) => {\r\n            return escapeRegExp(selector);\r\n        })\r\n            .join('|'), 'g');\r\n        result = result.replace(selectorMatcher, (selector) => {\r\n            const newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\r\n            return `${selector}, ${newSelector}`;\r\n        });\r\n    }\r\n    if (medias.length > 0) {\r\n        const mediaMatcher = new RegExp(medias\r\n            .filter((media, index) => medias.indexOf(media) === index)\r\n            .sort((a, b) => b.length - a.length)\r\n            .map((media) => {\r\n            return escapeRegExp(media);\r\n        })\r\n            .join('|'), 'g');\r\n        result = result.replace(mediaMatcher, (media) => {\r\n            return media.replace(MEDIA_SELECTOR_GLOBAL, '$1-$2');\r\n        });\r\n    }\r\n    cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.set(cssText, result);\r\n    return result;\r\n}\r\nfunction createCache() {\r\n    const stylesWithHoverClass = new Map();\r\n    return {\r\n        stylesWithHoverClass,\r\n    };\r\n}\r\nfunction buildNode(n, options) {\r\n    var _a;\r\n    const { doc, hackCss, cache } = options;\r\n    switch (n.type) {\r\n        case NodeType.Document:\r\n            return doc.implementation.createDocument(null, '', null);\r\n        case NodeType.DocumentType:\r\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\r\n        case NodeType.Element: {\r\n            const tagName = getTagName(n);\r\n            let node;\r\n            if (n.isSVG) {\r\n                node = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\r\n            }\r\n            else {\r\n                if (n.isCustom &&\r\n                    ((_a = doc.defaultView) === null || _a === void 0 ? void 0 : _a.customElements) &&\r\n                    !doc.defaultView.customElements.get(n.tagName))\r\n                    doc.defaultView.customElements.define(n.tagName, class extends doc.defaultView.HTMLElement {\r\n                    });\r\n                node = doc.createElement(tagName);\r\n            }\r\n            const specialAttributes = {};\r\n            for (const name in n.attributes) {\r\n                if (!Object.prototype.hasOwnProperty.call(n.attributes, name)) {\r\n                    continue;\r\n                }\r\n                let value = n.attributes[name];\r\n                if (tagName === 'option' &&\r\n                    name === 'selected' &&\r\n                    value === false) {\r\n                    continue;\r\n                }\r\n                if (value === null) {\r\n                    continue;\r\n                }\r\n                if (value === true)\r\n                    value = '';\r\n                if (name.startsWith('rr_')) {\r\n                    specialAttributes[name] = value;\r\n                    continue;\r\n                }\r\n                const isTextarea = tagName === 'textarea' && name === 'value';\r\n                const isRemoteOrDynamicCss = tagName === 'style' && name === '_cssText';\r\n                if (isRemoteOrDynamicCss && hackCss && typeof value === 'string') {\r\n                    value = adaptCssForReplay(value, cache);\r\n                }\r\n                if ((isTextarea || isRemoteOrDynamicCss) && typeof value === 'string') {\r\n                    node.appendChild(doc.createTextNode(value));\r\n                    n.childNodes = [];\r\n                    continue;\r\n                }\r\n                try {\r\n                    if (n.isSVG && name === 'xlink:href') {\r\n                        node.setAttributeNS('http://www.w3.org/1999/xlink', name, value.toString());\r\n                    }\r\n                    else if (name === 'onload' ||\r\n                        name === 'onclick' ||\r\n                        name.substring(0, 7) === 'onmouse') {\r\n                        node.setAttribute('_' + name, value.toString());\r\n                    }\r\n                    else if (tagName === 'meta' &&\r\n                        n.attributes['http-equiv'] === 'Content-Security-Policy' &&\r\n                        name === 'content') {\r\n                        node.setAttribute('csp-content', value.toString());\r\n                        continue;\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        (n.attributes.rel === 'preload' ||\r\n                            n.attributes.rel === 'modulepreload') &&\r\n                        n.attributes.as === 'script') {\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'prefetch' &&\r\n                        typeof n.attributes.href === 'string' &&\r\n                        n.attributes.href.endsWith('.js')) {\r\n                    }\r\n                    else if (tagName === 'img' &&\r\n                        n.attributes.srcset &&\r\n                        n.attributes.rr_dataURL) {\r\n                        node.setAttribute('rrweb-original-srcset', n.attributes.srcset);\r\n                    }\r\n                    else {\r\n                        node.setAttribute(name, value.toString());\r\n                    }\r\n                }\r\n                catch (error) {\r\n                }\r\n            }\r\n            for (const name in specialAttributes) {\r\n                const value = specialAttributes[name];\r\n                if (tagName === 'canvas' && name === 'rr_dataURL') {\r\n                    const image = document.createElement('img');\r\n                    image.onload = () => {\r\n                        const ctx = node.getContext('2d');\r\n                        if (ctx) {\r\n                            ctx.drawImage(image, 0, 0, image.width, image.height);\r\n                        }\r\n                    };\r\n                    image.src = value.toString();\r\n                    if (node.RRNodeType)\r\n                        node.rr_dataURL = value.toString();\r\n                }\r\n                else if (tagName === 'img' && name === 'rr_dataURL') {\r\n                    const image = node;\r\n                    if (!image.currentSrc.startsWith('data:')) {\r\n                        image.setAttribute('rrweb-original-src', n.attributes.src);\r\n                        image.src = value.toString();\r\n                    }\r\n                }\r\n                if (name === 'rr_width') {\r\n                    node.style.width = value.toString();\r\n                }\r\n                else if (name === 'rr_height') {\r\n                    node.style.height = value.toString();\r\n                }\r\n                else if (name === 'rr_mediaCurrentTime' &&\r\n                    typeof value === 'number') {\r\n                    node.currentTime = value;\r\n                }\r\n                else if (name === 'rr_mediaState') {\r\n                    switch (value) {\r\n                        case 'played':\r\n                            node\r\n                                .play()\r\n                                .catch((e) => console.warn('media playback error', e));\r\n                            break;\r\n                        case 'paused':\r\n                            node.pause();\r\n                            break;\r\n                    }\r\n                }\r\n                else if (name === 'rr_mediaPlaybackRate' &&\r\n                    typeof value === 'number') {\r\n                    node.playbackRate = value;\r\n                }\r\n                else if (name === 'rr_mediaMuted' && typeof value === 'boolean') {\r\n                    node.muted = value;\r\n                }\r\n                else if (name === 'rr_mediaLoop' && typeof value === 'boolean') {\r\n                    node.loop = value;\r\n                }\r\n                else if (name === 'rr_mediaVolume' && typeof value === 'number') {\r\n                    node.volume = value;\r\n                }\r\n            }\r\n            if (n.isShadowHost) {\r\n                if (!node.shadowRoot) {\r\n                    node.attachShadow({ mode: 'open' });\r\n                }\r\n                else {\r\n                    while (node.shadowRoot.firstChild) {\r\n                        node.shadowRoot.removeChild(node.shadowRoot.firstChild);\r\n                    }\r\n                }\r\n            }\r\n            return node;\r\n        }\r\n        case NodeType.Text:\r\n            return doc.createTextNode(n.isStyle && hackCss\r\n                ? adaptCssForReplay(n.textContent, cache)\r\n                : n.textContent);\r\n        case NodeType.CDATA:\r\n            return doc.createCDATASection(n.textContent);\r\n        case NodeType.Comment:\r\n            return doc.createComment(n.textContent);\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nfunction buildNodeWithSN(n, options) {\r\n    const { doc, mirror, skipChild = false, hackCss = true, afterAppend, cache, } = options;\r\n    if (mirror.has(n.id)) {\r\n        const nodeInMirror = mirror.getNode(n.id);\r\n        const meta = mirror.getMeta(nodeInMirror);\r\n        if (isNodeMetaEqual(meta, n))\r\n            return mirror.getNode(n.id);\r\n    }\r\n    let node = buildNode(n, { doc, hackCss, cache });\r\n    if (!node) {\r\n        return null;\r\n    }\r\n    if (n.rootId && mirror.getNode(n.rootId) !== doc) {\r\n        mirror.replace(n.rootId, doc);\r\n    }\r\n    if (n.type === NodeType.Document) {\r\n        doc.close();\r\n        doc.open();\r\n        if (n.compatMode === 'BackCompat' &&\r\n            n.childNodes &&\r\n            n.childNodes[0].type !== NodeType.DocumentType) {\r\n            if (n.childNodes[0].type === NodeType.Element &&\r\n                'xmlns' in n.childNodes[0].attributes &&\r\n                n.childNodes[0].attributes.xmlns === 'http://www.w3.org/1999/xhtml') {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">');\r\n            }\r\n            else {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">');\r\n            }\r\n        }\r\n        node = doc;\r\n    }\r\n    mirror.add(node, n);\r\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\r\n        !skipChild) {\r\n        for (const childN of n.childNodes) {\r\n            const childNode = buildNodeWithSN(childN, {\r\n                doc,\r\n                mirror,\r\n                skipChild: false,\r\n                hackCss,\r\n                afterAppend,\r\n                cache,\r\n            });\r\n            if (!childNode) {\r\n                console.warn('Failed to rebuild', childN);\r\n                continue;\r\n            }\r\n            if (childN.isShadow && isElement(node) && node.shadowRoot) {\r\n                node.shadowRoot.appendChild(childNode);\r\n            }\r\n            else if (n.type === NodeType.Document &&\r\n                childN.type == NodeType.Element) {\r\n                const htmlElement = childNode;\r\n                let body = null;\r\n                htmlElement.childNodes.forEach((child) => {\r\n                    if (child.nodeName === 'BODY')\r\n                        body = child;\r\n                });\r\n                if (body) {\r\n                    htmlElement.removeChild(body);\r\n                    node.appendChild(childNode);\r\n                    htmlElement.appendChild(body);\r\n                }\r\n                else {\r\n                    node.appendChild(childNode);\r\n                }\r\n            }\r\n            else {\r\n                node.appendChild(childNode);\r\n            }\r\n            if (afterAppend) {\r\n                afterAppend(childNode, childN.id);\r\n            }\r\n        }\r\n    }\r\n    return node;\r\n}\r\nfunction visit(mirror, onVisit) {\r\n    function walk(node) {\r\n        onVisit(node);\r\n    }\r\n    for (const id of mirror.getIds()) {\r\n        if (mirror.has(id)) {\r\n            walk(mirror.getNode(id));\r\n        }\r\n    }\r\n}\r\nfunction handleScroll(node, mirror) {\r\n    const n = mirror.getMeta(node);\r\n    if ((n === null || n === void 0 ? void 0 : n.type) !== NodeType.Element) {\r\n        return;\r\n    }\r\n    const el = node;\r\n    for (const name in n.attributes) {\r\n        if (!(Object.prototype.hasOwnProperty.call(n.attributes, name) &&\r\n            name.startsWith('rr_'))) {\r\n            continue;\r\n        }\r\n        const value = n.attributes[name];\r\n        if (name === 'rr_scrollLeft') {\r\n            el.scrollLeft = value;\r\n        }\r\n        if (name === 'rr_scrollTop') {\r\n            el.scrollTop = value;\r\n        }\r\n    }\r\n}\r\nfunction rebuild(n, options) {\r\n    const { doc, onVisit, hackCss = true, afterAppend, cache, mirror = new Mirror(), } = options;\r\n    const node = buildNodeWithSN(n, {\r\n        doc,\r\n        mirror,\r\n        skipChild: false,\r\n        hackCss,\r\n        afterAppend,\r\n        cache,\r\n    });\r\n    visit(mirror, (visitedNode) => {\r\n        if (onVisit) {\r\n            onVisit(visitedNode);\r\n        }\r\n        handleScroll(visitedNode, mirror);\r\n    });\r\n    return node;\r\n}\n\nexport { IGNORED_NODE, Mirror, NodeType, adaptCssForReplay, buildNodeWithSN, classMatchesRegex, createCache, createMirror, escapeImportStatement, extractFileExtension, fixSafariColons, genId, getInputType, ignoreAttribute, is2DCanvasBlank, isCSSImportRule, isCSSStyleRule, isElement, isNativeShadowDom, isNodeMetaEqual, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, stringifyRule, stringifyStylesheet, toLowerCase, transformAttribute };\n", "import { classMatchesRegex, IGNORED_NODE, isShadowRoot } from '../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nfunction on(type, fn, target = document) {\r\n    const options = { capture: true, passive: true };\r\n    target.addEventListener(type, fn, options);\r\n    return () => target.removeEventListener(type, fn, options);\r\n}\r\nconst DEPARTED_MIRROR_ACCESS_WARNING = 'Please stop import mirror directly. Instead of that,' +\r\n    '\\r\\n' +\r\n    'now you can use replayer.getMirror() to access the mirror instance of a replayer,' +\r\n    '\\r\\n' +\r\n    'or you can use record.mirror to access the mirror instance during recording.';\r\nlet _mirror = {\r\n    map: {},\r\n    getId() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return -1;\r\n    },\r\n    getNode() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return null;\r\n    },\r\n    removeNodeFromMap() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n    has() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return false;\r\n    },\r\n    reset() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n};\r\nif (typeof window !== 'undefined' && window.Proxy && window.Reflect) {\r\n    _mirror = new Proxy(_mirror, {\r\n        get(target, prop, receiver) {\r\n            if (prop === 'map') {\r\n                console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n            }\r\n            return Reflect.get(target, prop, receiver);\r\n        },\r\n    });\r\n}\r\nfunction throttle(func, wait, options = {}) {\r\n    let timeout = null;\r\n    let previous = 0;\r\n    return function (...args) {\r\n        const now = Date.now();\r\n        if (!previous && options.leading === false) {\r\n            previous = now;\r\n        }\r\n        const remaining = wait - (now - previous);\r\n        const context = this;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            func.apply(context, args);\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(() => {\r\n                previous = options.leading === false ? 0 : Date.now();\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            }, remaining);\r\n        }\r\n    };\r\n}\r\nfunction hookSetter(target, key, d, isRevoked, win = window) {\r\n    const original = win.Object.getOwnPropertyDescriptor(target, key);\r\n    win.Object.defineProperty(target, key, isRevoked\r\n        ? d\r\n        : {\r\n            set(value) {\r\n                setTimeout(() => {\r\n                    d.set.call(this, value);\r\n                }, 0);\r\n                if (original && original.set) {\r\n                    original.set.call(this, value);\r\n                }\r\n            },\r\n        });\r\n    return () => hookSetter(target, key, original || {}, true);\r\n}\r\nfunction patch(source, name, replacement) {\r\n    try {\r\n        if (!(name in source)) {\r\n            return () => {\r\n            };\r\n        }\r\n        const original = source[name];\r\n        const wrapped = replacement(original);\r\n        if (typeof wrapped === 'function') {\r\n            wrapped.prototype = wrapped.prototype || {};\r\n            Object.defineProperties(wrapped, {\r\n                __rrweb_original__: {\r\n                    enumerable: false,\r\n                    value: original,\r\n                },\r\n            });\r\n        }\r\n        source[name] = wrapped;\r\n        return () => {\r\n            source[name] = original;\r\n        };\r\n    }\r\n    catch (_a) {\r\n        return () => {\r\n        };\r\n    }\r\n}\r\nlet nowTimestamp = Date.now;\r\nif (!(/[1-9][0-9]{12}/.test(Date.now().toString()))) {\r\n    nowTimestamp = () => new Date().getTime();\r\n}\r\nfunction getWindowScroll(win) {\r\n    var _a, _b, _c, _d, _e, _f;\r\n    const doc = win.document;\r\n    return {\r\n        left: doc.scrollingElement\r\n            ? doc.scrollingElement.scrollLeft\r\n            : win.pageXOffset !== undefined\r\n                ? win.pageXOffset\r\n                : (doc === null || doc === void 0 ? void 0 : doc.documentElement.scrollLeft) ||\r\n                    ((_b = (_a = doc === null || doc === void 0 ? void 0 : doc.body) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.scrollLeft) ||\r\n                    ((_c = doc === null || doc === void 0 ? void 0 : doc.body) === null || _c === void 0 ? void 0 : _c.scrollLeft) ||\r\n                    0,\r\n        top: doc.scrollingElement\r\n            ? doc.scrollingElement.scrollTop\r\n            : win.pageYOffset !== undefined\r\n                ? win.pageYOffset\r\n                : (doc === null || doc === void 0 ? void 0 : doc.documentElement.scrollTop) ||\r\n                    ((_e = (_d = doc === null || doc === void 0 ? void 0 : doc.body) === null || _d === void 0 ? void 0 : _d.parentElement) === null || _e === void 0 ? void 0 : _e.scrollTop) ||\r\n                    ((_f = doc === null || doc === void 0 ? void 0 : doc.body) === null || _f === void 0 ? void 0 : _f.scrollTop) ||\r\n                    0,\r\n    };\r\n}\r\nfunction getWindowHeight() {\r\n    return (window.innerHeight ||\r\n        (document.documentElement && document.documentElement.clientHeight) ||\r\n        (document.body && document.body.clientHeight));\r\n}\r\nfunction getWindowWidth() {\r\n    return (window.innerWidth ||\r\n        (document.documentElement && document.documentElement.clientWidth) ||\r\n        (document.body && document.body.clientWidth));\r\n}\r\nfunction closestElementOfNode(node) {\r\n    if (!node) {\r\n        return null;\r\n    }\r\n    const el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    return el;\r\n}\r\nfunction isBlocked(node, blockClass, blockSelector, checkAncestors) {\r\n    if (!node) {\r\n        return false;\r\n    }\r\n    const el = closestElementOfNode(node);\r\n    if (!el) {\r\n        return false;\r\n    }\r\n    try {\r\n        if (typeof blockClass === 'string') {\r\n            if (el.classList.contains(blockClass))\r\n                return true;\r\n            if (checkAncestors && el.closest('.' + blockClass) !== null)\r\n                return true;\r\n        }\r\n        else {\r\n            if (classMatchesRegex(el, blockClass, checkAncestors))\r\n                return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n    if (blockSelector) {\r\n        if (el.matches(blockSelector))\r\n            return true;\r\n        if (checkAncestors && el.closest(blockSelector) !== null)\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSerialized(n, mirror) {\r\n    return mirror.getId(n) !== -1;\r\n}\r\nfunction isIgnored(n, mirror) {\r\n    return mirror.getId(n) === IGNORED_NODE;\r\n}\r\nfunction isAncestorRemoved(target, mirror) {\r\n    if (isShadowRoot(target)) {\r\n        return false;\r\n    }\r\n    const id = mirror.getId(target);\r\n    if (!mirror.has(id)) {\r\n        return true;\r\n    }\r\n    if (target.parentNode &&\r\n        target.parentNode.nodeType === target.DOCUMENT_NODE) {\r\n        return false;\r\n    }\r\n    if (!target.parentNode) {\r\n        return true;\r\n    }\r\n    return isAncestorRemoved(target.parentNode, mirror);\r\n}\r\nfunction legacy_isTouchEvent(event) {\r\n    return Boolean(event.changedTouches);\r\n}\r\nfunction polyfill(win = window) {\r\n    if ('NodeList' in win && !win.NodeList.prototype.forEach) {\r\n        win.NodeList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if ('DOMTokenList' in win && !win.DOMTokenList.prototype.forEach) {\r\n        win.DOMTokenList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if (!Node.prototype.contains) {\r\n        Node.prototype.contains = (...args) => {\r\n            let node = args[0];\r\n            if (!(0 in args)) {\r\n                throw new TypeError('1 argument is required');\r\n            }\r\n            do {\r\n                if (this === node) {\r\n                    return true;\r\n                }\r\n            } while ((node = node && node.parentNode));\r\n            return false;\r\n        };\r\n    }\r\n}\r\nfunction queueToResolveTrees(queue) {\r\n    const queueNodeMap = {};\r\n    const putIntoMap = (m, parent) => {\r\n        const nodeInTree = {\r\n            value: m,\r\n            parent,\r\n            children: [],\r\n        };\r\n        queueNodeMap[m.node.id] = nodeInTree;\r\n        return nodeInTree;\r\n    };\r\n    const queueNodeTrees = [];\r\n    for (const mutation of queue) {\r\n        const { nextId, parentId } = mutation;\r\n        if (nextId && nextId in queueNodeMap) {\r\n            const nextInTree = queueNodeMap[nextId];\r\n            if (nextInTree.parent) {\r\n                const idx = nextInTree.parent.children.indexOf(nextInTree);\r\n                nextInTree.parent.children.splice(idx, 0, putIntoMap(mutation, nextInTree.parent));\r\n            }\r\n            else {\r\n                const idx = queueNodeTrees.indexOf(nextInTree);\r\n                queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\r\n            }\r\n            continue;\r\n        }\r\n        if (parentId in queueNodeMap) {\r\n            const parentInTree = queueNodeMap[parentId];\r\n            parentInTree.children.push(putIntoMap(mutation, parentInTree));\r\n            continue;\r\n        }\r\n        queueNodeTrees.push(putIntoMap(mutation, null));\r\n    }\r\n    return queueNodeTrees;\r\n}\r\nfunction iterateResolveTree(tree, cb) {\r\n    cb(tree.value);\r\n    for (let i = tree.children.length - 1; i >= 0; i--) {\r\n        iterateResolveTree(tree.children[i], cb);\r\n    }\r\n}\r\nfunction isSerializedIframe(n, mirror) {\r\n    return Boolean(n.nodeName === 'IFRAME' && mirror.getMeta(n));\r\n}\r\nfunction isSerializedStylesheet(n, mirror) {\r\n    return Boolean(n.nodeName === 'LINK' &&\r\n        n.nodeType === n.ELEMENT_NODE &&\r\n        n.getAttribute &&\r\n        n.getAttribute('rel') === 'stylesheet' &&\r\n        mirror.getMeta(n));\r\n}\r\nfunction getBaseDimension(node, rootIframe) {\r\n    var _a, _b;\r\n    const frameElement = (_b = (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.frameElement;\r\n    if (!frameElement || frameElement === rootIframe) {\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            relativeScale: 1,\r\n            absoluteScale: 1,\r\n        };\r\n    }\r\n    const frameDimension = frameElement.getBoundingClientRect();\r\n    const frameBaseDimension = getBaseDimension(frameElement, rootIframe);\r\n    const relativeScale = frameDimension.height / frameElement.clientHeight;\r\n    return {\r\n        x: frameDimension.x * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.x,\r\n        y: frameDimension.y * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.y,\r\n        relativeScale,\r\n        absoluteScale: frameBaseDimension.absoluteScale * relativeScale,\r\n    };\r\n}\r\nfunction hasShadowRoot(n) {\r\n    return Boolean(n === null || n === void 0 ? void 0 : n.shadowRoot);\r\n}\r\nfunction getNestedRule(rules, position) {\r\n    const rule = rules[position[0]];\r\n    if (position.length === 1) {\r\n        return rule;\r\n    }\r\n    else {\r\n        return getNestedRule(rule.cssRules[position[1]].cssRules, position.slice(2));\r\n    }\r\n}\r\nfunction getPositionsAndIndex(nestedIndex) {\r\n    const positions = [...nestedIndex];\r\n    const index = positions.pop();\r\n    return { positions, index };\r\n}\r\nfunction uniqueTextMutations(mutations) {\r\n    const idSet = new Set();\r\n    const uniqueMutations = [];\r\n    for (let i = mutations.length; i--;) {\r\n        const mutation = mutations[i];\r\n        if (!idSet.has(mutation.id)) {\r\n            uniqueMutations.push(mutation);\r\n            idSet.add(mutation.id);\r\n        }\r\n    }\r\n    return uniqueMutations;\r\n}\r\nclass StyleSheetMirror {\r\n    constructor() {\r\n        this.id = 1;\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n    }\r\n    getId(stylesheet) {\r\n        var _a;\r\n        return (_a = this.styleIDMap.get(stylesheet)) !== null && _a !== void 0 ? _a : -1;\r\n    }\r\n    has(stylesheet) {\r\n        return this.styleIDMap.has(stylesheet);\r\n    }\r\n    add(stylesheet, id) {\r\n        if (this.has(stylesheet))\r\n            return this.getId(stylesheet);\r\n        let newId;\r\n        if (id === undefined) {\r\n            newId = this.id++;\r\n        }\r\n        else\r\n            newId = id;\r\n        this.styleIDMap.set(stylesheet, newId);\r\n        this.idStyleMap.set(newId, stylesheet);\r\n        return newId;\r\n    }\r\n    getStyle(id) {\r\n        return this.idStyleMap.get(id) || null;\r\n    }\r\n    reset() {\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n        this.id = 1;\r\n    }\r\n    generateId() {\r\n        return this.id++;\r\n    }\r\n}\r\nfunction getShadowHost(n) {\r\n    var _a, _b;\r\n    let shadowHost = null;\r\n    if (((_b = (_a = n.getRootNode) === null || _a === void 0 ? void 0 : _a.call(n)) === null || _b === void 0 ? void 0 : _b.nodeType) === Node.DOCUMENT_FRAGMENT_NODE &&\r\n        n.getRootNode().host)\r\n        shadowHost = n.getRootNode().host;\r\n    return shadowHost;\r\n}\r\nfunction getRootShadowHost(n) {\r\n    let rootShadowHost = n;\r\n    let shadowHost;\r\n    while ((shadowHost = getShadowHost(rootShadowHost)))\r\n        rootShadowHost = shadowHost;\r\n    return rootShadowHost;\r\n}\r\nfunction shadowHostInDom(n) {\r\n    const doc = n.ownerDocument;\r\n    if (!doc)\r\n        return false;\r\n    const shadowHost = getRootShadowHost(n);\r\n    return doc.contains(shadowHost);\r\n}\r\nfunction inDom(n) {\r\n    const doc = n.ownerDocument;\r\n    if (!doc)\r\n        return false;\r\n    return doc.contains(n) || shadowHostInDom(n);\r\n}\n\nexport { StyleSheetMirror, _mirror, closestElementOfNode, getBaseDimension, getNestedRule, getPositionsAndIndex, getRootShadowHost, getShadowHost, getWindowHeight, getWindowScroll, getWindowWidth, hasShadowRoot, hookSetter, inDom, isAncestorRemoved, isBlocked, isIgnored, isSerialized, isSerializedIframe, isSerializedStylesheet, iterateResolveTree, legacy_isTouchEvent, nowTimestamp, on, patch, polyfill, queueToResolveTrees, shadowHostInDom, throttle, uniqueTextMutations };\n", "var EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  IncrementalSource2[IncrementalSource2[\"CustomElement\"] = 16] = \"CustomElement\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar PointerTypes = /* @__PURE__ */ ((PointerTypes2) => {\n  PointerTypes2[PointerTypes2[\"Mouse\"] = 0] = \"Mouse\";\n  PointerTypes2[PointerTypes2[\"Pen\"] = 1] = \"Pen\";\n  PointerTypes2[PointerTypes2[\"Touch\"] = 2] = \"Touch\";\n  return PointerTypes2;\n})(PointerTypes || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar ReplayerEvents = /* @__PURE__ */ ((ReplayerEvents2) => {\n  ReplayerEvents2[\"Start\"] = \"start\";\n  ReplayerEvents2[\"Pause\"] = \"pause\";\n  ReplayerEvents2[\"Resume\"] = \"resume\";\n  ReplayerEvents2[\"Resize\"] = \"resize\";\n  ReplayerEvents2[\"Finish\"] = \"finish\";\n  ReplayerEvents2[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n  ReplayerEvents2[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n  ReplayerEvents2[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n  ReplayerEvents2[\"SkipStart\"] = \"skip-start\";\n  ReplayerEvents2[\"SkipEnd\"] = \"skip-end\";\n  ReplayerEvents2[\"MouseInteraction\"] = \"mouse-interaction\";\n  ReplayerEvents2[\"EventCast\"] = \"event-cast\";\n  ReplayerEvents2[\"CustomEvent\"] = \"custom-event\";\n  ReplayerEvents2[\"Flush\"] = \"flush\";\n  ReplayerEvents2[\"StateChange\"] = \"state-change\";\n  ReplayerEvents2[\"PlayBack\"] = \"play-back\";\n  ReplayerEvents2[\"Destroy\"] = \"destroy\";\n  return ReplayerEvents2;\n})(ReplayerEvents || {});\n\nexport { CanvasContext, EventType, IncrementalSource, MouseInteractions, PointerTypes, ReplayerEvents };\n", "import { isShadowRoot, isNativeShadowDom, getInputType, maskInputValue, ignoreAttribute, transformAttribute, toLowerCase, needMaskingText, IGNORED_NODE, serializeNodeWithId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { isIgnored, isBlocked, isSerialized, isAncestorRemoved, closestElementOfNode, hasShadowRoot, inDom, getShadowHost, isSerializedIframe, isSerializedStylesheet } from '../utils.js';\n\nfunction isNodeInLinkedList(n) {\r\n    return '__ln' in n;\r\n}\r\nclass DoubleLinkedList {\r\n    constructor() {\r\n        this.length = 0;\r\n        this.head = null;\r\n        this.tail = null;\r\n    }\r\n    get(position) {\r\n        if (position >= this.length) {\r\n            throw new Error('Position outside of list range');\r\n        }\r\n        let current = this.head;\r\n        for (let index = 0; index < position; index++) {\r\n            current = (current === null || current === void 0 ? void 0 : current.next) || null;\r\n        }\r\n        return current;\r\n    }\r\n    addNode(n) {\r\n        const node = {\r\n            value: n,\r\n            previous: null,\r\n            next: null,\r\n        };\r\n        n.__ln = node;\r\n        if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\r\n            const current = n.previousSibling.__ln.next;\r\n            node.next = current;\r\n            node.previous = n.previousSibling.__ln;\r\n            n.previousSibling.__ln.next = node;\r\n            if (current) {\r\n                current.previous = node;\r\n            }\r\n        }\r\n        else if (n.nextSibling &&\r\n            isNodeInLinkedList(n.nextSibling) &&\r\n            n.nextSibling.__ln.previous) {\r\n            const current = n.nextSibling.__ln.previous;\r\n            node.previous = current;\r\n            node.next = n.nextSibling.__ln;\r\n            n.nextSibling.__ln.previous = node;\r\n            if (current) {\r\n                current.next = node;\r\n            }\r\n        }\r\n        else {\r\n            if (this.head) {\r\n                this.head.previous = node;\r\n            }\r\n            node.next = this.head;\r\n            this.head = node;\r\n        }\r\n        if (node.next === null) {\r\n            this.tail = node;\r\n        }\r\n        this.length++;\r\n    }\r\n    removeNode(n) {\r\n        const current = n.__ln;\r\n        if (!this.head) {\r\n            return;\r\n        }\r\n        if (!current.previous) {\r\n            this.head = current.next;\r\n            if (this.head) {\r\n                this.head.previous = null;\r\n            }\r\n            else {\r\n                this.tail = null;\r\n            }\r\n        }\r\n        else {\r\n            current.previous.next = current.next;\r\n            if (current.next) {\r\n                current.next.previous = current.previous;\r\n            }\r\n            else {\r\n                this.tail = current.previous;\r\n            }\r\n        }\r\n        if (n.__ln) {\r\n            delete n.__ln;\r\n        }\r\n        this.length--;\r\n    }\r\n}\r\nconst moveKey = (id, parentId) => `${id}@${parentId}`;\r\nclass MutationBuffer {\r\n    constructor() {\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.texts = [];\r\n        this.attributes = [];\r\n        this.attributeMap = new WeakMap();\r\n        this.removes = [];\r\n        this.mapRemoves = [];\r\n        this.movedMap = {};\r\n        this.addedSet = new Set();\r\n        this.movedSet = new Set();\r\n        this.droppedSet = new Set();\r\n        this.processMutations = (mutations) => {\r\n            mutations.forEach(this.processMutation);\r\n            this.emit();\r\n        };\r\n        this.emit = () => {\r\n            if (this.frozen || this.locked) {\r\n                return;\r\n            }\r\n            const adds = [];\r\n            const addedIds = new Set();\r\n            const addList = new DoubleLinkedList();\r\n            const getNextId = (n) => {\r\n                let ns = n;\r\n                let nextId = IGNORED_NODE;\r\n                while (nextId === IGNORED_NODE) {\r\n                    ns = ns && ns.nextSibling;\r\n                    nextId = ns && this.mirror.getId(ns);\r\n                }\r\n                return nextId;\r\n            };\r\n            const pushAdd = (n) => {\r\n                if (!n.parentNode ||\r\n                    !inDom(n) ||\r\n                    n.parentNode.tagName === 'TEXTAREA') {\r\n                    return;\r\n                }\r\n                const parentId = isShadowRoot(n.parentNode)\r\n                    ? this.mirror.getId(getShadowHost(n))\r\n                    : this.mirror.getId(n.parentNode);\r\n                const nextId = getNextId(n);\r\n                if (parentId === -1 || nextId === -1) {\r\n                    return addList.addNode(n);\r\n                }\r\n                const sn = serializeNodeWithId(n, {\r\n                    doc: this.doc,\r\n                    mirror: this.mirror,\r\n                    blockClass: this.blockClass,\r\n                    blockSelector: this.blockSelector,\r\n                    maskTextClass: this.maskTextClass,\r\n                    maskTextSelector: this.maskTextSelector,\r\n                    skipChild: true,\r\n                    newlyAddedElement: true,\r\n                    inlineStylesheet: this.inlineStylesheet,\r\n                    maskInputOptions: this.maskInputOptions,\r\n                    maskTextFn: this.maskTextFn,\r\n                    maskInputFn: this.maskInputFn,\r\n                    slimDOMOptions: this.slimDOMOptions,\r\n                    dataURLOptions: this.dataURLOptions,\r\n                    recordCanvas: this.recordCanvas,\r\n                    inlineImages: this.inlineImages,\r\n                    onSerialize: (currentN) => {\r\n                        if (isSerializedIframe(currentN, this.mirror)) {\r\n                            this.iframeManager.addIframe(currentN);\r\n                        }\r\n                        if (isSerializedStylesheet(currentN, this.mirror)) {\r\n                            this.stylesheetManager.trackLinkElement(currentN);\r\n                        }\r\n                        if (hasShadowRoot(n)) {\r\n                            this.shadowDomManager.addShadowRoot(n.shadowRoot, this.doc);\r\n                        }\r\n                    },\r\n                    onIframeLoad: (iframe, childSn) => {\r\n                        this.iframeManager.attachIframe(iframe, childSn);\r\n                        this.shadowDomManager.observeAttachShadow(iframe);\r\n                    },\r\n                    onStylesheetLoad: (link, childSn) => {\r\n                        this.stylesheetManager.attachLinkElement(link, childSn);\r\n                    },\r\n                });\r\n                if (sn) {\r\n                    adds.push({\r\n                        parentId,\r\n                        nextId,\r\n                        node: sn,\r\n                    });\r\n                    addedIds.add(sn.id);\r\n                }\r\n            };\r\n            while (this.mapRemoves.length) {\r\n                this.mirror.removeNodeFromMap(this.mapRemoves.shift());\r\n            }\r\n            for (const n of this.movedSet) {\r\n                if (isParentRemoved(this.removes, n, this.mirror) &&\r\n                    !this.movedSet.has(n.parentNode)) {\r\n                    continue;\r\n                }\r\n                pushAdd(n);\r\n            }\r\n            for (const n of this.addedSet) {\r\n                if (!isAncestorInSet(this.droppedSet, n) &&\r\n                    !isParentRemoved(this.removes, n, this.mirror)) {\r\n                    pushAdd(n);\r\n                }\r\n                else if (isAncestorInSet(this.movedSet, n)) {\r\n                    pushAdd(n);\r\n                }\r\n                else {\r\n                    this.droppedSet.add(n);\r\n                }\r\n            }\r\n            let candidate = null;\r\n            while (addList.length) {\r\n                let node = null;\r\n                if (candidate) {\r\n                    const parentId = this.mirror.getId(candidate.value.parentNode);\r\n                    const nextId = getNextId(candidate.value);\r\n                    if (parentId !== -1 && nextId !== -1) {\r\n                        node = candidate;\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    let tailNode = addList.tail;\r\n                    while (tailNode) {\r\n                        const _node = tailNode;\r\n                        tailNode = tailNode.previous;\r\n                        if (_node) {\r\n                            const parentId = this.mirror.getId(_node.value.parentNode);\r\n                            const nextId = getNextId(_node.value);\r\n                            if (nextId === -1)\r\n                                continue;\r\n                            else if (parentId !== -1) {\r\n                                node = _node;\r\n                                break;\r\n                            }\r\n                            else {\r\n                                const unhandledNode = _node.value;\r\n                                if (unhandledNode.parentNode &&\r\n                                    unhandledNode.parentNode.nodeType ===\r\n                                        Node.DOCUMENT_FRAGMENT_NODE) {\r\n                                    const shadowHost = unhandledNode.parentNode\r\n                                        .host;\r\n                                    const parentId = this.mirror.getId(shadowHost);\r\n                                    if (parentId !== -1) {\r\n                                        node = _node;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    while (addList.head) {\r\n                        addList.removeNode(addList.head.value);\r\n                    }\r\n                    break;\r\n                }\r\n                candidate = node.previous;\r\n                addList.removeNode(node.value);\r\n                pushAdd(node.value);\r\n            }\r\n            const payload = {\r\n                texts: this.texts\r\n                    .map((text) => {\r\n                    const n = text.node;\r\n                    if (n.parentNode &&\r\n                        n.parentNode.tagName === 'TEXTAREA') {\r\n                        this.genTextAreaValueMutation(n.parentNode);\r\n                    }\r\n                    return {\r\n                        id: this.mirror.getId(n),\r\n                        value: text.value,\r\n                    };\r\n                })\r\n                    .filter((text) => !addedIds.has(text.id))\r\n                    .filter((text) => this.mirror.has(text.id)),\r\n                attributes: this.attributes\r\n                    .map((attribute) => {\r\n                    const { attributes } = attribute;\r\n                    if (typeof attributes.style === 'string') {\r\n                        const diffAsStr = JSON.stringify(attribute.styleDiff);\r\n                        const unchangedAsStr = JSON.stringify(attribute._unchangedStyles);\r\n                        if (diffAsStr.length < attributes.style.length) {\r\n                            if ((diffAsStr + unchangedAsStr).split('var(').length ===\r\n                                attributes.style.split('var(').length) {\r\n                                attributes.style = attribute.styleDiff;\r\n                            }\r\n                        }\r\n                    }\r\n                    return {\r\n                        id: this.mirror.getId(attribute.node),\r\n                        attributes: attributes,\r\n                    };\r\n                })\r\n                    .filter((attribute) => !addedIds.has(attribute.id))\r\n                    .filter((attribute) => this.mirror.has(attribute.id)),\r\n                removes: this.removes,\r\n                adds,\r\n            };\r\n            if (!payload.texts.length &&\r\n                !payload.attributes.length &&\r\n                !payload.removes.length &&\r\n                !payload.adds.length) {\r\n                return;\r\n            }\r\n            this.texts = [];\r\n            this.attributes = [];\r\n            this.attributeMap = new WeakMap();\r\n            this.removes = [];\r\n            this.addedSet = new Set();\r\n            this.movedSet = new Set();\r\n            this.droppedSet = new Set();\r\n            this.movedMap = {};\r\n            this.mutationCb(payload);\r\n        };\r\n        this.genTextAreaValueMutation = (textarea) => {\r\n            let item = this.attributeMap.get(textarea);\r\n            if (!item) {\r\n                item = {\r\n                    node: textarea,\r\n                    attributes: {},\r\n                    styleDiff: {},\r\n                    _unchangedStyles: {},\r\n                };\r\n                this.attributes.push(item);\r\n                this.attributeMap.set(textarea, item);\r\n            }\r\n            item.attributes.value = Array.from(textarea.childNodes, (cn) => cn.textContent || '').join('');\r\n        };\r\n        this.processMutation = (m) => {\r\n            if (isIgnored(m.target, this.mirror)) {\r\n                return;\r\n            }\r\n            switch (m.type) {\r\n                case 'characterData': {\r\n                    const value = m.target.textContent;\r\n                    if (!isBlocked(m.target, this.blockClass, this.blockSelector, false) &&\r\n                        value !== m.oldValue) {\r\n                        this.texts.push({\r\n                            value: needMaskingText(m.target, this.maskTextClass, this.maskTextSelector, true) && value\r\n                                ? this.maskTextFn\r\n                                    ? this.maskTextFn(value, closestElementOfNode(m.target))\r\n                                    : value.replace(/[\\S]/g, '*')\r\n                                : value,\r\n                            node: m.target,\r\n                        });\r\n                    }\r\n                    break;\r\n                }\r\n                case 'attributes': {\r\n                    const target = m.target;\r\n                    let attributeName = m.attributeName;\r\n                    let value = m.target.getAttribute(attributeName);\r\n                    if (attributeName === 'value') {\r\n                        const type = getInputType(target);\r\n                        value = maskInputValue({\r\n                            element: target,\r\n                            maskInputOptions: this.maskInputOptions,\r\n                            tagName: target.tagName,\r\n                            type,\r\n                            value,\r\n                            maskInputFn: this.maskInputFn,\r\n                        });\r\n                    }\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                        value === m.oldValue) {\r\n                        return;\r\n                    }\r\n                    let item = this.attributeMap.get(m.target);\r\n                    if (target.tagName === 'IFRAME' &&\r\n                        attributeName === 'src' &&\r\n                        !this.keepIframeSrcFn(value)) {\r\n                        if (!target.contentDocument) {\r\n                            attributeName = 'rr_src';\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (!item) {\r\n                        item = {\r\n                            node: m.target,\r\n                            attributes: {},\r\n                            styleDiff: {},\r\n                            _unchangedStyles: {},\r\n                        };\r\n                        this.attributes.push(item);\r\n                        this.attributeMap.set(m.target, item);\r\n                    }\r\n                    if (attributeName === 'type' &&\r\n                        target.tagName === 'INPUT' &&\r\n                        (m.oldValue || '').toLowerCase() === 'password') {\r\n                        target.setAttribute('data-rr-is-password', 'true');\r\n                    }\r\n                    if (!ignoreAttribute(target.tagName, attributeName)) {\r\n                        item.attributes[attributeName] = transformAttribute(this.doc, toLowerCase(target.tagName), toLowerCase(attributeName), value);\r\n                        if (attributeName === 'style') {\r\n                            if (!this.unattachedDoc) {\r\n                                try {\r\n                                    this.unattachedDoc =\r\n                                        document.implementation.createHTMLDocument();\r\n                                }\r\n                                catch (e) {\r\n                                    this.unattachedDoc = this.doc;\r\n                                }\r\n                            }\r\n                            const old = this.unattachedDoc.createElement('span');\r\n                            if (m.oldValue) {\r\n                                old.setAttribute('style', m.oldValue);\r\n                            }\r\n                            for (const pname of Array.from(target.style)) {\r\n                                const newValue = target.style.getPropertyValue(pname);\r\n                                const newPriority = target.style.getPropertyPriority(pname);\r\n                                if (newValue !== old.style.getPropertyValue(pname) ||\r\n                                    newPriority !== old.style.getPropertyPriority(pname)) {\r\n                                    if (newPriority === '') {\r\n                                        item.styleDiff[pname] = newValue;\r\n                                    }\r\n                                    else {\r\n                                        item.styleDiff[pname] = [newValue, newPriority];\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    item._unchangedStyles[pname] = [newValue, newPriority];\r\n                                }\r\n                            }\r\n                            for (const pname of Array.from(old.style)) {\r\n                                if (target.style.getPropertyValue(pname) === '') {\r\n                                    item.styleDiff[pname] = false;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case 'childList': {\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, true))\r\n                        return;\r\n                    if (m.target.tagName === 'TEXTAREA') {\r\n                        this.genTextAreaValueMutation(m.target);\r\n                        return;\r\n                    }\r\n                    m.addedNodes.forEach((n) => this.genAdds(n, m.target));\r\n                    m.removedNodes.forEach((n) => {\r\n                        const nodeId = this.mirror.getId(n);\r\n                        const parentId = isShadowRoot(m.target)\r\n                            ? this.mirror.getId(m.target.host)\r\n                            : this.mirror.getId(m.target);\r\n                        if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                            isIgnored(n, this.mirror) ||\r\n                            !isSerialized(n, this.mirror)) {\r\n                            return;\r\n                        }\r\n                        if (this.addedSet.has(n)) {\r\n                            deepDelete(this.addedSet, n);\r\n                            this.droppedSet.add(n);\r\n                        }\r\n                        else if (this.addedSet.has(m.target) && nodeId === -1) ;\r\n                        else if (isAncestorRemoved(m.target, this.mirror)) ;\r\n                        else if (this.movedSet.has(n) &&\r\n                            this.movedMap[moveKey(nodeId, parentId)]) {\r\n                            deepDelete(this.movedSet, n);\r\n                        }\r\n                        else {\r\n                            this.removes.push({\r\n                                parentId,\r\n                                id: nodeId,\r\n                                isShadow: isShadowRoot(m.target) && isNativeShadowDom(m.target)\r\n                                    ? true\r\n                                    : undefined,\r\n                            });\r\n                        }\r\n                        this.mapRemoves.push(n);\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        this.genAdds = (n, target) => {\r\n            if (this.processedNodeManager.inOtherBuffer(n, this))\r\n                return;\r\n            if (this.addedSet.has(n) || this.movedSet.has(n))\r\n                return;\r\n            if (this.mirror.hasNode(n)) {\r\n                if (isIgnored(n, this.mirror)) {\r\n                    return;\r\n                }\r\n                this.movedSet.add(n);\r\n                let targetId = null;\r\n                if (target && this.mirror.hasNode(target)) {\r\n                    targetId = this.mirror.getId(target);\r\n                }\r\n                if (targetId && targetId !== -1) {\r\n                    this.movedMap[moveKey(this.mirror.getId(n), targetId)] = true;\r\n                }\r\n            }\r\n            else {\r\n                this.addedSet.add(n);\r\n                this.droppedSet.delete(n);\r\n            }\r\n            if (!isBlocked(n, this.blockClass, this.blockSelector, false)) {\r\n                n.childNodes.forEach((childN) => this.genAdds(childN));\r\n                if (hasShadowRoot(n)) {\r\n                    n.shadowRoot.childNodes.forEach((childN) => {\r\n                        this.processedNodeManager.add(childN, this);\r\n                        this.genAdds(childN, n);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n    init(options) {\r\n        [\r\n            'mutationCb',\r\n            'blockClass',\r\n            'blockSelector',\r\n            'maskTextClass',\r\n            'maskTextSelector',\r\n            'inlineStylesheet',\r\n            'maskInputOptions',\r\n            'maskTextFn',\r\n            'maskInputFn',\r\n            'keepIframeSrcFn',\r\n            'recordCanvas',\r\n            'inlineImages',\r\n            'slimDOMOptions',\r\n            'dataURLOptions',\r\n            'doc',\r\n            'mirror',\r\n            'iframeManager',\r\n            'stylesheetManager',\r\n            'shadowDomManager',\r\n            'canvasManager',\r\n            'processedNodeManager',\r\n        ].forEach((key) => {\r\n            this[key] = options[key];\r\n        });\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n        this.canvasManager.freeze();\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n        this.canvasManager.unfreeze();\r\n        this.emit();\r\n    }\r\n    isFrozen() {\r\n        return this.frozen;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n        this.canvasManager.lock();\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n        this.canvasManager.unlock();\r\n        this.emit();\r\n    }\r\n    reset() {\r\n        this.shadowDomManager.reset();\r\n        this.canvasManager.reset();\r\n    }\r\n}\r\nfunction deepDelete(addsSet, n) {\r\n    addsSet.delete(n);\r\n    n.childNodes.forEach((childN) => deepDelete(addsSet, childN));\r\n}\r\nfunction isParentRemoved(removes, n, mirror) {\r\n    if (removes.length === 0)\r\n        return false;\r\n    return _isParentRemoved(removes, n, mirror);\r\n}\r\nfunction _isParentRemoved(removes, n, mirror) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    const parentId = mirror.getId(parentNode);\r\n    if (removes.some((r) => r.id === parentId)) {\r\n        return true;\r\n    }\r\n    return _isParentRemoved(removes, parentNode, mirror);\r\n}\r\nfunction isAncestorInSet(set, n) {\r\n    if (set.size === 0)\r\n        return false;\r\n    return _isAncestorInSet(set, n);\r\n}\r\nfunction _isAncestorInSet(set, n) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    if (set.has(parentNode)) {\r\n        return true;\r\n    }\r\n    return _isAncestorInSet(set, parentNode);\r\n}\n\nexport { MutationBuffer as default };\n", "let errorHandler;\r\nfunction registerErrorHandler(handler) {\r\n    errorHandler = handler;\r\n}\r\nfunction unregisterErrorHandler() {\r\n    errorHandler = undefined;\r\n}\r\nconst callbackWrapper = (cb) => {\r\n    if (!errorHandler) {\r\n        return cb;\r\n    }\r\n    const rrwebWrapped = ((...rest) => {\r\n        try {\r\n            return cb(...rest);\r\n        }\r\n        catch (error) {\r\n            if (errorHandler && errorHandler(error) === true) {\r\n                return;\r\n            }\r\n            throw error;\r\n        }\r\n    });\r\n    return rrwebWrapped;\r\n};\n\nexport { callbackWrapper, registerErrorHandler, unregisterErrorHandler };\n", "import { toLowerCase, getInputType, maskInputValue } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { on, throttle, isBlocked, getWindowScroll, getWindowHeight, getWindowWidth, hookSetter, patch, legacy_isTouchEvent, nowTimestamp } from '../utils.js';\nimport { MouseInteractions, IncrementalSource, PointerTypes } from '../../../types/dist/types.js';\nimport MutationBuffer from './mutation.js';\nimport { callbackWrapper } from './error-handler.js';\n\nconst mutationBuffers = [];\r\nfunction getEventTarget(event) {\r\n    try {\r\n        if ('composedPath' in event) {\r\n            const path = event.composedPath();\r\n            if (path.length) {\r\n                return path[0];\r\n            }\r\n        }\r\n        else if ('path' in event && event.path.length) {\r\n            return event.path[0];\r\n        }\r\n    }\r\n    catch (_a) {\r\n    }\r\n    return event && event.target;\r\n}\r\nfunction initMutationObserver(options, rootEl) {\r\n    var _a, _b;\r\n    const mutationBuffer = new MutationBuffer();\r\n    mutationBuffers.push(mutationBuffer);\r\n    mutationBuffer.init(options);\r\n    let mutationObserverCtor = window.MutationObserver ||\r\n        window.__rrMutationObserver;\r\n    const angularZoneSymbol = (_b = (_a = window === null || window === void 0 ? void 0 : window.Zone) === null || _a === void 0 ? void 0 : _a.__symbol__) === null || _b === void 0 ? void 0 : _b.call(_a, 'MutationObserver');\r\n    if (angularZoneSymbol &&\r\n        window[angularZoneSymbol]) {\r\n        mutationObserverCtor = window[angularZoneSymbol];\r\n    }\r\n    const observer = new mutationObserverCtor(callbackWrapper(mutationBuffer.processMutations.bind(mutationBuffer)));\r\n    observer.observe(rootEl, {\r\n        attributes: true,\r\n        attributeOldValue: true,\r\n        characterData: true,\r\n        characterDataOldValue: true,\r\n        childList: true,\r\n        subtree: true,\r\n    });\r\n    return observer;\r\n}\r\nfunction initMoveObserver({ mousemoveCb, sampling, doc, mirror, }) {\r\n    if (sampling.mousemove === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\r\n    const callbackThreshold = typeof sampling.mousemoveCallback === 'number'\r\n        ? sampling.mousemoveCallback\r\n        : 500;\r\n    let positions = [];\r\n    let timeBaseline;\r\n    const wrappedCb = throttle(callbackWrapper((source) => {\r\n        const totalOffset = Date.now() - timeBaseline;\r\n        mousemoveCb(positions.map((p) => {\r\n            p.timeOffset -= totalOffset;\r\n            return p;\r\n        }), source);\r\n        positions = [];\r\n        timeBaseline = null;\r\n    }), callbackThreshold);\r\n    const updatePosition = callbackWrapper(throttle(callbackWrapper((evt) => {\r\n        const target = getEventTarget(evt);\r\n        const { clientX, clientY } = legacy_isTouchEvent(evt)\r\n            ? evt.changedTouches[0]\r\n            : evt;\r\n        if (!timeBaseline) {\r\n            timeBaseline = nowTimestamp();\r\n        }\r\n        positions.push({\r\n            x: clientX,\r\n            y: clientY,\r\n            id: mirror.getId(target),\r\n            timeOffset: nowTimestamp() - timeBaseline,\r\n        });\r\n        wrappedCb(typeof DragEvent !== 'undefined' && evt instanceof DragEvent\r\n            ? IncrementalSource.Drag\r\n            : evt instanceof MouseEvent\r\n                ? IncrementalSource.MouseMove\r\n                : IncrementalSource.TouchMove);\r\n    }), threshold, {\r\n        trailing: false,\r\n    }));\r\n    const handlers = [\r\n        on('mousemove', updatePosition, doc),\r\n        on('touchmove', updatePosition, doc),\r\n        on('drag', updatePosition, doc),\r\n    ];\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction initMouseInteractionObserver({ mouseInteractionCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    if (sampling.mouseInteraction === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const disableMap = sampling.mouseInteraction === true ||\r\n        sampling.mouseInteraction === undefined\r\n        ? {}\r\n        : sampling.mouseInteraction;\r\n    const handlers = [];\r\n    let currentPointerType = null;\r\n    const getHandler = (eventKey) => {\r\n        return (event) => {\r\n            const target = getEventTarget(event);\r\n            if (isBlocked(target, blockClass, blockSelector, true)) {\r\n                return;\r\n            }\r\n            let pointerType = null;\r\n            let thisEventKey = eventKey;\r\n            if ('pointerType' in event) {\r\n                switch (event.pointerType) {\r\n                    case 'mouse':\r\n                        pointerType = PointerTypes.Mouse;\r\n                        break;\r\n                    case 'touch':\r\n                        pointerType = PointerTypes.Touch;\r\n                        break;\r\n                    case 'pen':\r\n                        pointerType = PointerTypes.Pen;\r\n                        break;\r\n                }\r\n                if (pointerType === PointerTypes.Touch) {\r\n                    if (MouseInteractions[eventKey] === MouseInteractions.MouseDown) {\r\n                        thisEventKey = 'TouchStart';\r\n                    }\r\n                    else if (MouseInteractions[eventKey] === MouseInteractions.MouseUp) {\r\n                        thisEventKey = 'TouchEnd';\r\n                    }\r\n                }\r\n                else if (pointerType === PointerTypes.Pen) ;\r\n            }\r\n            else if (legacy_isTouchEvent(event)) {\r\n                pointerType = PointerTypes.Touch;\r\n            }\r\n            if (pointerType !== null) {\r\n                currentPointerType = pointerType;\r\n                if ((thisEventKey.startsWith('Touch') &&\r\n                    pointerType === PointerTypes.Touch) ||\r\n                    (thisEventKey.startsWith('Mouse') &&\r\n                        pointerType === PointerTypes.Mouse)) {\r\n                    pointerType = null;\r\n                }\r\n            }\r\n            else if (MouseInteractions[eventKey] === MouseInteractions.Click) {\r\n                pointerType = currentPointerType;\r\n                currentPointerType = null;\r\n            }\r\n            const e = legacy_isTouchEvent(event) ? event.changedTouches[0] : event;\r\n            if (!e) {\r\n                return;\r\n            }\r\n            const id = mirror.getId(target);\r\n            const { clientX, clientY } = e;\r\n            callbackWrapper(mouseInteractionCb)(Object.assign({ type: MouseInteractions[thisEventKey], id, x: clientX, y: clientY }, (pointerType !== null && { pointerType })));\r\n        };\r\n    };\r\n    Object.keys(MouseInteractions)\r\n        .filter((key) => Number.isNaN(Number(key)) &&\r\n        !key.endsWith('_Departed') &&\r\n        disableMap[key] !== false)\r\n        .forEach((eventKey) => {\r\n        let eventName = toLowerCase(eventKey);\r\n        const handler = getHandler(eventKey);\r\n        if (window.PointerEvent) {\r\n            switch (MouseInteractions[eventKey]) {\r\n                case MouseInteractions.MouseDown:\r\n                case MouseInteractions.MouseUp:\r\n                    eventName = eventName.replace('mouse', 'pointer');\r\n                    break;\r\n                case MouseInteractions.TouchStart:\r\n                case MouseInteractions.TouchEnd:\r\n                    return;\r\n            }\r\n        }\r\n        handlers.push(on(eventName, handler, doc));\r\n    });\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction initScrollObserver({ scrollCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    const updatePosition = callbackWrapper(throttle(callbackWrapper((evt) => {\r\n        const target = getEventTarget(evt);\r\n        if (!target ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const id = mirror.getId(target);\r\n        if (target === doc && doc.defaultView) {\r\n            const scrollLeftTop = getWindowScroll(doc.defaultView);\r\n            scrollCb({\r\n                id,\r\n                x: scrollLeftTop.left,\r\n                y: scrollLeftTop.top,\r\n            });\r\n        }\r\n        else {\r\n            scrollCb({\r\n                id,\r\n                x: target.scrollLeft,\r\n                y: target.scrollTop,\r\n            });\r\n        }\r\n    }), sampling.scroll || 100));\r\n    return on('scroll', updatePosition, doc);\r\n}\r\nfunction initViewportResizeObserver({ viewportResizeCb }, { win }) {\r\n    let lastH = -1;\r\n    let lastW = -1;\r\n    const updateDimension = callbackWrapper(throttle(callbackWrapper(() => {\r\n        const height = getWindowHeight();\r\n        const width = getWindowWidth();\r\n        if (lastH !== height || lastW !== width) {\r\n            viewportResizeCb({\r\n                width: Number(width),\r\n                height: Number(height),\r\n            });\r\n            lastH = height;\r\n            lastW = width;\r\n        }\r\n    }), 200));\r\n    return on('resize', updateDimension, win);\r\n}\r\nconst INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\r\nconst lastInputValueMap = new WeakMap();\r\nfunction initInputObserver({ inputCb, doc, mirror, blockClass, blockSelector, ignoreClass, ignoreSelector, maskInputOptions, maskInputFn, sampling, userTriggeredOnInput, }) {\r\n    function eventHandler(event) {\r\n        let target = getEventTarget(event);\r\n        const userTriggered = event.isTrusted;\r\n        const tagName = target && target.tagName;\r\n        if (target && tagName === 'OPTION') {\r\n            target = target.parentElement;\r\n        }\r\n        if (!target ||\r\n            !tagName ||\r\n            INPUT_TAGS.indexOf(tagName) < 0 ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        if (target.classList.contains(ignoreClass) ||\r\n            (ignoreSelector && target.matches(ignoreSelector))) {\r\n            return;\r\n        }\r\n        let text = target.value;\r\n        let isChecked = false;\r\n        const type = getInputType(target) || '';\r\n        if (type === 'radio' || type === 'checkbox') {\r\n            isChecked = target.checked;\r\n        }\r\n        else if (maskInputOptions[tagName.toLowerCase()] ||\r\n            maskInputOptions[type]) {\r\n            text = maskInputValue({\r\n                element: target,\r\n                maskInputOptions,\r\n                tagName,\r\n                type,\r\n                value: text,\r\n                maskInputFn,\r\n            });\r\n        }\r\n        cbWithDedup(target, userTriggeredOnInput\r\n            ? { text, isChecked, userTriggered }\r\n            : { text, isChecked });\r\n        const name = target.name;\r\n        if (type === 'radio' && name && isChecked) {\r\n            doc\r\n                .querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`)\r\n                .forEach((el) => {\r\n                if (el !== target) {\r\n                    const text = el.value;\r\n                    cbWithDedup(el, userTriggeredOnInput\r\n                        ? { text, isChecked: !isChecked, userTriggered: false }\r\n                        : { text, isChecked: !isChecked });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function cbWithDedup(target, v) {\r\n        const lastInputValue = lastInputValueMap.get(target);\r\n        if (!lastInputValue ||\r\n            lastInputValue.text !== v.text ||\r\n            lastInputValue.isChecked !== v.isChecked) {\r\n            lastInputValueMap.set(target, v);\r\n            const id = mirror.getId(target);\r\n            callbackWrapper(inputCb)(Object.assign(Object.assign({}, v), { id }));\r\n        }\r\n    }\r\n    const events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\r\n    const handlers = events.map((eventName) => on(eventName, callbackWrapper(eventHandler), doc));\r\n    const currentWindow = doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n        };\r\n    }\r\n    const propertyDescriptor = currentWindow.Object.getOwnPropertyDescriptor(currentWindow.HTMLInputElement.prototype, 'value');\r\n    const hookProperties = [\r\n        [currentWindow.HTMLInputElement.prototype, 'value'],\r\n        [currentWindow.HTMLInputElement.prototype, 'checked'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'value'],\r\n        [currentWindow.HTMLTextAreaElement.prototype, 'value'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'selectedIndex'],\r\n        [currentWindow.HTMLOptionElement.prototype, 'selected'],\r\n    ];\r\n    if (propertyDescriptor && propertyDescriptor.set) {\r\n        handlers.push(...hookProperties.map((p) => hookSetter(p[0], p[1], {\r\n            set() {\r\n                callbackWrapper(eventHandler)({\r\n                    target: this,\r\n                    isTrusted: false,\r\n                });\r\n            },\r\n        }, false, currentWindow)));\r\n    }\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction getNestedCSSRulePositions(rule) {\r\n    const positions = [];\r\n    function recurse(childRule, pos) {\r\n        if ((hasNestedCSSRule('CSSGroupingRule') &&\r\n            childRule.parentRule instanceof CSSGroupingRule) ||\r\n            (hasNestedCSSRule('CSSMediaRule') &&\r\n                childRule.parentRule instanceof CSSMediaRule) ||\r\n            (hasNestedCSSRule('CSSSupportsRule') &&\r\n                childRule.parentRule instanceof CSSSupportsRule) ||\r\n            (hasNestedCSSRule('CSSConditionRule') &&\r\n                childRule.parentRule instanceof CSSConditionRule)) {\r\n            const rules = Array.from(childRule.parentRule.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        else if (childRule.parentStyleSheet) {\r\n            const rules = Array.from(childRule.parentStyleSheet.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        return pos;\r\n    }\r\n    return recurse(rule, positions);\r\n}\r\nfunction getIdAndStyleId(sheet, mirror, styleMirror) {\r\n    let id, styleId;\r\n    if (!sheet)\r\n        return {};\r\n    if (sheet.ownerNode)\r\n        id = mirror.getId(sheet.ownerNode);\r\n    else\r\n        styleId = styleMirror.getId(sheet);\r\n    return {\r\n        styleId,\r\n        id,\r\n    };\r\n}\r\nfunction initStyleSheetObserver({ styleSheetRuleCb, mirror, stylesheetManager }, { win }) {\r\n    if (!win.CSSStyleSheet || !win.CSSStyleSheet.prototype) {\r\n        return () => {\r\n        };\r\n    }\r\n    const insertRule = win.CSSStyleSheet.prototype.insertRule;\r\n    win.CSSStyleSheet.prototype.insertRule = new Proxy(insertRule, {\r\n        apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n            const [rule, index] = argumentsList;\r\n            const { id, styleId } = getIdAndStyleId(thisArg, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    adds: [{ rule, index }],\r\n                });\r\n            }\r\n            return target.apply(thisArg, argumentsList);\r\n        }),\r\n    });\r\n    const deleteRule = win.CSSStyleSheet.prototype.deleteRule;\r\n    win.CSSStyleSheet.prototype.deleteRule = new Proxy(deleteRule, {\r\n        apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n            const [index] = argumentsList;\r\n            const { id, styleId } = getIdAndStyleId(thisArg, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    removes: [{ index }],\r\n                });\r\n            }\r\n            return target.apply(thisArg, argumentsList);\r\n        }),\r\n    });\r\n    let replace;\r\n    if (win.CSSStyleSheet.prototype.replace) {\r\n        replace = win.CSSStyleSheet.prototype.replace;\r\n        win.CSSStyleSheet.prototype.replace = new Proxy(replace, {\r\n            apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n                const [text] = argumentsList;\r\n                const { id, styleId } = getIdAndStyleId(thisArg, mirror, stylesheetManager.styleMirror);\r\n                if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                    styleSheetRuleCb({\r\n                        id,\r\n                        styleId,\r\n                        replace: text,\r\n                    });\r\n                }\r\n                return target.apply(thisArg, argumentsList);\r\n            }),\r\n        });\r\n    }\r\n    let replaceSync;\r\n    if (win.CSSStyleSheet.prototype.replaceSync) {\r\n        replaceSync = win.CSSStyleSheet.prototype.replaceSync;\r\n        win.CSSStyleSheet.prototype.replaceSync = new Proxy(replaceSync, {\r\n            apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n                const [text] = argumentsList;\r\n                const { id, styleId } = getIdAndStyleId(thisArg, mirror, stylesheetManager.styleMirror);\r\n                if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                    styleSheetRuleCb({\r\n                        id,\r\n                        styleId,\r\n                        replaceSync: text,\r\n                    });\r\n                }\r\n                return target.apply(thisArg, argumentsList);\r\n            }),\r\n        });\r\n    }\r\n    const supportedNestedCSSRuleTypes = {};\r\n    if (canMonkeyPatchNestedCSSRule('CSSGroupingRule')) {\r\n        supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\r\n    }\r\n    else {\r\n        if (canMonkeyPatchNestedCSSRule('CSSMediaRule')) {\r\n            supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\r\n        }\r\n        if (canMonkeyPatchNestedCSSRule('CSSConditionRule')) {\r\n            supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\r\n        }\r\n        if (canMonkeyPatchNestedCSSRule('CSSSupportsRule')) {\r\n            supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\r\n        }\r\n    }\r\n    const unmodifiedFunctions = {};\r\n    Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n        unmodifiedFunctions[typeKey] = {\r\n            insertRule: type.prototype.insertRule,\r\n            deleteRule: type.prototype.deleteRule,\r\n        };\r\n        type.prototype.insertRule = new Proxy(unmodifiedFunctions[typeKey].insertRule, {\r\n            apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n                const [rule, index] = argumentsList;\r\n                const { id, styleId } = getIdAndStyleId(thisArg.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n                if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                    styleSheetRuleCb({\r\n                        id,\r\n                        styleId,\r\n                        adds: [\r\n                            {\r\n                                rule,\r\n                                index: [\r\n                                    ...getNestedCSSRulePositions(thisArg),\r\n                                    index || 0,\r\n                                ],\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n                return target.apply(thisArg, argumentsList);\r\n            }),\r\n        });\r\n        type.prototype.deleteRule = new Proxy(unmodifiedFunctions[typeKey].deleteRule, {\r\n            apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n                const [index] = argumentsList;\r\n                const { id, styleId } = getIdAndStyleId(thisArg.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n                if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                    styleSheetRuleCb({\r\n                        id,\r\n                        styleId,\r\n                        removes: [\r\n                            { index: [...getNestedCSSRulePositions(thisArg), index] },\r\n                        ],\r\n                    });\r\n                }\r\n                return target.apply(thisArg, argumentsList);\r\n            }),\r\n        });\r\n    });\r\n    return callbackWrapper(() => {\r\n        win.CSSStyleSheet.prototype.insertRule = insertRule;\r\n        win.CSSStyleSheet.prototype.deleteRule = deleteRule;\r\n        replace && (win.CSSStyleSheet.prototype.replace = replace);\r\n        replaceSync && (win.CSSStyleSheet.prototype.replaceSync = replaceSync);\r\n        Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n            type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\r\n            type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\r\n        });\r\n    });\r\n}\r\nfunction initAdoptedStyleSheetObserver({ mirror, stylesheetManager, }, host) {\r\n    var _a, _b, _c;\r\n    let hostId = null;\r\n    if (host.nodeName === '#document')\r\n        hostId = mirror.getId(host);\r\n    else\r\n        hostId = mirror.getId(host.host);\r\n    const patchTarget = host.nodeName === '#document'\r\n        ? (_a = host.defaultView) === null || _a === void 0 ? void 0 : _a.Document\r\n        : (_c = (_b = host.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView) === null || _c === void 0 ? void 0 : _c.ShadowRoot;\r\n    const originalPropertyDescriptor = (patchTarget === null || patchTarget === void 0 ? void 0 : patchTarget.prototype)\r\n        ? Object.getOwnPropertyDescriptor(patchTarget === null || patchTarget === void 0 ? void 0 : patchTarget.prototype, 'adoptedStyleSheets')\r\n        : undefined;\r\n    if (hostId === null ||\r\n        hostId === -1 ||\r\n        !patchTarget ||\r\n        !originalPropertyDescriptor)\r\n        return () => {\r\n        };\r\n    Object.defineProperty(host, 'adoptedStyleSheets', {\r\n        configurable: originalPropertyDescriptor.configurable,\r\n        enumerable: originalPropertyDescriptor.enumerable,\r\n        get() {\r\n            var _a;\r\n            return (_a = originalPropertyDescriptor.get) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        },\r\n        set(sheets) {\r\n            var _a;\r\n            const result = (_a = originalPropertyDescriptor.set) === null || _a === void 0 ? void 0 : _a.call(this, sheets);\r\n            if (hostId !== null && hostId !== -1) {\r\n                try {\r\n                    stylesheetManager.adoptStyleSheets(sheets, hostId);\r\n                }\r\n                catch (e) {\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n    });\r\n    return callbackWrapper(() => {\r\n        Object.defineProperty(host, 'adoptedStyleSheets', {\r\n            configurable: originalPropertyDescriptor.configurable,\r\n            enumerable: originalPropertyDescriptor.enumerable,\r\n            get: originalPropertyDescriptor.get,\r\n            set: originalPropertyDescriptor.set,\r\n        });\r\n    });\r\n}\r\nfunction initStyleDeclarationObserver({ styleDeclarationCb, mirror, ignoreCSSAttributes, stylesheetManager, }, { win }) {\r\n    const setProperty = win.CSSStyleDeclaration.prototype.setProperty;\r\n    win.CSSStyleDeclaration.prototype.setProperty = new Proxy(setProperty, {\r\n        apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n            var _a;\r\n            const [property, value, priority] = argumentsList;\r\n            if (ignoreCSSAttributes.has(property)) {\r\n                return setProperty.apply(thisArg, [property, value, priority]);\r\n            }\r\n            const { id, styleId } = getIdAndStyleId((_a = thisArg.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleDeclarationCb({\r\n                    id,\r\n                    styleId,\r\n                    set: {\r\n                        property,\r\n                        value,\r\n                        priority,\r\n                    },\r\n                    index: getNestedCSSRulePositions(thisArg.parentRule),\r\n                });\r\n            }\r\n            return target.apply(thisArg, argumentsList);\r\n        }),\r\n    });\r\n    const removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\r\n    win.CSSStyleDeclaration.prototype.removeProperty = new Proxy(removeProperty, {\r\n        apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n            var _a;\r\n            const [property] = argumentsList;\r\n            if (ignoreCSSAttributes.has(property)) {\r\n                return removeProperty.apply(thisArg, [property]);\r\n            }\r\n            const { id, styleId } = getIdAndStyleId((_a = thisArg.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleDeclarationCb({\r\n                    id,\r\n                    styleId,\r\n                    remove: {\r\n                        property,\r\n                    },\r\n                    index: getNestedCSSRulePositions(thisArg.parentRule),\r\n                });\r\n            }\r\n            return target.apply(thisArg, argumentsList);\r\n        }),\r\n    });\r\n    return callbackWrapper(() => {\r\n        win.CSSStyleDeclaration.prototype.setProperty = setProperty;\r\n        win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\r\n    });\r\n}\r\nfunction initMediaInteractionObserver({ mediaInteractionCb, blockClass, blockSelector, mirror, sampling, doc, }) {\r\n    const handler = callbackWrapper((type) => throttle(callbackWrapper((event) => {\r\n        const target = getEventTarget(event);\r\n        if (!target ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const { currentTime, volume, muted, playbackRate, loop } = target;\r\n        mediaInteractionCb({\r\n            type,\r\n            id: mirror.getId(target),\r\n            currentTime,\r\n            volume,\r\n            muted,\r\n            playbackRate,\r\n            loop,\r\n        });\r\n    }), sampling.media || 500));\r\n    const handlers = [\r\n        on('play', handler(0), doc),\r\n        on('pause', handler(1), doc),\r\n        on('seeked', handler(2), doc),\r\n        on('volumechange', handler(3), doc),\r\n        on('ratechange', handler(4), doc),\r\n    ];\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction initFontObserver({ fontCb, doc }) {\r\n    const win = doc.defaultView;\r\n    if (!win) {\r\n        return () => {\r\n        };\r\n    }\r\n    const handlers = [];\r\n    const fontMap = new WeakMap();\r\n    const originalFontFace = win.FontFace;\r\n    win.FontFace = function FontFace(family, source, descriptors) {\r\n        const fontFace = new originalFontFace(family, source, descriptors);\r\n        fontMap.set(fontFace, {\r\n            family,\r\n            buffer: typeof source !== 'string',\r\n            descriptors,\r\n            fontSource: typeof source === 'string'\r\n                ? source\r\n                : JSON.stringify(Array.from(new Uint8Array(source))),\r\n        });\r\n        return fontFace;\r\n    };\r\n    const restoreHandler = patch(doc.fonts, 'add', function (original) {\r\n        return function (fontFace) {\r\n            setTimeout(callbackWrapper(() => {\r\n                const p = fontMap.get(fontFace);\r\n                if (p) {\r\n                    fontCb(p);\r\n                    fontMap.delete(fontFace);\r\n                }\r\n            }), 0);\r\n            return original.apply(this, [fontFace]);\r\n        };\r\n    });\r\n    handlers.push(() => {\r\n        win.FontFace = originalFontFace;\r\n    });\r\n    handlers.push(restoreHandler);\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction initSelectionObserver(param) {\r\n    const { doc, mirror, blockClass, blockSelector, selectionCb } = param;\r\n    let collapsed = true;\r\n    const updateSelection = callbackWrapper(() => {\r\n        const selection = doc.getSelection();\r\n        if (!selection || (collapsed && (selection === null || selection === void 0 ? void 0 : selection.isCollapsed)))\r\n            return;\r\n        collapsed = selection.isCollapsed || false;\r\n        const ranges = [];\r\n        const count = selection.rangeCount || 0;\r\n        for (let i = 0; i < count; i++) {\r\n            const range = selection.getRangeAt(i);\r\n            const { startContainer, startOffset, endContainer, endOffset } = range;\r\n            const blocked = isBlocked(startContainer, blockClass, blockSelector, true) ||\r\n                isBlocked(endContainer, blockClass, blockSelector, true);\r\n            if (blocked)\r\n                continue;\r\n            ranges.push({\r\n                start: mirror.getId(startContainer),\r\n                startOffset,\r\n                end: mirror.getId(endContainer),\r\n                endOffset,\r\n            });\r\n        }\r\n        selectionCb({ ranges });\r\n    });\r\n    updateSelection();\r\n    return on('selectionchange', updateSelection);\r\n}\r\nfunction initCustomElementObserver({ doc, customElementCb, }) {\r\n    const win = doc.defaultView;\r\n    if (!win || !win.customElements)\r\n        return () => { };\r\n    const restoreHandler = patch(win.customElements, 'define', function (original) {\r\n        return function (name, constructor, options) {\r\n            try {\r\n                customElementCb({\r\n                    define: {\r\n                        name,\r\n                    },\r\n                });\r\n            }\r\n            catch (e) {\r\n                console.warn(`Custom element callback failed for ${name}`);\r\n            }\r\n            return original.apply(this, [name, constructor, options]);\r\n        };\r\n    });\r\n    return restoreHandler;\r\n}\r\nfunction mergeHooks(o, hooks) {\r\n    const { mutationCb, mousemoveCb, mouseInteractionCb, scrollCb, viewportResizeCb, inputCb, mediaInteractionCb, styleSheetRuleCb, styleDeclarationCb, canvasMutationCb, fontCb, selectionCb, customElementCb, } = o;\r\n    o.mutationCb = (...p) => {\r\n        if (hooks.mutation) {\r\n            hooks.mutation(...p);\r\n        }\r\n        mutationCb(...p);\r\n    };\r\n    o.mousemoveCb = (...p) => {\r\n        if (hooks.mousemove) {\r\n            hooks.mousemove(...p);\r\n        }\r\n        mousemoveCb(...p);\r\n    };\r\n    o.mouseInteractionCb = (...p) => {\r\n        if (hooks.mouseInteraction) {\r\n            hooks.mouseInteraction(...p);\r\n        }\r\n        mouseInteractionCb(...p);\r\n    };\r\n    o.scrollCb = (...p) => {\r\n        if (hooks.scroll) {\r\n            hooks.scroll(...p);\r\n        }\r\n        scrollCb(...p);\r\n    };\r\n    o.viewportResizeCb = (...p) => {\r\n        if (hooks.viewportResize) {\r\n            hooks.viewportResize(...p);\r\n        }\r\n        viewportResizeCb(...p);\r\n    };\r\n    o.inputCb = (...p) => {\r\n        if (hooks.input) {\r\n            hooks.input(...p);\r\n        }\r\n        inputCb(...p);\r\n    };\r\n    o.mediaInteractionCb = (...p) => {\r\n        if (hooks.mediaInteaction) {\r\n            hooks.mediaInteaction(...p);\r\n        }\r\n        mediaInteractionCb(...p);\r\n    };\r\n    o.styleSheetRuleCb = (...p) => {\r\n        if (hooks.styleSheetRule) {\r\n            hooks.styleSheetRule(...p);\r\n        }\r\n        styleSheetRuleCb(...p);\r\n    };\r\n    o.styleDeclarationCb = (...p) => {\r\n        if (hooks.styleDeclaration) {\r\n            hooks.styleDeclaration(...p);\r\n        }\r\n        styleDeclarationCb(...p);\r\n    };\r\n    o.canvasMutationCb = (...p) => {\r\n        if (hooks.canvasMutation) {\r\n            hooks.canvasMutation(...p);\r\n        }\r\n        canvasMutationCb(...p);\r\n    };\r\n    o.fontCb = (...p) => {\r\n        if (hooks.font) {\r\n            hooks.font(...p);\r\n        }\r\n        fontCb(...p);\r\n    };\r\n    o.selectionCb = (...p) => {\r\n        if (hooks.selection) {\r\n            hooks.selection(...p);\r\n        }\r\n        selectionCb(...p);\r\n    };\r\n    o.customElementCb = (...c) => {\r\n        if (hooks.customElement) {\r\n            hooks.customElement(...c);\r\n        }\r\n        customElementCb(...c);\r\n    };\r\n}\r\nfunction initObservers(o, hooks = {}) {\r\n    const currentWindow = o.doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n        };\r\n    }\r\n    mergeHooks(o, hooks);\r\n    let mutationObserver;\r\n    if (o.recordDOM) {\r\n        mutationObserver = initMutationObserver(o, o.doc);\r\n    }\r\n    const mousemoveHandler = initMoveObserver(o);\r\n    const mouseInteractionHandler = initMouseInteractionObserver(o);\r\n    const scrollHandler = initScrollObserver(o);\r\n    const viewportResizeHandler = initViewportResizeObserver(o, {\r\n        win: currentWindow,\r\n    });\r\n    const inputHandler = initInputObserver(o);\r\n    const mediaInteractionHandler = initMediaInteractionObserver(o);\r\n    let styleSheetObserver = () => { };\r\n    let adoptedStyleSheetObserver = () => { };\r\n    let styleDeclarationObserver = () => { };\r\n    let fontObserver = () => { };\r\n    if (o.recordDOM) {\r\n        styleSheetObserver = initStyleSheetObserver(o, { win: currentWindow });\r\n        adoptedStyleSheetObserver = initAdoptedStyleSheetObserver(o, o.doc);\r\n        styleDeclarationObserver = initStyleDeclarationObserver(o, {\r\n            win: currentWindow,\r\n        });\r\n        if (o.collectFonts) {\r\n            fontObserver = initFontObserver(o);\r\n        }\r\n    }\r\n    const selectionObserver = initSelectionObserver(o);\r\n    const customElementObserver = initCustomElementObserver(o);\r\n    const pluginHandlers = [];\r\n    for (const plugin of o.plugins) {\r\n        pluginHandlers.push(plugin.observer(plugin.callback, currentWindow, plugin.options));\r\n    }\r\n    return callbackWrapper(() => {\r\n        mutationBuffers.forEach((b) => b.reset());\r\n        mutationObserver === null || mutationObserver === void 0 ? void 0 : mutationObserver.disconnect();\r\n        mousemoveHandler();\r\n        mouseInteractionHandler();\r\n        scrollHandler();\r\n        viewportResizeHandler();\r\n        inputHandler();\r\n        mediaInteractionHandler();\r\n        styleSheetObserver();\r\n        adoptedStyleSheetObserver();\r\n        styleDeclarationObserver();\r\n        fontObserver();\r\n        selectionObserver();\r\n        customElementObserver();\r\n        pluginHandlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction hasNestedCSSRule(prop) {\r\n    return typeof window[prop] !== 'undefined';\r\n}\r\nfunction canMonkeyPatchNestedCSSRule(prop) {\r\n    return Boolean(typeof window[prop] !== 'undefined' &&\r\n        window[prop].prototype &&\r\n        'insertRule' in window[prop].prototype &&\r\n        'deleteRule' in window[prop].prototype);\r\n}\n\nexport { INPUT_TAGS, initAdoptedStyleSheetObserver, initMutationObserver, initObservers, initScrollObserver, mutationBuffers };\n", "class CrossOriginIframeMirror {\r\n    constructor(generateIdFn) {\r\n        this.generateIdFn = generateIdFn;\r\n        this.iframeIdToRemoteIdMap = new WeakMap();\r\n        this.iframeRemoteIdToIdMap = new WeakMap();\r\n    }\r\n    getId(iframe, remoteId, idToRemoteMap, remoteToIdMap) {\r\n        const idToRemoteIdMap = idToRemoteMap || this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = remoteToIdMap || this.getRemoteIdToIdMap(iframe);\r\n        let id = idToRemoteIdMap.get(remoteId);\r\n        if (!id) {\r\n            id = this.generateIdFn();\r\n            idToRemoteIdMap.set(remoteId, id);\r\n            remoteIdToIdMap.set(id, remoteId);\r\n        }\r\n        return id;\r\n    }\r\n    getIds(iframe, remoteId) {\r\n        const idToRemoteIdMap = this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return remoteId.map((id) => this.getId(iframe, id, idToRemoteIdMap, remoteIdToIdMap));\r\n    }\r\n    getRemoteId(iframe, id, map) {\r\n        const remoteIdToIdMap = map || this.getRemoteIdToIdMap(iframe);\r\n        if (typeof id !== 'number')\r\n            return id;\r\n        const remoteId = remoteIdToIdMap.get(id);\r\n        if (!remoteId)\r\n            return -1;\r\n        return remoteId;\r\n    }\r\n    getRemoteIds(iframe, ids) {\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return ids.map((id) => this.getRemoteId(iframe, id, remoteIdToIdMap));\r\n    }\r\n    reset(iframe) {\r\n        if (!iframe) {\r\n            this.iframeIdToRemoteIdMap = new WeakMap();\r\n            this.iframeRemoteIdToIdMap = new WeakMap();\r\n            return;\r\n        }\r\n        this.iframeIdToRemoteIdMap.delete(iframe);\r\n        this.iframeRemoteIdToIdMap.delete(iframe);\r\n    }\r\n    getIdToRemoteIdMap(iframe) {\r\n        let idToRemoteIdMap = this.iframeIdToRemoteIdMap.get(iframe);\r\n        if (!idToRemoteIdMap) {\r\n            idToRemoteIdMap = new Map();\r\n            this.iframeIdToRemoteIdMap.set(iframe, idToRemoteIdMap);\r\n        }\r\n        return idToRemoteIdMap;\r\n    }\r\n    getRemoteIdToIdMap(iframe) {\r\n        let remoteIdToIdMap = this.iframeRemoteIdToIdMap.get(iframe);\r\n        if (!remoteIdToIdMap) {\r\n            remoteIdToIdMap = new Map();\r\n            this.iframeRemoteIdToIdMap.set(iframe, remoteIdToIdMap);\r\n        }\r\n        return remoteIdToIdMap;\r\n    }\r\n}\n\nexport { CrossOriginIframeMirror as default };\n", "import { genId, NodeType } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport CrossOriginIframeMirror from './cross-origin-iframe-mirror.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass IframeManager {\r\n    constructor(options) {\r\n        this.iframes = new WeakMap();\r\n        this.crossOriginIframeMap = new WeakMap();\r\n        this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);\r\n        this.crossOriginIframeRootIdMap = new WeakMap();\r\n        this.mutationCb = options.mutationCb;\r\n        this.wrappedEmit = options.wrappedEmit;\r\n        this.stylesheetManager = options.stylesheetManager;\r\n        this.recordCrossOriginIframes = options.recordCrossOriginIframes;\r\n        this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));\r\n        this.mirror = options.mirror;\r\n        if (this.recordCrossOriginIframes) {\r\n            window.addEventListener('message', this.handleMessage.bind(this));\r\n        }\r\n    }\r\n    addIframe(iframeEl) {\r\n        this.iframes.set(iframeEl, true);\r\n        if (iframeEl.contentWindow)\r\n            this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\r\n    }\r\n    addLoadListener(cb) {\r\n        this.loadListener = cb;\r\n    }\r\n    attachIframe(iframeEl, childSn) {\r\n        var _a;\r\n        this.mutationCb({\r\n            adds: [\r\n                {\r\n                    parentId: this.mirror.getId(iframeEl),\r\n                    nextId: null,\r\n                    node: childSn,\r\n                },\r\n            ],\r\n            removes: [],\r\n            texts: [],\r\n            attributes: [],\r\n            isAttachIframe: true,\r\n        });\r\n        (_a = this.loadListener) === null || _a === void 0 ? void 0 : _a.call(this, iframeEl);\r\n        if (iframeEl.contentDocument &&\r\n            iframeEl.contentDocument.adoptedStyleSheets &&\r\n            iframeEl.contentDocument.adoptedStyleSheets.length > 0)\r\n            this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets, this.mirror.getId(iframeEl.contentDocument));\r\n    }\r\n    handleMessage(message) {\r\n        const crossOriginMessageEvent = message;\r\n        if (crossOriginMessageEvent.data.type !== 'rrweb' ||\r\n            crossOriginMessageEvent.origin !== crossOriginMessageEvent.data.origin)\r\n            return;\r\n        const iframeSourceWindow = message.source;\r\n        if (!iframeSourceWindow)\r\n            return;\r\n        const iframeEl = this.crossOriginIframeMap.get(message.source);\r\n        if (!iframeEl)\r\n            return;\r\n        const transformedEvent = this.transformCrossOriginEvent(iframeEl, crossOriginMessageEvent.data.event);\r\n        if (transformedEvent)\r\n            this.wrappedEmit(transformedEvent, crossOriginMessageEvent.data.isCheckout);\r\n    }\r\n    transformCrossOriginEvent(iframeEl, e) {\r\n        var _a;\r\n        switch (e.type) {\r\n            case EventType.FullSnapshot: {\r\n                this.crossOriginIframeMirror.reset(iframeEl);\r\n                this.crossOriginIframeStyleMirror.reset(iframeEl);\r\n                this.replaceIdOnNode(e.data.node, iframeEl);\r\n                const rootId = e.data.node.id;\r\n                this.crossOriginIframeRootIdMap.set(iframeEl, rootId);\r\n                this.patchRootIdOnNode(e.data.node, rootId);\r\n                return {\r\n                    timestamp: e.timestamp,\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source: IncrementalSource.Mutation,\r\n                        adds: [\r\n                            {\r\n                                parentId: this.mirror.getId(iframeEl),\r\n                                nextId: null,\r\n                                node: e.data.node,\r\n                            },\r\n                        ],\r\n                        removes: [],\r\n                        texts: [],\r\n                        attributes: [],\r\n                        isAttachIframe: true,\r\n                    },\r\n                };\r\n            }\r\n            case EventType.Meta:\r\n            case EventType.Load:\r\n            case EventType.DomContentLoaded: {\r\n                return false;\r\n            }\r\n            case EventType.Plugin: {\r\n                return e;\r\n            }\r\n            case EventType.Custom: {\r\n                this.replaceIds(e.data.payload, iframeEl, ['id', 'parentId', 'previousId', 'nextId']);\r\n                return e;\r\n            }\r\n            case EventType.IncrementalSnapshot: {\r\n                switch (e.data.source) {\r\n                    case IncrementalSource.Mutation: {\r\n                        e.data.adds.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, [\r\n                                'parentId',\r\n                                'nextId',\r\n                                'previousId',\r\n                            ]);\r\n                            this.replaceIdOnNode(n.node, iframeEl);\r\n                            const rootId = this.crossOriginIframeRootIdMap.get(iframeEl);\r\n                            rootId && this.patchRootIdOnNode(n.node, rootId);\r\n                        });\r\n                        e.data.removes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['parentId', 'id']);\r\n                        });\r\n                        e.data.attributes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        e.data.texts.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Drag:\r\n                    case IncrementalSource.TouchMove:\r\n                    case IncrementalSource.MouseMove: {\r\n                        e.data.positions.forEach((p) => {\r\n                            this.replaceIds(p, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.ViewportResize: {\r\n                        return false;\r\n                    }\r\n                    case IncrementalSource.MediaInteraction:\r\n                    case IncrementalSource.MouseInteraction:\r\n                    case IncrementalSource.Scroll:\r\n                    case IncrementalSource.CanvasMutation:\r\n                    case IncrementalSource.Input: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.StyleSheetRule:\r\n                    case IncrementalSource.StyleDeclaration: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleId']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Font: {\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Selection: {\r\n                        e.data.ranges.forEach((range) => {\r\n                            this.replaceIds(range, iframeEl, ['start', 'end']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.AdoptedStyleSheet: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleIds']);\r\n                        (_a = e.data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n                            this.replaceStyleIds(style, iframeEl, ['styleId']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    replace(iframeMirror, obj, iframeEl, keys) {\r\n        for (const key of keys) {\r\n            if (!Array.isArray(obj[key]) && typeof obj[key] !== 'number')\r\n                continue;\r\n            if (Array.isArray(obj[key])) {\r\n                obj[key] = iframeMirror.getIds(iframeEl, obj[key]);\r\n            }\r\n            else {\r\n                obj[key] = iframeMirror.getId(iframeEl, obj[key]);\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    replaceIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceStyleIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceIdOnNode(node, iframeEl) {\r\n        this.replaceIds(node, iframeEl, ['id', 'rootId']);\r\n        if ('childNodes' in node) {\r\n            node.childNodes.forEach((child) => {\r\n                this.replaceIdOnNode(child, iframeEl);\r\n            });\r\n        }\r\n    }\r\n    patchRootIdOnNode(node, rootId) {\r\n        if (node.type !== NodeType.Document && !node.rootId)\r\n            node.rootId = rootId;\r\n        if ('childNodes' in node) {\r\n            node.childNodes.forEach((child) => {\r\n                this.patchRootIdOnNode(child, rootId);\r\n            });\r\n        }\r\n    }\r\n}\n\nexport { IframeManager };\n", "import { initMutationObserver, initScrollObserver, initAdoptedStyleSheetObserver } from './observer.js';\nimport { patch, inDom } from '../utils.js';\nimport { isNativeShadowDom } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nclass ShadowDomManager {\r\n    constructor(options) {\r\n        this.shadowDoms = new WeakSet();\r\n        this.restoreHandlers = [];\r\n        this.mutationCb = options.mutationCb;\r\n        this.scrollCb = options.scrollCb;\r\n        this.bypassOptions = options.bypassOptions;\r\n        this.mirror = options.mirror;\r\n        this.init();\r\n    }\r\n    init() {\r\n        this.reset();\r\n        this.patchAttachShadow(Element, document);\r\n    }\r\n    addShadowRoot(shadowRoot, doc) {\r\n        if (!isNativeShadowDom(shadowRoot))\r\n            return;\r\n        if (this.shadowDoms.has(shadowRoot))\r\n            return;\r\n        this.shadowDoms.add(shadowRoot);\r\n        const observer = initMutationObserver(Object.assign(Object.assign({}, this.bypassOptions), { doc, mutationCb: this.mutationCb, mirror: this.mirror, shadowDomManager: this }), shadowRoot);\r\n        this.restoreHandlers.push(() => observer.disconnect());\r\n        this.restoreHandlers.push(initScrollObserver(Object.assign(Object.assign({}, this.bypassOptions), { scrollCb: this.scrollCb, doc: shadowRoot, mirror: this.mirror })));\r\n        setTimeout(() => {\r\n            if (shadowRoot.adoptedStyleSheets &&\r\n                shadowRoot.adoptedStyleSheets.length > 0)\r\n                this.bypassOptions.stylesheetManager.adoptStyleSheets(shadowRoot.adoptedStyleSheets, this.mirror.getId(shadowRoot.host));\r\n            this.restoreHandlers.push(initAdoptedStyleSheetObserver({\r\n                mirror: this.mirror,\r\n                stylesheetManager: this.bypassOptions.stylesheetManager,\r\n            }, shadowRoot));\r\n        }, 0);\r\n    }\r\n    observeAttachShadow(iframeElement) {\r\n        if (!iframeElement.contentWindow || !iframeElement.contentDocument)\r\n            return;\r\n        this.patchAttachShadow(iframeElement.contentWindow.Element, iframeElement.contentDocument);\r\n    }\r\n    patchAttachShadow(element, doc) {\r\n        const manager = this;\r\n        this.restoreHandlers.push(patch(element.prototype, 'attachShadow', function (original) {\r\n            return function (option) {\r\n                const shadowRoot = original.call(this, option);\r\n                if (this.shadowRoot && inDom(this))\r\n                    manager.addShadowRoot(this.shadowRoot, doc);\r\n                return shadowRoot;\r\n            };\r\n        }));\r\n    }\r\n    reset() {\r\n        this.restoreHandlers.forEach((handler) => {\r\n            try {\r\n                handler();\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        this.restoreHandlers = [];\r\n        this.shadowDoms = new WeakSet();\r\n    }\r\n}\n\nexport { ShadowDomManager };\n", "/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nexport { __awaiter, __rest };\n", "/*\n * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n", "import { encode } from './../../../../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst canvasVarMap = new Map();\r\nfunction variableListFor(ctx, ctor) {\r\n    let contextMap = canvasVarMap.get(ctx);\r\n    if (!contextMap) {\r\n        contextMap = new Map();\r\n        canvasVarMap.set(ctx, contextMap);\r\n    }\r\n    if (!contextMap.has(ctor)) {\r\n        contextMap.set(ctor, []);\r\n    }\r\n    return contextMap.get(ctor);\r\n}\r\nconst saveWebGLVar = (value, win, ctx) => {\r\n    if (!value ||\r\n        !(isInstanceOfWebGLObject(value, win) || typeof value === 'object'))\r\n        return;\r\n    const name = value.constructor.name;\r\n    const list = variableListFor(ctx, name);\r\n    let index = list.indexOf(value);\r\n    if (index === -1) {\r\n        index = list.length;\r\n        list.push(value);\r\n    }\r\n    return index;\r\n};\r\nfunction serializeArg(value, win, ctx) {\r\n    if (value instanceof Array) {\r\n        return value.map((arg) => serializeArg(arg, win, ctx));\r\n    }\r\n    else if (value === null) {\r\n        return value;\r\n    }\r\n    else if (value instanceof Float32Array ||\r\n        value instanceof Float64Array ||\r\n        value instanceof Int32Array ||\r\n        value instanceof Uint32Array ||\r\n        value instanceof Uint8Array ||\r\n        value instanceof Uint16Array ||\r\n        value instanceof Int16Array ||\r\n        value instanceof Int8Array ||\r\n        value instanceof Uint8ClampedArray) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [Object.values(value)],\r\n        };\r\n    }\r\n    else if (value instanceof ArrayBuffer) {\r\n        const name = value.constructor.name;\r\n        const base64 = encode(value);\r\n        return {\r\n            rr_type: name,\r\n            base64,\r\n        };\r\n    }\r\n    else if (value instanceof DataView) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [\r\n                serializeArg(value.buffer, win, ctx),\r\n                value.byteOffset,\r\n                value.byteLength,\r\n            ],\r\n        };\r\n    }\r\n    else if (value instanceof HTMLImageElement) {\r\n        const name = value.constructor.name;\r\n        const { src } = value;\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof HTMLCanvasElement) {\r\n        const name = 'HTMLImageElement';\r\n        const src = value.toDataURL();\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof ImageData) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [serializeArg(value.data, win, ctx), value.width, value.height],\r\n        };\r\n    }\r\n    else if (isInstanceOfWebGLObject(value, win) || typeof value === 'object') {\r\n        const name = value.constructor.name;\r\n        const index = saveWebGLVar(value, win, ctx);\r\n        return {\r\n            rr_type: name,\r\n            index: index,\r\n        };\r\n    }\r\n    return value;\r\n}\r\nconst serializeArgs = (args, win, ctx) => {\r\n    return args.map((arg) => serializeArg(arg, win, ctx));\r\n};\r\nconst isInstanceOfWebGLObject = (value, win) => {\r\n    const webGLConstructorNames = [\r\n        'WebGLActiveInfo',\r\n        'WebGLBuffer',\r\n        'WebGLFramebuffer',\r\n        'WebGLProgram',\r\n        'WebGLRenderbuffer',\r\n        'WebGLShader',\r\n        'WebGLShaderPrecisionFormat',\r\n        'WebGLTexture',\r\n        'WebGLUniformLocation',\r\n        'WebGLVertexArrayObject',\r\n        'WebGLVertexArrayObjectOES',\r\n    ];\r\n    const supportedWebGLConstructorNames = webGLConstructorNames.filter((name) => typeof win[name] === 'function');\r\n    return Boolean(supportedWebGLConstructorNames.find((name) => value instanceof win[name]));\r\n};\n\nexport { isInstanceOfWebGLObject, saveWebGLVar, serializeArg, serializeArgs, variableListFor };\n", "import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { serializeArgs } from './serialize-args.js';\n\nfunction initCanvas2DMutationObserver(cb, win, blockClass, blockSelector) {\r\n    const handlers = [];\r\n    const props2D = Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);\r\n    for (const prop of props2D) {\r\n        try {\r\n            if (typeof win.CanvasRenderingContext2D.prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(win.CanvasRenderingContext2D.prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        setTimeout(() => {\r\n                            const recordArgs = serializeArgs(args, win, this);\r\n                            cb(this.canvas, {\r\n                                type: CanvasContext['2D'],\r\n                                property: prop,\r\n                                args: recordArgs,\r\n                            });\r\n                        }, 0);\r\n                    }\r\n                    return original.apply(this, args);\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(win.CanvasRenderingContext2D.prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type: CanvasContext['2D'],\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvas2DMutationObserver as default };\n", "import { patch, isBlocked } from '../../../utils.js';\n\nfunction getNormalizedContextName(contextType) {\r\n    return contextType === 'experimental-webgl' ? 'webgl' : contextType;\r\n}\r\nfunction initCanvasContextObserver(win, blockClass, blockSelector, setPreserveDrawingBufferToTrue) {\r\n    const handlers = [];\r\n    try {\r\n        const restoreHandler = patch(win.HTMLCanvasElement.prototype, 'getContext', function (original) {\r\n            return function (contextType, ...args) {\r\n                if (!isBlocked(this, blockClass, blockSelector, true)) {\r\n                    const ctxName = getNormalizedContextName(contextType);\r\n                    if (!('__context' in this))\r\n                        this.__context = ctxName;\r\n                    if (setPreserveDrawingBufferToTrue &&\r\n                        ['webgl', 'webgl2'].includes(ctxName)) {\r\n                        if (args[0] && typeof args[0] === 'object') {\r\n                            const contextAttributes = args[0];\r\n                            if (!contextAttributes.preserveDrawingBuffer) {\r\n                                contextAttributes.preserveDrawingBuffer = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            args.splice(0, 1, {\r\n                                preserveDrawingBuffer: true,\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                return original.apply(this, [contextType, ...args]);\r\n            };\r\n        });\r\n        handlers.push(restoreHandler);\r\n    }\r\n    catch (_a) {\r\n        console.error('failed to patch HTMLCanvasElement.prototype.getContext');\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasContextObserver as default };\n", "import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { saveWebGLVar, serializeArgs } from './serialize-args.js';\n\nfunction patchGLPrototype(prototype, type, cb, blockClass, blockSelector, mirror, win) {\r\n    const handlers = [];\r\n    const props = Object.getOwnPropertyNames(prototype);\r\n    for (const prop of props) {\r\n        if ([\r\n            'isContextLost',\r\n            'canvas',\r\n            'drawingBufferWidth',\r\n            'drawingBufferHeight',\r\n        ].includes(prop)) {\r\n            continue;\r\n        }\r\n        try {\r\n            if (typeof prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    const result = original.apply(this, args);\r\n                    saveWebGLVar(result, win, this);\r\n                    if ('tagName' in this.canvas &&\r\n                        !isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        const recordArgs = serializeArgs(args, win, this);\r\n                        const mutation = {\r\n                            type,\r\n                            property: prop,\r\n                            args: recordArgs,\r\n                        };\r\n                        cb(this.canvas, mutation);\r\n                    }\r\n                    return result;\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type,\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return handlers;\r\n}\r\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, blockSelector, mirror) {\r\n    const handlers = [];\r\n    handlers.push(...patchGLPrototype(win.WebGLRenderingContext.prototype, CanvasContext.WebGL, cb, blockClass, blockSelector, mirror, win));\r\n    if (typeof win.WebGL2RenderingContext !== 'undefined') {\r\n        handlers.push(...patchGLPrototype(win.WebGL2RenderingContext.prototype, CanvasContext.WebGL2, cb, blockClass, blockSelector, mirror, win));\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasWebGLMutationObserver as default };\n", "function funcToSource(fn, sourcemapArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var source = fn.toString();\n    var lines = source.split('\\n');\n    lines.pop();\n    lines.shift();\n    var blankPrefixLength = lines[0].search(/\\S/);\n    var regex = /(['\"])__worker_loader_strict__(['\"])/g;\n    for (var i = 0, n = lines.length; i < n; ++i) {\n        lines[i] = lines[i].substring(blankPrefixLength).replace(regex, '$1use strict$2') + '\\n';\n    }\n    if (sourcemap) {\n        lines.push('\\/\\/# sourceMappingURL=' + sourcemap + '\\n');\n    }\n    return lines;\n}\n\nexport { funcToSource };\n", "import { funcToSource } from './_rollup-plugin-web-worker-loader__helper__funcToSource.js';\n\nfunction createURL(fn, sourcemapArg) {\n    var lines = funcToSource(fn, sourcemapArg);\n    var blob = new Blob(lines, { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createInlineWorkerFactory(fn, sourcemapArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(fn, sourcemapArg);\n        return new Worker(url, options);\n    };\n}\n\nexport { createInlineWorkerFactory };\n", "import { createInlineWorkerFactory } from './_rollup-plugin-web-worker-loader__helper__browser__createInlineWorkerFactory.js';\n\nvar WorkerFactory = createInlineWorkerFactory(/* rollup-plugin-web-worker-loader */function () {\n(function () {\n    '__worker_loader_strict__';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\n\n    /*\n     * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n     * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>\n     * Released under MIT License\n     */\n    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n    // Use a lookup table to find the index.\n    var lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\n    for (var i = 0; i < chars.length; i++) {\n        lookup[chars.charCodeAt(i)] = i;\n    }\n    var encode = function (arraybuffer) {\n        var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n        for (i = 0; i < len; i += 3) {\n            base64 += chars[bytes[i] >> 2];\n            base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n            base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n            base64 += chars[bytes[i + 2] & 63];\n        }\n        if (len % 3 === 2) {\n            base64 = base64.substring(0, base64.length - 1) + '=';\n        }\n        else if (len % 3 === 1) {\n            base64 = base64.substring(0, base64.length - 2) + '==';\n        }\n        return base64;\n    };\n\n    const lastBlobMap = new Map();\r\n    const transparentBlobMap = new Map();\r\n    function getTransparentBlobFor(width, height, dataURLOptions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const id = `${width}-${height}`;\r\n            if ('OffscreenCanvas' in globalThis) {\r\n                if (transparentBlobMap.has(id))\r\n                    return transparentBlobMap.get(id);\r\n                const offscreen = new OffscreenCanvas(width, height);\r\n                offscreen.getContext('2d');\r\n                const blob = yield offscreen.convertToBlob(dataURLOptions);\r\n                const arrayBuffer = yield blob.arrayBuffer();\r\n                const base64 = encode(arrayBuffer);\r\n                transparentBlobMap.set(id, base64);\r\n                return base64;\r\n            }\r\n            else {\r\n                return '';\r\n            }\r\n        });\r\n    }\r\n    const worker = self;\r\n    worker.onmessage = function (e) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ('OffscreenCanvas' in globalThis) {\r\n                const { id, bitmap, width, height, dataURLOptions } = e.data;\r\n                const transparentBase64 = getTransparentBlobFor(width, height, dataURLOptions);\r\n                const offscreen = new OffscreenCanvas(width, height);\r\n                const ctx = offscreen.getContext('2d');\r\n                ctx.drawImage(bitmap, 0, 0);\r\n                bitmap.close();\r\n                const blob = yield offscreen.convertToBlob(dataURLOptions);\r\n                const type = blob.type;\r\n                const arrayBuffer = yield blob.arrayBuffer();\r\n                const base64 = encode(arrayBuffer);\r\n                if (!lastBlobMap.has(id) && (yield transparentBase64) === base64) {\r\n                    lastBlobMap.set(id, base64);\r\n                    return worker.postMessage({ id });\r\n                }\r\n                if (lastBlobMap.get(id) === base64)\r\n                    return worker.postMessage({ id });\r\n                worker.postMessage({\r\n                    id,\r\n                    type,\r\n                    base64,\r\n                    width,\r\n                    height,\r\n                });\r\n                lastBlobMap.set(id, base64);\r\n            }\r\n            else {\r\n                return worker.postMessage({ id: e.data.id });\r\n            }\r\n        });\r\n    };\n\n})();\n}, null);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n", "import { __rest, __awaiter } from './../../../../../../ext/tslib/tslib.es6.js';\nimport { isBlocked } from '../../../utils.js';\nimport { CanvasContext } from '../../../../../types/dist/types.js';\nimport initCanvas2DMutationObserver from './2d.js';\nimport initCanvasContextObserver from './canvas.js';\nimport initCanvasWebGLMutationObserver from './webgl.js';\nimport WorkerFactory from '../../../../../../_virtual/image-bitmap-data-url-worker.js';\n\nclass CanvasManager {\r\n    reset() {\r\n        this.pendingCanvasMutations.clear();\r\n        this.resetObservers && this.resetObservers();\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n    }\r\n    constructor(options) {\r\n        this.pendingCanvasMutations = new Map();\r\n        this.rafStamps = { latestId: 0, invokeId: null };\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.processMutation = (target, mutation) => {\r\n            const newFrame = this.rafStamps.invokeId &&\r\n                this.rafStamps.latestId !== this.rafStamps.invokeId;\r\n            if (newFrame || !this.rafStamps.invokeId)\r\n                this.rafStamps.invokeId = this.rafStamps.latestId;\r\n            if (!this.pendingCanvasMutations.has(target)) {\r\n                this.pendingCanvasMutations.set(target, []);\r\n            }\r\n            this.pendingCanvasMutations.get(target).push(mutation);\r\n        };\r\n        const { sampling = 'all', win, blockClass, blockSelector, recordCanvas, dataURLOptions, } = options;\r\n        this.mutationCb = options.mutationCb;\r\n        this.mirror = options.mirror;\r\n        if (recordCanvas && sampling === 'all')\r\n            this.initCanvasMutationObserver(win, blockClass, blockSelector);\r\n        if (recordCanvas && typeof sampling === 'number')\r\n            this.initCanvasFPSObserver(sampling, win, blockClass, blockSelector, {\r\n                dataURLOptions,\r\n            });\r\n    }\r\n    initCanvasFPSObserver(fps, win, blockClass, blockSelector, options) {\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector, true);\r\n        const snapshotInProgressMap = new Map();\r\n        const worker = new WorkerFactory();\r\n        worker.onmessage = (e) => {\r\n            const { id } = e.data;\r\n            snapshotInProgressMap.set(id, false);\r\n            if (!('base64' in e.data))\r\n                return;\r\n            const { base64, type, width, height } = e.data;\r\n            this.mutationCb({\r\n                id,\r\n                type: CanvasContext['2D'],\r\n                commands: [\r\n                    {\r\n                        property: 'clearRect',\r\n                        args: [0, 0, width, height],\r\n                    },\r\n                    {\r\n                        property: 'drawImage',\r\n                        args: [\r\n                            {\r\n                                rr_type: 'ImageBitmap',\r\n                                args: [\r\n                                    {\r\n                                        rr_type: 'Blob',\r\n                                        data: [{ rr_type: 'ArrayBuffer', base64 }],\r\n                                        type,\r\n                                    },\r\n                                ],\r\n                            },\r\n                            0,\r\n                            0,\r\n                        ],\r\n                    },\r\n                ],\r\n            });\r\n        };\r\n        const timeBetweenSnapshots = 1000 / fps;\r\n        let lastSnapshotTime = 0;\r\n        let rafId;\r\n        const getCanvas = () => {\r\n            const matchedCanvas = [];\r\n            win.document.querySelectorAll('canvas').forEach((canvas) => {\r\n                if (!isBlocked(canvas, blockClass, blockSelector, true)) {\r\n                    matchedCanvas.push(canvas);\r\n                }\r\n            });\r\n            return matchedCanvas;\r\n        };\r\n        const takeCanvasSnapshots = (timestamp) => {\r\n            if (lastSnapshotTime &&\r\n                timestamp - lastSnapshotTime < timeBetweenSnapshots) {\r\n                rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n                return;\r\n            }\r\n            lastSnapshotTime = timestamp;\r\n            getCanvas()\r\n                .forEach((canvas) => __awaiter(this, void 0, void 0, function* () {\r\n                var _a;\r\n                const id = this.mirror.getId(canvas);\r\n                if (snapshotInProgressMap.get(id))\r\n                    return;\r\n                if (canvas.width === 0 || canvas.height === 0)\r\n                    return;\r\n                snapshotInProgressMap.set(id, true);\r\n                if (['webgl', 'webgl2'].includes(canvas.__context)) {\r\n                    const context = canvas.getContext(canvas.__context);\r\n                    if (((_a = context === null || context === void 0 ? void 0 : context.getContextAttributes()) === null || _a === void 0 ? void 0 : _a.preserveDrawingBuffer) === false) {\r\n                        context.clear(context.COLOR_BUFFER_BIT);\r\n                    }\r\n                }\r\n                const bitmap = yield createImageBitmap(canvas);\r\n                worker.postMessage({\r\n                    id,\r\n                    bitmap,\r\n                    width: canvas.width,\r\n                    height: canvas.height,\r\n                    dataURLOptions: options.dataURLOptions,\r\n                }, [bitmap]);\r\n            }));\r\n            rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        };\r\n        rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            cancelAnimationFrame(rafId);\r\n        };\r\n    }\r\n    initCanvasMutationObserver(win, blockClass, blockSelector) {\r\n        this.startRAFTimestamping();\r\n        this.startPendingCanvasMutationFlusher();\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector, false);\r\n        const canvas2DReset = initCanvas2DMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector);\r\n        const canvasWebGL1and2Reset = initCanvasWebGLMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector, this.mirror);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            canvas2DReset();\r\n            canvasWebGL1and2Reset();\r\n        };\r\n    }\r\n    startPendingCanvasMutationFlusher() {\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    startRAFTimestamping() {\r\n        const setLatestRAFTimestamp = (timestamp) => {\r\n            this.rafStamps.latestId = timestamp;\r\n            requestAnimationFrame(setLatestRAFTimestamp);\r\n        };\r\n        requestAnimationFrame(setLatestRAFTimestamp);\r\n    }\r\n    flushPendingCanvasMutations() {\r\n        this.pendingCanvasMutations.forEach((values, canvas) => {\r\n            const id = this.mirror.getId(canvas);\r\n            this.flushPendingCanvasMutationFor(canvas, id);\r\n        });\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    flushPendingCanvasMutationFor(canvas, id) {\r\n        if (this.frozen || this.locked) {\r\n            return;\r\n        }\r\n        const valuesWithType = this.pendingCanvasMutations.get(canvas);\r\n        if (!valuesWithType || id === -1)\r\n            return;\r\n        const values = valuesWithType.map((value) => {\r\n            const rest = __rest(value, [\"type\"]);\r\n            return rest;\r\n        });\r\n        const { type } = valuesWithType[0];\r\n        this.mutationCb({ id, type, commands: values });\r\n        this.pendingCanvasMutations.delete(canvas);\r\n    }\r\n}\n\nexport { CanvasManager };\n", "import { stringifyRule } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { StyleSheetMirror } from '../utils.js';\n\nclass StylesheetManager {\r\n    constructor(options) {\r\n        this.trackedLinkElements = new WeakSet();\r\n        this.styleMirror = new StyleSheetMirror();\r\n        this.mutationCb = options.mutationCb;\r\n        this.adoptedStyleSheetCb = options.adoptedStyleSheetCb;\r\n    }\r\n    attachLinkElement(linkEl, childSn) {\r\n        if ('_cssText' in childSn.attributes)\r\n            this.mutationCb({\r\n                adds: [],\r\n                removes: [],\r\n                texts: [],\r\n                attributes: [\r\n                    {\r\n                        id: childSn.id,\r\n                        attributes: childSn\r\n                            .attributes,\r\n                    },\r\n                ],\r\n            });\r\n        this.trackLinkElement(linkEl);\r\n    }\r\n    trackLinkElement(linkEl) {\r\n        if (this.trackedLinkElements.has(linkEl))\r\n            return;\r\n        this.trackedLinkElements.add(linkEl);\r\n        this.trackStylesheetInLinkElement(linkEl);\r\n    }\r\n    adoptStyleSheets(sheets, hostId) {\r\n        if (sheets.length === 0)\r\n            return;\r\n        const adoptedStyleSheetData = {\r\n            id: hostId,\r\n            styleIds: [],\r\n        };\r\n        const styles = [];\r\n        for (const sheet of sheets) {\r\n            let styleId;\r\n            if (!this.styleMirror.has(sheet)) {\r\n                styleId = this.styleMirror.add(sheet);\r\n                styles.push({\r\n                    styleId,\r\n                    rules: Array.from(sheet.rules || CSSRule, (r, index) => ({\r\n                        rule: stringifyRule(r),\r\n                        index,\r\n                    })),\r\n                });\r\n            }\r\n            else\r\n                styleId = this.styleMirror.getId(sheet);\r\n            adoptedStyleSheetData.styleIds.push(styleId);\r\n        }\r\n        if (styles.length > 0)\r\n            adoptedStyleSheetData.styles = styles;\r\n        this.adoptedStyleSheetCb(adoptedStyleSheetData);\r\n    }\r\n    reset() {\r\n        this.styleMirror.reset();\r\n        this.trackedLinkElements = new WeakSet();\r\n    }\r\n    trackStylesheetInLinkElement(linkEl) {\r\n    }\r\n}\n\nexport { StylesheetManager };\n", "class ProcessedNodeManager {\r\n    constructor() {\r\n        this.nodeMap = new WeakMap();\r\n        this.loop = true;\r\n        this.periodicallyClear();\r\n    }\r\n    periodicallyClear() {\r\n        requestAnimationFrame(() => {\r\n            this.clear();\r\n            if (this.loop)\r\n                this.periodicallyClear();\r\n        });\r\n    }\r\n    inOtherBuffer(node, thisBuffer) {\r\n        const buffers = this.nodeMap.get(node);\r\n        return (buffers && Array.from(buffers).some((buffer) => buffer !== thisBuffer));\r\n    }\r\n    add(node, buffer) {\r\n        this.nodeMap.set(node, (this.nodeMap.get(node) || new Set()).add(buffer));\r\n    }\r\n    clear() {\r\n        this.nodeMap = new WeakMap();\r\n    }\r\n    destroy() {\r\n        this.loop = false;\r\n    }\r\n}\n\nexport { ProcessedNodeManager as default };\n", "import { createMirror, snapshot } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { initObservers, mutationBuffers } from './observer.js';\nimport { polyfill, on, nowTimestamp, getWindowWidth, getWindowHeight, getWindowScroll, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\nimport { IframeManager } from './iframe-manager.js';\nimport { ShadowDomManager } from './shadow-dom-manager.js';\nimport { CanvasManager } from './observers/canvas/canvas-manager.js';\nimport { StylesheetManager } from './stylesheet-manager.js';\nimport ProcessedNodeManager from './processed-node-manager.js';\nimport { callbackWrapper, unregisterErrorHandler, registerErrorHandler } from './error-handler.js';\n\nvar _a;\r\nlet wrappedEmit;\r\nlet takeFullSnapshot;\r\nlet canvasManager;\r\nlet recording = false;\r\ntry {\r\n    if (Array.from([1], (x) => x * 2)[0] !== 2) {\r\n        const cleanFrame = document.createElement('iframe');\r\n        document.body.appendChild(cleanFrame);\r\n        Array.from = ((_a = cleanFrame.contentWindow) === null || _a === void 0 ? void 0 : _a.Array.from) || Array.from;\r\n        document.body.removeChild(cleanFrame);\r\n    }\r\n}\r\ncatch (err) {\r\n    console.debug('Unable to override Array.from', err);\r\n}\r\nconst mirror = createMirror();\r\nfunction record(options = {}) {\r\n    const { emit, checkoutEveryNms, checkoutEveryNth, blockClass = 'rr-block', blockSelector = null, ignoreClass = 'rr-ignore', ignoreSelector = null, maskTextClass = 'rr-mask', maskTextSelector = null, inlineStylesheet = true, maskAllInputs, maskInputOptions: _maskInputOptions, slimDOMOptions: _slimDOMOptions, maskInputFn, maskTextFn, hooks, packFn, sampling = {}, dataURLOptions = {}, mousemoveWait, recordDOM = true, recordCanvas = false, recordCrossOriginIframes = false, recordAfter = options.recordAfter === 'DOMContentLoaded'\r\n        ? options.recordAfter\r\n        : 'load', userTriggeredOnInput = false, collectFonts = false, inlineImages = false, plugins, keepIframeSrcFn = () => false, ignoreCSSAttributes = new Set([]), errorHandler, } = options;\r\n    registerErrorHandler(errorHandler);\r\n    const inEmittingFrame = recordCrossOriginIframes\r\n        ? window.parent === window\r\n        : true;\r\n    let passEmitsToParent = false;\r\n    if (!inEmittingFrame) {\r\n        try {\r\n            if (window.parent.document) {\r\n                passEmitsToParent = false;\r\n            }\r\n        }\r\n        catch (e) {\r\n            passEmitsToParent = true;\r\n        }\r\n    }\r\n    if (inEmittingFrame && !emit) {\r\n        throw new Error('emit function is required');\r\n    }\r\n    if (mousemoveWait !== undefined && sampling.mousemove === undefined) {\r\n        sampling.mousemove = mousemoveWait;\r\n    }\r\n    mirror.reset();\r\n    const maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true,\r\n        }\r\n        : _maskInputOptions !== undefined\r\n            ? _maskInputOptions\r\n            : { password: true };\r\n    const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === 'all'\r\n        ? {\r\n            script: true,\r\n            comment: true,\r\n            headFavicon: true,\r\n            headWhitespace: true,\r\n            headMetaSocial: true,\r\n            headMetaRobots: true,\r\n            headMetaHttpEquiv: true,\r\n            headMetaVerification: true,\r\n            headMetaAuthorship: _slimDOMOptions === 'all',\r\n            headMetaDescKeywords: _slimDOMOptions === 'all',\r\n        }\r\n        : _slimDOMOptions\r\n            ? _slimDOMOptions\r\n            : {};\r\n    polyfill();\r\n    let lastFullSnapshotEvent;\r\n    let incrementalSnapshotCount = 0;\r\n    const eventProcessor = (e) => {\r\n        for (const plugin of plugins || []) {\r\n            if (plugin.eventProcessor) {\r\n                e = plugin.eventProcessor(e);\r\n            }\r\n        }\r\n        if (packFn &&\r\n            !passEmitsToParent) {\r\n            e = packFn(e);\r\n        }\r\n        return e;\r\n    };\r\n    wrappedEmit = (r, isCheckout) => {\r\n        var _a;\r\n        const e = r;\r\n        e.timestamp = nowTimestamp();\r\n        if (((_a = mutationBuffers[0]) === null || _a === void 0 ? void 0 : _a.isFrozen()) &&\r\n            e.type !== EventType.FullSnapshot &&\r\n            !(e.type === EventType.IncrementalSnapshot &&\r\n                e.data.source === IncrementalSource.Mutation)) {\r\n            mutationBuffers.forEach((buf) => buf.unfreeze());\r\n        }\r\n        if (inEmittingFrame) {\r\n            emit === null || emit === void 0 ? void 0 : emit(eventProcessor(e), isCheckout);\r\n        }\r\n        else if (passEmitsToParent) {\r\n            const message = {\r\n                type: 'rrweb',\r\n                event: eventProcessor(e),\r\n                origin: window.location.origin,\r\n                isCheckout,\r\n            };\r\n            window.parent.postMessage(message, '*');\r\n        }\r\n        if (e.type === EventType.FullSnapshot) {\r\n            lastFullSnapshotEvent = e;\r\n            incrementalSnapshotCount = 0;\r\n        }\r\n        else if (e.type === EventType.IncrementalSnapshot) {\r\n            if (e.data.source === IncrementalSource.Mutation &&\r\n                e.data.isAttachIframe) {\r\n                return;\r\n            }\r\n            incrementalSnapshotCount++;\r\n            const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\r\n            const exceedTime = checkoutEveryNms &&\r\n                e.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\r\n            if (exceedCount || exceedTime) {\r\n                takeFullSnapshot(true);\r\n            }\r\n        }\r\n    };\r\n    const wrappedMutationEmit = (m) => {\r\n        wrappedEmit({\r\n            type: EventType.IncrementalSnapshot,\r\n            data: Object.assign({ source: IncrementalSource.Mutation }, m),\r\n        });\r\n    };\r\n    const wrappedScrollEmit = (p) => wrappedEmit({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.Scroll }, p),\r\n    });\r\n    const wrappedCanvasMutationEmit = (p) => wrappedEmit({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.CanvasMutation }, p),\r\n    });\r\n    const wrappedAdoptedStyleSheetEmit = (a) => wrappedEmit({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.AdoptedStyleSheet }, a),\r\n    });\r\n    const stylesheetManager = new StylesheetManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit,\r\n    });\r\n    const iframeManager = new IframeManager({\r\n        mirror,\r\n        mutationCb: wrappedMutationEmit,\r\n        stylesheetManager: stylesheetManager,\r\n        recordCrossOriginIframes,\r\n        wrappedEmit,\r\n    });\r\n    for (const plugin of plugins || []) {\r\n        if (plugin.getMirror)\r\n            plugin.getMirror({\r\n                nodeMirror: mirror,\r\n                crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,\r\n                crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror,\r\n            });\r\n    }\r\n    const processedNodeManager = new ProcessedNodeManager();\r\n    canvasManager = new CanvasManager({\r\n        recordCanvas,\r\n        mutationCb: wrappedCanvasMutationEmit,\r\n        win: window,\r\n        blockClass,\r\n        blockSelector,\r\n        mirror,\r\n        sampling: sampling.canvas,\r\n        dataURLOptions,\r\n    });\r\n    const shadowDomManager = new ShadowDomManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        scrollCb: wrappedScrollEmit,\r\n        bypassOptions: {\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskInputOptions,\r\n            dataURLOptions,\r\n            maskTextFn,\r\n            maskInputFn,\r\n            recordCanvas,\r\n            inlineImages,\r\n            sampling,\r\n            slimDOMOptions,\r\n            iframeManager,\r\n            stylesheetManager,\r\n            canvasManager,\r\n            keepIframeSrcFn,\r\n            processedNodeManager,\r\n        },\r\n        mirror,\r\n    });\r\n    takeFullSnapshot = (isCheckout = false) => {\r\n        if (!recordDOM) {\r\n            return;\r\n        }\r\n        wrappedEmit({\r\n            type: EventType.Meta,\r\n            data: {\r\n                href: window.location.href,\r\n                width: getWindowWidth(),\r\n                height: getWindowHeight(),\r\n            },\r\n        }, isCheckout);\r\n        stylesheetManager.reset();\r\n        shadowDomManager.init();\r\n        mutationBuffers.forEach((buf) => buf.lock());\r\n        const node = snapshot(document, {\r\n            mirror,\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskAllInputs: maskInputOptions,\r\n            maskTextFn,\r\n            slimDOM: slimDOMOptions,\r\n            dataURLOptions,\r\n            recordCanvas,\r\n            inlineImages,\r\n            onSerialize: (n) => {\r\n                if (isSerializedIframe(n, mirror)) {\r\n                    iframeManager.addIframe(n);\r\n                }\r\n                if (isSerializedStylesheet(n, mirror)) {\r\n                    stylesheetManager.trackLinkElement(n);\r\n                }\r\n                if (hasShadowRoot(n)) {\r\n                    shadowDomManager.addShadowRoot(n.shadowRoot, document);\r\n                }\r\n            },\r\n            onIframeLoad: (iframe, childSn) => {\r\n                iframeManager.attachIframe(iframe, childSn);\r\n                shadowDomManager.observeAttachShadow(iframe);\r\n            },\r\n            onStylesheetLoad: (linkEl, childSn) => {\r\n                stylesheetManager.attachLinkElement(linkEl, childSn);\r\n            },\r\n            keepIframeSrcFn,\r\n        });\r\n        if (!node) {\r\n            return console.warn('Failed to snapshot the document');\r\n        }\r\n        wrappedEmit({\r\n            type: EventType.FullSnapshot,\r\n            data: {\r\n                node,\r\n                initialOffset: getWindowScroll(window),\r\n            },\r\n        }, isCheckout);\r\n        mutationBuffers.forEach((buf) => buf.unlock());\r\n        if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0)\r\n            stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets, mirror.getId(document));\r\n    };\r\n    try {\r\n        const handlers = [];\r\n        const observe = (doc) => {\r\n            var _a;\r\n            return callbackWrapper(initObservers)({\r\n                mutationCb: wrappedMutationEmit,\r\n                mousemoveCb: (positions, source) => wrappedEmit({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source,\r\n                        positions,\r\n                    },\r\n                }),\r\n                mouseInteractionCb: (d) => wrappedEmit({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MouseInteraction }, d),\r\n                }),\r\n                scrollCb: wrappedScrollEmit,\r\n                viewportResizeCb: (d) => wrappedEmit({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.ViewportResize }, d),\r\n                }),\r\n                inputCb: (v) => wrappedEmit({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Input }, v),\r\n                }),\r\n                mediaInteractionCb: (p) => wrappedEmit({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MediaInteraction }, p),\r\n                }),\r\n                styleSheetRuleCb: (r) => wrappedEmit({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleSheetRule }, r),\r\n                }),\r\n                styleDeclarationCb: (r) => wrappedEmit({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleDeclaration }, r),\r\n                }),\r\n                canvasMutationCb: wrappedCanvasMutationEmit,\r\n                fontCb: (p) => wrappedEmit({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Font }, p),\r\n                }),\r\n                selectionCb: (p) => {\r\n                    wrappedEmit({\r\n                        type: EventType.IncrementalSnapshot,\r\n                        data: Object.assign({ source: IncrementalSource.Selection }, p),\r\n                    });\r\n                },\r\n                customElementCb: (c) => {\r\n                    wrappedEmit({\r\n                        type: EventType.IncrementalSnapshot,\r\n                        data: Object.assign({ source: IncrementalSource.CustomElement }, c),\r\n                    });\r\n                },\r\n                blockClass,\r\n                ignoreClass,\r\n                ignoreSelector,\r\n                maskTextClass,\r\n                maskTextSelector,\r\n                maskInputOptions,\r\n                inlineStylesheet,\r\n                sampling,\r\n                recordDOM,\r\n                recordCanvas,\r\n                inlineImages,\r\n                userTriggeredOnInput,\r\n                collectFonts,\r\n                doc,\r\n                maskInputFn,\r\n                maskTextFn,\r\n                keepIframeSrcFn,\r\n                blockSelector,\r\n                slimDOMOptions,\r\n                dataURLOptions,\r\n                mirror,\r\n                iframeManager,\r\n                stylesheetManager,\r\n                shadowDomManager,\r\n                processedNodeManager,\r\n                canvasManager,\r\n                ignoreCSSAttributes,\r\n                plugins: ((_a = plugins === null || plugins === void 0 ? void 0 : plugins.filter((p) => p.observer)) === null || _a === void 0 ? void 0 : _a.map((p) => ({\r\n                    observer: p.observer,\r\n                    options: p.options,\r\n                    callback: (payload) => wrappedEmit({\r\n                        type: EventType.Plugin,\r\n                        data: {\r\n                            plugin: p.name,\r\n                            payload,\r\n                        },\r\n                    }),\r\n                }))) || [],\r\n            }, hooks);\r\n        };\r\n        iframeManager.addLoadListener((iframeEl) => {\r\n            try {\r\n                handlers.push(observe(iframeEl.contentDocument));\r\n            }\r\n            catch (error) {\r\n                console.warn(error);\r\n            }\r\n        });\r\n        const init = () => {\r\n            takeFullSnapshot();\r\n            handlers.push(observe(document));\r\n            recording = true;\r\n        };\r\n        if (document.readyState === 'interactive' ||\r\n            document.readyState === 'complete') {\r\n            init();\r\n        }\r\n        else {\r\n            handlers.push(on('DOMContentLoaded', () => {\r\n                wrappedEmit({\r\n                    type: EventType.DomContentLoaded,\r\n                    data: {},\r\n                });\r\n                if (recordAfter === 'DOMContentLoaded')\r\n                    init();\r\n            }));\r\n            handlers.push(on('load', () => {\r\n                wrappedEmit({\r\n                    type: EventType.Load,\r\n                    data: {},\r\n                });\r\n                if (recordAfter === 'load')\r\n                    init();\r\n            }, window));\r\n        }\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n            processedNodeManager.destroy();\r\n            recording = false;\r\n            unregisterErrorHandler();\r\n        };\r\n    }\r\n    catch (error) {\r\n        console.warn(error);\r\n    }\r\n}\r\nrecord.addCustomEvent = (tag, payload) => {\r\n    if (!recording) {\r\n        throw new Error('please add custom event after start recording');\r\n    }\r\n    wrappedEmit({\r\n        type: EventType.Custom,\r\n        data: {\r\n            tag,\r\n            payload,\r\n        },\r\n    });\r\n};\r\nrecord.freezePage = () => {\r\n    mutationBuffers.forEach((buf) => buf.freeze());\r\n};\r\nrecord.takeFullSnapshot = (isCheckout) => {\r\n    if (!recording) {\r\n        throw new Error('please take full snapshot after start recording');\r\n    }\r\n    takeFullSnapshot(isCheckout);\r\n};\r\nrecord.mirror = mirror;\n\nexport { record as default };\n", "var NodeType$1;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType$1 || (NodeType$1 = {}));\nclass Mirror$1 {\r\n    constructor() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    getId(n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        const id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    }\r\n    getNode(id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    }\r\n    getIds() {\r\n        return Array.from(this.idNodeMap.keys());\r\n    }\r\n    getMeta(n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    }\r\n    removeNodeFromMap(n) {\r\n        const id = this.getId(n);\r\n        this.idNodeMap.delete(id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach((childNode) => this.removeNodeFromMap(childNode));\r\n        }\r\n    }\r\n    has(id) {\r\n        return this.idNodeMap.has(id);\r\n    }\r\n    hasNode(node) {\r\n        return this.nodeMetaMap.has(node);\r\n    }\r\n    add(n, meta) {\r\n        const id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    }\r\n    replace(id, n) {\r\n        const oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            const meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    }\r\n    reset() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n}\r\nfunction createMirror$1() {\r\n    return new Mirror$1();\r\n}\n\nfunction parseCSSText(cssText) {\r\n    const res = {};\r\n    const listDelimiter = /;(?![^(]*\\))/g;\r\n    const propertyDelimiter = /:(.+)/;\r\n    const comment = /\\/\\*.*?\\*\\//g;\r\n    cssText\r\n        .replace(comment, '')\r\n        .split(listDelimiter)\r\n        .forEach(function (item) {\r\n        if (item) {\r\n            const tmp = item.split(propertyDelimiter);\r\n            tmp.length > 1 && (res[camelize(tmp[0].trim())] = tmp[1].trim());\r\n        }\r\n    });\r\n    return res;\r\n}\r\nfunction toCSSText(style) {\r\n    const properties = [];\r\n    for (const name in style) {\r\n        const value = style[name];\r\n        if (typeof value !== 'string')\r\n            continue;\r\n        const normalizedName = hyphenate(name);\r\n        properties.push(`${normalizedName}: ${value};`);\r\n    }\r\n    return properties.join(' ');\r\n}\r\nconst camelizeRE = /-([a-z])/g;\r\nconst CUSTOM_PROPERTY_REGEX = /^--[a-zA-Z0-9-]+$/;\r\nconst camelize = (str) => {\r\n    if (CUSTOM_PROPERTY_REGEX.test(str))\r\n        return str;\r\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\r\n};\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\nconst hyphenate = (str) => {\r\n    return str.replace(hyphenateRE, '-$1').toLowerCase();\r\n};\n\nclass BaseRRNode {\r\n    constructor(..._args) {\r\n        this.parentElement = null;\r\n        this.parentNode = null;\r\n        this.firstChild = null;\r\n        this.lastChild = null;\r\n        this.previousSibling = null;\r\n        this.nextSibling = null;\r\n        this.ELEMENT_NODE = NodeType.ELEMENT_NODE;\r\n        this.TEXT_NODE = NodeType.TEXT_NODE;\r\n    }\r\n    get childNodes() {\r\n        const childNodes = [];\r\n        let childIterator = this.firstChild;\r\n        while (childIterator) {\r\n            childNodes.push(childIterator);\r\n            childIterator = childIterator.nextSibling;\r\n        }\r\n        return childNodes;\r\n    }\r\n    contains(node) {\r\n        if (!(node instanceof BaseRRNode))\r\n            return false;\r\n        else if (node.ownerDocument !== this.ownerDocument)\r\n            return false;\r\n        else if (node === this)\r\n            return true;\r\n        while (node.parentNode) {\r\n            if (node.parentNode === this)\r\n                return true;\r\n            node = node.parentNode;\r\n        }\r\n        return false;\r\n    }\r\n    appendChild(_newChild) {\r\n        throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    insertBefore(_newChild, _refChild) {\r\n        throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    removeChild(_node) {\r\n        throw new Error(`RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    toString() {\r\n        return 'RRNode';\r\n    }\r\n}\r\nfunction BaseRRDocumentImpl(RRNodeClass) {\r\n    return class BaseRRDocument extends RRNodeClass {\r\n        constructor(...args) {\r\n            super(args);\r\n            this.nodeType = NodeType.DOCUMENT_NODE;\r\n            this.nodeName = '#document';\r\n            this.compatMode = 'CSS1Compat';\r\n            this.RRNodeType = NodeType$1.Document;\r\n            this.textContent = null;\r\n            this.ownerDocument = this;\r\n        }\r\n        get documentElement() {\r\n            return (this.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'HTML') || null);\r\n        }\r\n        get body() {\r\n            var _a;\r\n            return (((_a = this.documentElement) === null || _a === void 0 ? void 0 : _a.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'BODY')) || null);\r\n        }\r\n        get head() {\r\n            var _a;\r\n            return (((_a = this.documentElement) === null || _a === void 0 ? void 0 : _a.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'HEAD')) || null);\r\n        }\r\n        get implementation() {\r\n            return this;\r\n        }\r\n        get firstElementChild() {\r\n            return this.documentElement;\r\n        }\r\n        appendChild(newChild) {\r\n            const nodeType = newChild.RRNodeType;\r\n            if (nodeType === NodeType$1.Element ||\r\n                nodeType === NodeType$1.DocumentType) {\r\n                if (this.childNodes.some((s) => s.RRNodeType === nodeType)) {\r\n                    throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${nodeType === NodeType$1.Element ? 'RRElement' : 'RRDoctype'} on RRDocument allowed.`);\r\n                }\r\n            }\r\n            const child = appendChild(this, newChild);\r\n            child.parentElement = null;\r\n            return child;\r\n        }\r\n        insertBefore(newChild, refChild) {\r\n            const nodeType = newChild.RRNodeType;\r\n            if (nodeType === NodeType$1.Element ||\r\n                nodeType === NodeType$1.DocumentType) {\r\n                if (this.childNodes.some((s) => s.RRNodeType === nodeType)) {\r\n                    throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${nodeType === NodeType$1.Element ? 'RRElement' : 'RRDoctype'} on RRDocument allowed.`);\r\n                }\r\n            }\r\n            const child = insertBefore(this, newChild, refChild);\r\n            child.parentElement = null;\r\n            return child;\r\n        }\r\n        removeChild(node) {\r\n            return removeChild(this, node);\r\n        }\r\n        open() {\r\n            this.firstChild = null;\r\n            this.lastChild = null;\r\n        }\r\n        close() {\r\n        }\r\n        write(content) {\r\n            let publicId;\r\n            if (content ===\r\n                '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">')\r\n                publicId = '-//W3C//DTD XHTML 1.0 Transitional//EN';\r\n            else if (content ===\r\n                '<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">')\r\n                publicId = '-//W3C//DTD HTML 4.0 Transitional//EN';\r\n            if (publicId) {\r\n                const doctype = this.createDocumentType('html', publicId, '');\r\n                this.open();\r\n                this.appendChild(doctype);\r\n            }\r\n        }\r\n        createDocument(_namespace, _qualifiedName, _doctype) {\r\n            return new BaseRRDocument();\r\n        }\r\n        createDocumentType(qualifiedName, publicId, systemId) {\r\n            const doctype = new (BaseRRDocumentTypeImpl(BaseRRNode))(qualifiedName, publicId, systemId);\r\n            doctype.ownerDocument = this;\r\n            return doctype;\r\n        }\r\n        createElement(tagName) {\r\n            const element = new (BaseRRElementImpl(BaseRRNode))(tagName);\r\n            element.ownerDocument = this;\r\n            return element;\r\n        }\r\n        createElementNS(_namespaceURI, qualifiedName) {\r\n            return this.createElement(qualifiedName);\r\n        }\r\n        createTextNode(data) {\r\n            const text = new (BaseRRTextImpl(BaseRRNode))(data);\r\n            text.ownerDocument = this;\r\n            return text;\r\n        }\r\n        createComment(data) {\r\n            const comment = new (BaseRRCommentImpl(BaseRRNode))(data);\r\n            comment.ownerDocument = this;\r\n            return comment;\r\n        }\r\n        createCDATASection(data) {\r\n            const CDATASection = new (BaseRRCDATASectionImpl(BaseRRNode))(data);\r\n            CDATASection.ownerDocument = this;\r\n            return CDATASection;\r\n        }\r\n        toString() {\r\n            return 'RRDocument';\r\n        }\r\n    };\r\n}\r\nfunction BaseRRDocumentTypeImpl(RRNodeClass) {\r\n    return class BaseRRDocumentType extends RRNodeClass {\r\n        constructor(qualifiedName, publicId, systemId) {\r\n            super();\r\n            this.nodeType = NodeType.DOCUMENT_TYPE_NODE;\r\n            this.RRNodeType = NodeType$1.DocumentType;\r\n            this.name = qualifiedName;\r\n            this.publicId = publicId;\r\n            this.systemId = systemId;\r\n            this.nodeName = qualifiedName;\r\n            this.textContent = null;\r\n        }\r\n        toString() {\r\n            return 'RRDocumentType';\r\n        }\r\n    };\r\n}\r\nfunction BaseRRElementImpl(RRNodeClass) {\r\n    return class BaseRRElement extends RRNodeClass {\r\n        constructor(tagName) {\r\n            super();\r\n            this.nodeType = NodeType.ELEMENT_NODE;\r\n            this.RRNodeType = NodeType$1.Element;\r\n            this.attributes = {};\r\n            this.shadowRoot = null;\r\n            this.tagName = tagName.toUpperCase();\r\n            this.nodeName = tagName.toUpperCase();\r\n        }\r\n        get textContent() {\r\n            let result = '';\r\n            this.childNodes.forEach((node) => (result += node.textContent));\r\n            return result;\r\n        }\r\n        set textContent(textContent) {\r\n            this.firstChild = null;\r\n            this.lastChild = null;\r\n            this.appendChild(this.ownerDocument.createTextNode(textContent));\r\n        }\r\n        get classList() {\r\n            return new ClassList(this.attributes.class, (newClassName) => {\r\n                this.attributes.class = newClassName;\r\n            });\r\n        }\r\n        get id() {\r\n            return this.attributes.id || '';\r\n        }\r\n        get className() {\r\n            return this.attributes.class || '';\r\n        }\r\n        get style() {\r\n            const style = (this.attributes.style ? parseCSSText(this.attributes.style) : {});\r\n            const hyphenateRE = /\\B([A-Z])/g;\r\n            style.setProperty = (name, value, priority) => {\r\n                if (hyphenateRE.test(name))\r\n                    return;\r\n                const normalizedName = camelize(name);\r\n                if (!value)\r\n                    delete style[normalizedName];\r\n                else\r\n                    style[normalizedName] = value;\r\n                if (priority === 'important')\r\n                    style[normalizedName] += ' !important';\r\n                this.attributes.style = toCSSText(style);\r\n            };\r\n            style.removeProperty = (name) => {\r\n                if (hyphenateRE.test(name))\r\n                    return '';\r\n                const normalizedName = camelize(name);\r\n                const value = style[normalizedName] || '';\r\n                delete style[normalizedName];\r\n                this.attributes.style = toCSSText(style);\r\n                return value;\r\n            };\r\n            return style;\r\n        }\r\n        getAttribute(name) {\r\n            return this.attributes[name] || null;\r\n        }\r\n        setAttribute(name, attribute) {\r\n            this.attributes[name] = attribute;\r\n        }\r\n        setAttributeNS(_namespace, qualifiedName, value) {\r\n            this.setAttribute(qualifiedName, value);\r\n        }\r\n        removeAttribute(name) {\r\n            delete this.attributes[name];\r\n        }\r\n        appendChild(newChild) {\r\n            return appendChild(this, newChild);\r\n        }\r\n        insertBefore(newChild, refChild) {\r\n            return insertBefore(this, newChild, refChild);\r\n        }\r\n        removeChild(node) {\r\n            return removeChild(this, node);\r\n        }\r\n        attachShadow(_init) {\r\n            const shadowRoot = this.ownerDocument.createElement('SHADOWROOT');\r\n            this.shadowRoot = shadowRoot;\r\n            return shadowRoot;\r\n        }\r\n        dispatchEvent(_event) {\r\n            return true;\r\n        }\r\n        toString() {\r\n            let attributeString = '';\r\n            for (const attribute in this.attributes) {\r\n                attributeString += `${attribute}=\"${this.attributes[attribute]}\" `;\r\n            }\r\n            return `${this.tagName} ${attributeString}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRMediaElementImpl(RRElementClass) {\r\n    return class BaseRRMediaElement extends RRElementClass {\r\n        attachShadow(_init) {\r\n            throw new Error(`RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow`);\r\n        }\r\n        play() {\r\n            this.paused = false;\r\n        }\r\n        pause() {\r\n            this.paused = true;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRTextImpl(RRNodeClass) {\r\n    return class BaseRRText extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeType = NodeType.TEXT_NODE;\r\n            this.nodeName = '#text';\r\n            this.RRNodeType = NodeType$1.Text;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRText text=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRCommentImpl(RRNodeClass) {\r\n    return class BaseRRComment extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeType = NodeType.COMMENT_NODE;\r\n            this.nodeName = '#comment';\r\n            this.RRNodeType = NodeType$1.Comment;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRComment text=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRCDATASectionImpl(RRNodeClass) {\r\n    return class BaseRRCDATASection extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeName = '#cdata-section';\r\n            this.nodeType = NodeType.CDATA_SECTION_NODE;\r\n            this.RRNodeType = NodeType$1.CDATA;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRCDATASection data=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nclass ClassList {\r\n    constructor(classText, onChange) {\r\n        this.classes = [];\r\n        this.add = (...classNames) => {\r\n            for (const item of classNames) {\r\n                const className = String(item);\r\n                if (this.classes.indexOf(className) >= 0)\r\n                    continue;\r\n                this.classes.push(className);\r\n            }\r\n            this.onChange && this.onChange(this.classes.join(' '));\r\n        };\r\n        this.remove = (...classNames) => {\r\n            this.classes = this.classes.filter((item) => classNames.indexOf(item) === -1);\r\n            this.onChange && this.onChange(this.classes.join(' '));\r\n        };\r\n        if (classText) {\r\n            const classes = classText.trim().split(/\\s+/);\r\n            this.classes.push(...classes);\r\n        }\r\n        this.onChange = onChange;\r\n    }\r\n}\r\nfunction appendChild(parent, newChild) {\r\n    if (newChild.parentNode)\r\n        newChild.parentNode.removeChild(newChild);\r\n    if (parent.lastChild) {\r\n        parent.lastChild.nextSibling = newChild;\r\n        newChild.previousSibling = parent.lastChild;\r\n    }\r\n    else {\r\n        parent.firstChild = newChild;\r\n        newChild.previousSibling = null;\r\n    }\r\n    parent.lastChild = newChild;\r\n    newChild.nextSibling = null;\r\n    newChild.parentNode = parent;\r\n    newChild.parentElement = parent;\r\n    newChild.ownerDocument = parent.ownerDocument;\r\n    return newChild;\r\n}\r\nfunction insertBefore(parent, newChild, refChild) {\r\n    if (!refChild)\r\n        return appendChild(parent, newChild);\r\n    if (refChild.parentNode !== parent)\r\n        throw new Error(\"Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.\");\r\n    if (newChild === refChild)\r\n        return newChild;\r\n    if (newChild.parentNode)\r\n        newChild.parentNode.removeChild(newChild);\r\n    newChild.previousSibling = refChild.previousSibling;\r\n    refChild.previousSibling = newChild;\r\n    newChild.nextSibling = refChild;\r\n    if (newChild.previousSibling)\r\n        newChild.previousSibling.nextSibling = newChild;\r\n    else\r\n        parent.firstChild = newChild;\r\n    newChild.parentElement = parent;\r\n    newChild.parentNode = parent;\r\n    newChild.ownerDocument = parent.ownerDocument;\r\n    return newChild;\r\n}\r\nfunction removeChild(parent, child) {\r\n    if (child.parentNode !== parent)\r\n        throw new Error(\"Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.\");\r\n    if (child.previousSibling)\r\n        child.previousSibling.nextSibling = child.nextSibling;\r\n    else\r\n        parent.firstChild = child.nextSibling;\r\n    if (child.nextSibling)\r\n        child.nextSibling.previousSibling = child.previousSibling;\r\n    else\r\n        parent.lastChild = child.previousSibling;\r\n    child.previousSibling = null;\r\n    child.nextSibling = null;\r\n    child.parentElement = null;\r\n    child.parentNode = null;\r\n    return child;\r\n}\r\nvar NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"PLACEHOLDER\"] = 0] = \"PLACEHOLDER\";\r\n    NodeType[NodeType[\"ELEMENT_NODE\"] = 1] = \"ELEMENT_NODE\";\r\n    NodeType[NodeType[\"ATTRIBUTE_NODE\"] = 2] = \"ATTRIBUTE_NODE\";\r\n    NodeType[NodeType[\"TEXT_NODE\"] = 3] = \"TEXT_NODE\";\r\n    NodeType[NodeType[\"CDATA_SECTION_NODE\"] = 4] = \"CDATA_SECTION_NODE\";\r\n    NodeType[NodeType[\"ENTITY_REFERENCE_NODE\"] = 5] = \"ENTITY_REFERENCE_NODE\";\r\n    NodeType[NodeType[\"ENTITY_NODE\"] = 6] = \"ENTITY_NODE\";\r\n    NodeType[NodeType[\"PROCESSING_INSTRUCTION_NODE\"] = 7] = \"PROCESSING_INSTRUCTION_NODE\";\r\n    NodeType[NodeType[\"COMMENT_NODE\"] = 8] = \"COMMENT_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_NODE\"] = 9] = \"DOCUMENT_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_TYPE_NODE\"] = 10] = \"DOCUMENT_TYPE_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_FRAGMENT_NODE\"] = 11] = \"DOCUMENT_FRAGMENT_NODE\";\r\n})(NodeType || (NodeType = {}));\n\nconst NAMESPACES = {\r\n    svg: 'http://www.w3.org/2000/svg',\r\n    'xlink:href': 'http://www.w3.org/1999/xlink',\r\n    xmlns: 'http://www.w3.org/2000/xmlns/',\r\n};\r\nconst SVGTagMap = {\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient',\r\n};\r\nlet createdNodeSet = null;\r\nfunction diff(oldTree, newTree, replayer, rrnodeMirror = newTree.mirror ||\r\n    newTree.ownerDocument.mirror) {\r\n    oldTree = diffBeforeUpdatingChildren(oldTree, newTree, replayer, rrnodeMirror);\r\n    diffChildren(oldTree, newTree, replayer, rrnodeMirror);\r\n    diffAfterUpdatingChildren(oldTree, newTree, replayer);\r\n}\r\nfunction diffBeforeUpdatingChildren(oldTree, newTree, replayer, rrnodeMirror) {\r\n    var _a;\r\n    if (replayer.afterAppend && !createdNodeSet) {\r\n        createdNodeSet = new WeakSet();\r\n        setTimeout(() => {\r\n            createdNodeSet = null;\r\n        }, 0);\r\n    }\r\n    if (!sameNodeType(oldTree, newTree)) {\r\n        const calibratedOldTree = createOrGetNode(newTree, replayer.mirror, rrnodeMirror);\r\n        (_a = oldTree.parentNode) === null || _a === void 0 ? void 0 : _a.replaceChild(calibratedOldTree, oldTree);\r\n        oldTree = calibratedOldTree;\r\n    }\r\n    switch (newTree.RRNodeType) {\r\n        case NodeType$1.Document: {\r\n            if (!nodeMatching(oldTree, newTree, replayer.mirror, rrnodeMirror)) {\r\n                const newMeta = rrnodeMirror.getMeta(newTree);\r\n                if (newMeta) {\r\n                    replayer.mirror.removeNodeFromMap(oldTree);\r\n                    oldTree.close();\r\n                    oldTree.open();\r\n                    replayer.mirror.add(oldTree, newMeta);\r\n                    createdNodeSet === null || createdNodeSet === void 0 ? void 0 : createdNodeSet.add(oldTree);\r\n                }\r\n            }\r\n            break;\r\n        }\r\n        case NodeType$1.Element: {\r\n            const oldElement = oldTree;\r\n            const newRRElement = newTree;\r\n            switch (newRRElement.tagName) {\r\n                case 'IFRAME': {\r\n                    const oldContentDocument = oldTree\r\n                        .contentDocument;\r\n                    if (!oldContentDocument)\r\n                        break;\r\n                    diff(oldContentDocument, newTree.contentDocument, replayer, rrnodeMirror);\r\n                    break;\r\n                }\r\n            }\r\n            if (newRRElement.shadowRoot) {\r\n                if (!oldElement.shadowRoot)\r\n                    oldElement.attachShadow({ mode: 'open' });\r\n                diffChildren(oldElement.shadowRoot, newRRElement.shadowRoot, replayer, rrnodeMirror);\r\n            }\r\n            diffProps(oldElement, newRRElement, rrnodeMirror);\r\n            break;\r\n        }\r\n    }\r\n    return oldTree;\r\n}\r\nfunction diffAfterUpdatingChildren(oldTree, newTree, replayer) {\r\n    var _a;\r\n    switch (newTree.RRNodeType) {\r\n        case NodeType$1.Document: {\r\n            const scrollData = newTree.scrollData;\r\n            scrollData && replayer.applyScroll(scrollData, true);\r\n            break;\r\n        }\r\n        case NodeType$1.Element: {\r\n            const oldElement = oldTree;\r\n            const newRRElement = newTree;\r\n            newRRElement.scrollData &&\r\n                replayer.applyScroll(newRRElement.scrollData, true);\r\n            newRRElement.inputData && replayer.applyInput(newRRElement.inputData);\r\n            switch (newRRElement.tagName) {\r\n                case 'AUDIO':\r\n                case 'VIDEO': {\r\n                    const oldMediaElement = oldTree;\r\n                    const newMediaRRElement = newRRElement;\r\n                    if (newMediaRRElement.paused !== undefined)\r\n                        newMediaRRElement.paused\r\n                            ? void oldMediaElement.pause()\r\n                            : void oldMediaElement.play();\r\n                    if (newMediaRRElement.muted !== undefined)\r\n                        oldMediaElement.muted = newMediaRRElement.muted;\r\n                    if (newMediaRRElement.volume !== undefined)\r\n                        oldMediaElement.volume = newMediaRRElement.volume;\r\n                    if (newMediaRRElement.currentTime !== undefined)\r\n                        oldMediaElement.currentTime = newMediaRRElement.currentTime;\r\n                    if (newMediaRRElement.playbackRate !== undefined)\r\n                        oldMediaElement.playbackRate = newMediaRRElement.playbackRate;\r\n                    if (newMediaRRElement.loop !== undefined)\r\n                        oldMediaElement.loop = newMediaRRElement.loop;\r\n                    break;\r\n                }\r\n                case 'CANVAS': {\r\n                    const rrCanvasElement = newTree;\r\n                    if (rrCanvasElement.rr_dataURL !== null) {\r\n                        const image = document.createElement('img');\r\n                        image.onload = () => {\r\n                            const ctx = oldElement.getContext('2d');\r\n                            if (ctx) {\r\n                                ctx.drawImage(image, 0, 0, image.width, image.height);\r\n                            }\r\n                        };\r\n                        image.src = rrCanvasElement.rr_dataURL;\r\n                    }\r\n                    rrCanvasElement.canvasMutations.forEach((canvasMutation) => replayer.applyCanvas(canvasMutation.event, canvasMutation.mutation, oldTree));\r\n                    break;\r\n                }\r\n                case 'STYLE': {\r\n                    const styleSheet = oldElement.sheet;\r\n                    styleSheet &&\r\n                        newTree.rules.forEach((data) => replayer.applyStyleSheetMutation(data, styleSheet));\r\n                    break;\r\n                }\r\n            }\r\n            break;\r\n        }\r\n        case NodeType$1.Text:\r\n        case NodeType$1.Comment:\r\n        case NodeType$1.CDATA: {\r\n            if (oldTree.textContent !==\r\n                newTree.data)\r\n                oldTree.textContent = newTree.data;\r\n            break;\r\n        }\r\n    }\r\n    if (createdNodeSet === null || createdNodeSet === void 0 ? void 0 : createdNodeSet.has(oldTree)) {\r\n        createdNodeSet.delete(oldTree);\r\n        (_a = replayer.afterAppend) === null || _a === void 0 ? void 0 : _a.call(replayer, oldTree, replayer.mirror.getId(oldTree));\r\n    }\r\n}\r\nfunction diffProps(oldTree, newTree, rrnodeMirror) {\r\n    const oldAttributes = oldTree.attributes;\r\n    const newAttributes = newTree.attributes;\r\n    for (const name in newAttributes) {\r\n        const newValue = newAttributes[name];\r\n        const sn = rrnodeMirror.getMeta(newTree);\r\n        if ((sn === null || sn === void 0 ? void 0 : sn.isSVG) && NAMESPACES[name])\r\n            oldTree.setAttributeNS(NAMESPACES[name], name, newValue);\r\n        else if (newTree.tagName === 'CANVAS' && name === 'rr_dataURL') {\r\n            const image = document.createElement('img');\r\n            image.src = newValue;\r\n            image.onload = () => {\r\n                const ctx = oldTree.getContext('2d');\r\n                if (ctx) {\r\n                    ctx.drawImage(image, 0, 0, image.width, image.height);\r\n                }\r\n            };\r\n        }\r\n        else if (newTree.tagName === 'IFRAME' && name === 'srcdoc')\r\n            continue;\r\n        else\r\n            oldTree.setAttribute(name, newValue);\r\n    }\r\n    for (const { name } of Array.from(oldAttributes))\r\n        if (!(name in newAttributes))\r\n            oldTree.removeAttribute(name);\r\n    newTree.scrollLeft && (oldTree.scrollLeft = newTree.scrollLeft);\r\n    newTree.scrollTop && (oldTree.scrollTop = newTree.scrollTop);\r\n}\r\nfunction diffChildren(oldTree, newTree, replayer, rrnodeMirror) {\r\n    const oldChildren = Array.from(oldTree.childNodes);\r\n    const newChildren = newTree.childNodes;\r\n    if (oldChildren.length === 0 && newChildren.length === 0)\r\n        return;\r\n    let oldStartIndex = 0, oldEndIndex = oldChildren.length - 1, newStartIndex = 0, newEndIndex = newChildren.length - 1;\r\n    let oldStartNode = oldChildren[oldStartIndex], oldEndNode = oldChildren[oldEndIndex], newStartNode = newChildren[newStartIndex], newEndNode = newChildren[newEndIndex];\r\n    let oldIdToIndex = undefined, indexInOld = undefined;\r\n    while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n        if (oldStartNode === undefined) {\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n        }\r\n        else if (oldEndNode === undefined) {\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n        }\r\n        else if (nodeMatching(oldStartNode, newStartNode, replayer.mirror, rrnodeMirror)) {\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n        else if (nodeMatching(oldEndNode, newEndNode, replayer.mirror, rrnodeMirror)) {\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n            newEndNode = newChildren[--newEndIndex];\r\n        }\r\n        else if (nodeMatching(oldStartNode, newEndNode, replayer.mirror, rrnodeMirror)) {\r\n            try {\r\n                oldTree.insertBefore(oldStartNode, oldEndNode.nextSibling);\r\n            }\r\n            catch (e) {\r\n                console.warn(e);\r\n            }\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n            newEndNode = newChildren[--newEndIndex];\r\n        }\r\n        else if (nodeMatching(oldEndNode, newStartNode, replayer.mirror, rrnodeMirror)) {\r\n            try {\r\n                oldTree.insertBefore(oldEndNode, oldStartNode);\r\n            }\r\n            catch (e) {\r\n                console.warn(e);\r\n            }\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n        else {\r\n            if (!oldIdToIndex) {\r\n                oldIdToIndex = {};\r\n                for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n                    const oldChild = oldChildren[i];\r\n                    if (oldChild && replayer.mirror.hasNode(oldChild))\r\n                        oldIdToIndex[replayer.mirror.getId(oldChild)] = i;\r\n                }\r\n            }\r\n            indexInOld = oldIdToIndex[rrnodeMirror.getId(newStartNode)];\r\n            const nodeToMove = oldChildren[indexInOld];\r\n            if (indexInOld !== undefined &&\r\n                nodeToMove &&\r\n                nodeMatching(nodeToMove, newStartNode, replayer.mirror, rrnodeMirror)) {\r\n                try {\r\n                    oldTree.insertBefore(nodeToMove, oldStartNode);\r\n                }\r\n                catch (e) {\r\n                    console.warn(e);\r\n                }\r\n                oldChildren[indexInOld] = undefined;\r\n            }\r\n            else {\r\n                const newNode = createOrGetNode(newStartNode, replayer.mirror, rrnodeMirror);\r\n                if (oldTree.nodeName === '#document' &&\r\n                    oldStartNode &&\r\n                    ((newNode.nodeType === newNode.DOCUMENT_TYPE_NODE &&\r\n                        oldStartNode.nodeType === oldStartNode.DOCUMENT_TYPE_NODE) ||\r\n                        (newNode.nodeType === newNode.ELEMENT_NODE &&\r\n                            oldStartNode.nodeType === oldStartNode.ELEMENT_NODE))) {\r\n                    oldTree.removeChild(oldStartNode);\r\n                    replayer.mirror.removeNodeFromMap(oldStartNode);\r\n                    oldStartNode = oldChildren[++oldStartIndex];\r\n                }\r\n                try {\r\n                    oldTree.insertBefore(newNode, oldStartNode || null);\r\n                }\r\n                catch (e) {\r\n                    console.warn(e);\r\n                }\r\n            }\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n    }\r\n    if (oldStartIndex > oldEndIndex) {\r\n        const referenceRRNode = newChildren[newEndIndex + 1];\r\n        let referenceNode = null;\r\n        if (referenceRRNode)\r\n            referenceNode = replayer.mirror.getNode(rrnodeMirror.getId(referenceRRNode));\r\n        for (; newStartIndex <= newEndIndex; ++newStartIndex) {\r\n            const newNode = createOrGetNode(newChildren[newStartIndex], replayer.mirror, rrnodeMirror);\r\n            try {\r\n                oldTree.insertBefore(newNode, referenceNode);\r\n            }\r\n            catch (e) {\r\n                console.warn(e);\r\n            }\r\n        }\r\n    }\r\n    else if (newStartIndex > newEndIndex) {\r\n        for (; oldStartIndex <= oldEndIndex; oldStartIndex++) {\r\n            const node = oldChildren[oldStartIndex];\r\n            if (!node || node.parentNode !== oldTree)\r\n                continue;\r\n            try {\r\n                oldTree.removeChild(node);\r\n                replayer.mirror.removeNodeFromMap(node);\r\n            }\r\n            catch (e) {\r\n                console.warn(e);\r\n            }\r\n        }\r\n    }\r\n    let oldChild = oldTree.firstChild;\r\n    let newChild = newTree.firstChild;\r\n    while (oldChild !== null && newChild !== null) {\r\n        diff(oldChild, newChild, replayer, rrnodeMirror);\r\n        oldChild = oldChild.nextSibling;\r\n        newChild = newChild.nextSibling;\r\n    }\r\n}\r\nfunction createOrGetNode(rrNode, domMirror, rrnodeMirror) {\r\n    const nodeId = rrnodeMirror.getId(rrNode);\r\n    const sn = rrnodeMirror.getMeta(rrNode);\r\n    let node = null;\r\n    if (nodeId > -1)\r\n        node = domMirror.getNode(nodeId);\r\n    if (node !== null && sameNodeType(node, rrNode))\r\n        return node;\r\n    switch (rrNode.RRNodeType) {\r\n        case NodeType$1.Document:\r\n            node = new Document();\r\n            break;\r\n        case NodeType$1.DocumentType:\r\n            node = document.implementation.createDocumentType(rrNode.name, rrNode.publicId, rrNode.systemId);\r\n            break;\r\n        case NodeType$1.Element: {\r\n            let tagName = rrNode.tagName.toLowerCase();\r\n            tagName = SVGTagMap[tagName] || tagName;\r\n            if (sn && 'isSVG' in sn && (sn === null || sn === void 0 ? void 0 : sn.isSVG)) {\r\n                node = document.createElementNS(NAMESPACES['svg'], tagName);\r\n            }\r\n            else\r\n                node = document.createElement(rrNode.tagName);\r\n            break;\r\n        }\r\n        case NodeType$1.Text:\r\n            node = document.createTextNode(rrNode.data);\r\n            break;\r\n        case NodeType$1.Comment:\r\n            node = document.createComment(rrNode.data);\r\n            break;\r\n        case NodeType$1.CDATA:\r\n            node = document.createCDATASection(rrNode.data);\r\n            break;\r\n    }\r\n    if (sn)\r\n        domMirror.add(node, Object.assign({}, sn));\r\n    try {\r\n        createdNodeSet === null || createdNodeSet === void 0 ? void 0 : createdNodeSet.add(node);\r\n    }\r\n    catch (e) {\r\n    }\r\n    return node;\r\n}\r\nfunction sameNodeType(node1, node2) {\r\n    if (node1.nodeType !== node2.nodeType)\r\n        return false;\r\n    return (node1.nodeType !== node1.ELEMENT_NODE ||\r\n        node1.tagName.toUpperCase() ===\r\n            node2.tagName);\r\n}\r\nfunction nodeMatching(node1, node2, domMirror, rrdomMirror) {\r\n    const node1Id = domMirror.getId(node1);\r\n    const node2Id = rrdomMirror.getId(node2);\r\n    if (node1Id === -1 || node1Id !== node2Id)\r\n        return false;\r\n    return sameNodeType(node1, node2);\r\n}\n\nclass RRDocument extends BaseRRDocumentImpl(BaseRRNode) {\r\n    get unserializedId() {\r\n        return this._unserializedId--;\r\n    }\r\n    constructor(mirror) {\r\n        super();\r\n        this.UNSERIALIZED_STARTING_ID = -2;\r\n        this._unserializedId = this.UNSERIALIZED_STARTING_ID;\r\n        this.mirror = createMirror();\r\n        this.scrollData = null;\r\n        if (mirror) {\r\n            this.mirror = mirror;\r\n        }\r\n    }\r\n    createDocument(_namespace, _qualifiedName, _doctype) {\r\n        return new RRDocument();\r\n    }\r\n    createDocumentType(qualifiedName, publicId, systemId) {\r\n        const documentTypeNode = new RRDocumentType(qualifiedName, publicId, systemId);\r\n        documentTypeNode.ownerDocument = this;\r\n        return documentTypeNode;\r\n    }\r\n    createElement(tagName) {\r\n        const upperTagName = tagName.toUpperCase();\r\n        let element;\r\n        switch (upperTagName) {\r\n            case 'AUDIO':\r\n            case 'VIDEO':\r\n                element = new RRMediaElement(upperTagName);\r\n                break;\r\n            case 'IFRAME':\r\n                element = new RRIFrameElement(upperTagName, this.mirror);\r\n                break;\r\n            case 'CANVAS':\r\n                element = new RRCanvasElement(upperTagName);\r\n                break;\r\n            case 'STYLE':\r\n                element = new RRStyleElement(upperTagName);\r\n                break;\r\n            default:\r\n                element = new RRElement(upperTagName);\r\n                break;\r\n        }\r\n        element.ownerDocument = this;\r\n        return element;\r\n    }\r\n    createComment(data) {\r\n        const commentNode = new RRComment(data);\r\n        commentNode.ownerDocument = this;\r\n        return commentNode;\r\n    }\r\n    createCDATASection(data) {\r\n        const sectionNode = new RRCDATASection(data);\r\n        sectionNode.ownerDocument = this;\r\n        return sectionNode;\r\n    }\r\n    createTextNode(data) {\r\n        const textNode = new RRText(data);\r\n        textNode.ownerDocument = this;\r\n        return textNode;\r\n    }\r\n    destroyTree() {\r\n        this.firstChild = null;\r\n        this.lastChild = null;\r\n        this.mirror.reset();\r\n    }\r\n    open() {\r\n        super.open();\r\n        this._unserializedId = this.UNSERIALIZED_STARTING_ID;\r\n    }\r\n}\r\nconst RRDocumentType = BaseRRDocumentTypeImpl(BaseRRNode);\r\nclass RRElement extends BaseRRElementImpl(BaseRRNode) {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.inputData = null;\r\n        this.scrollData = null;\r\n    }\r\n}\r\nclass RRMediaElement extends BaseRRMediaElementImpl(RRElement) {\r\n}\r\nclass RRCanvasElement extends RRElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.rr_dataURL = null;\r\n        this.canvasMutations = [];\r\n    }\r\n    getContext() {\r\n        return null;\r\n    }\r\n}\r\nclass RRStyleElement extends RRElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.rules = [];\r\n    }\r\n}\r\nclass RRIFrameElement extends RRElement {\r\n    constructor(upperTagName, mirror) {\r\n        super(upperTagName);\r\n        this.contentDocument = new RRDocument();\r\n        this.contentDocument.mirror = mirror;\r\n    }\r\n}\r\nconst RRText = BaseRRTextImpl(BaseRRNode);\r\nconst RRComment = BaseRRCommentImpl(BaseRRNode);\r\nconst RRCDATASection = BaseRRCDATASectionImpl(BaseRRNode);\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'FORM';\r\n    }\r\n    return element.tagName.toUpperCase();\r\n}\r\nfunction buildFromNode(node, rrdom, domMirror, parentRRNode) {\r\n    let rrNode;\r\n    switch (node.nodeType) {\r\n        case NodeType.DOCUMENT_NODE:\r\n            if (parentRRNode && parentRRNode.nodeName === 'IFRAME')\r\n                rrNode = parentRRNode.contentDocument;\r\n            else {\r\n                rrNode = rrdom;\r\n                rrNode.compatMode = node.compatMode;\r\n            }\r\n            break;\r\n        case NodeType.DOCUMENT_TYPE_NODE: {\r\n            const documentType = node;\r\n            rrNode = rrdom.createDocumentType(documentType.name, documentType.publicId, documentType.systemId);\r\n            break;\r\n        }\r\n        case NodeType.ELEMENT_NODE: {\r\n            const elementNode = node;\r\n            const tagName = getValidTagName(elementNode);\r\n            rrNode = rrdom.createElement(tagName);\r\n            const rrElement = rrNode;\r\n            for (const { name, value } of Array.from(elementNode.attributes)) {\r\n                rrElement.attributes[name] = value;\r\n            }\r\n            elementNode.scrollLeft && (rrElement.scrollLeft = elementNode.scrollLeft);\r\n            elementNode.scrollTop && (rrElement.scrollTop = elementNode.scrollTop);\r\n            break;\r\n        }\r\n        case NodeType.TEXT_NODE:\r\n            rrNode = rrdom.createTextNode(node.textContent || '');\r\n            break;\r\n        case NodeType.CDATA_SECTION_NODE:\r\n            rrNode = rrdom.createCDATASection(node.data);\r\n            break;\r\n        case NodeType.COMMENT_NODE:\r\n            rrNode = rrdom.createComment(node.textContent || '');\r\n            break;\r\n        case NodeType.DOCUMENT_FRAGMENT_NODE:\r\n            rrNode = parentRRNode.attachShadow({ mode: 'open' });\r\n            break;\r\n        default:\r\n            return null;\r\n    }\r\n    let sn = domMirror.getMeta(node);\r\n    if (rrdom instanceof RRDocument) {\r\n        if (!sn) {\r\n            sn = getDefaultSN(rrNode, rrdom.unserializedId);\r\n            domMirror.add(node, sn);\r\n        }\r\n        rrdom.mirror.add(rrNode, Object.assign({}, sn));\r\n    }\r\n    return rrNode;\r\n}\r\nfunction buildFromDom(dom, domMirror = createMirror$1(), rrdom = new RRDocument()) {\r\n    function walk(node, parentRRNode) {\r\n        const rrNode = buildFromNode(node, rrdom, domMirror, parentRRNode);\r\n        if (rrNode === null)\r\n            return;\r\n        if ((parentRRNode === null || parentRRNode === void 0 ? void 0 : parentRRNode.nodeName) !== 'IFRAME' &&\r\n            node.nodeType !== NodeType.DOCUMENT_FRAGMENT_NODE) {\r\n            parentRRNode === null || parentRRNode === void 0 ? void 0 : parentRRNode.appendChild(rrNode);\r\n            rrNode.parentNode = parentRRNode;\r\n            rrNode.parentElement = parentRRNode;\r\n        }\r\n        if (node.nodeName === 'IFRAME') {\r\n            const iframeDoc = node.contentDocument;\r\n            iframeDoc && walk(iframeDoc, rrNode);\r\n        }\r\n        else if (node.nodeType === NodeType.DOCUMENT_NODE ||\r\n            node.nodeType === NodeType.ELEMENT_NODE ||\r\n            node.nodeType === NodeType.DOCUMENT_FRAGMENT_NODE) {\r\n            if (node.nodeType === NodeType.ELEMENT_NODE &&\r\n                node.shadowRoot)\r\n                walk(node.shadowRoot, rrNode);\r\n            node.childNodes.forEach((childNode) => walk(childNode, rrNode));\r\n        }\r\n    }\r\n    walk(dom, null);\r\n    return rrdom;\r\n}\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nclass Mirror {\r\n    constructor() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    getId(n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        const id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    }\r\n    getNode(id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    }\r\n    getIds() {\r\n        return Array.from(this.idNodeMap.keys());\r\n    }\r\n    getMeta(n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    }\r\n    removeNodeFromMap(n) {\r\n        const id = this.getId(n);\r\n        this.idNodeMap.delete(id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach((childNode) => this.removeNodeFromMap(childNode));\r\n        }\r\n    }\r\n    has(id) {\r\n        return this.idNodeMap.has(id);\r\n    }\r\n    hasNode(node) {\r\n        return this.nodeMetaMap.has(node);\r\n    }\r\n    add(n, meta) {\r\n        const id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    }\r\n    replace(id, n) {\r\n        const oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            const meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    }\r\n    reset() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n}\r\nfunction getDefaultSN(node, id) {\r\n    switch (node.RRNodeType) {\r\n        case NodeType$1.Document:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                childNodes: [],\r\n            };\r\n        case NodeType$1.DocumentType: {\r\n            const doctype = node;\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                name: doctype.name,\r\n                publicId: doctype.publicId,\r\n                systemId: doctype.systemId,\r\n            };\r\n        }\r\n        case NodeType$1.Element:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                tagName: node.tagName.toLowerCase(),\r\n                attributes: {},\r\n                childNodes: [],\r\n            };\r\n        case NodeType$1.Text:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: node.textContent || '',\r\n            };\r\n        case NodeType$1.Comment:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: node.textContent || '',\r\n            };\r\n        case NodeType$1.CDATA:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: '',\r\n            };\r\n    }\r\n}\n\nexport { BaseRRCDATASectionImpl, BaseRRCommentImpl, BaseRRDocumentImpl, BaseRRDocumentTypeImpl, BaseRRElementImpl, BaseRRMediaElementImpl, BaseRRNode, BaseRRTextImpl, ClassList, Mirror, NodeType, RRCDATASection, RRCanvasElement, RRComment, RRDocument, RRDocumentType, RRElement, RRIFrameElement, RRMediaElement, BaseRRNode as RRNode, RRStyleElement, RRText, buildFromDom, buildFromNode, createMirror, createOrGetNode, diff, getDefaultSN };\n", "import record from './record/index.js';\nexport { default as record } from './record/index.js';\nimport '../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport '../../rrdom/es/rrdom.js';\nimport * as utils from './utils.js';\nexport { utils };\nexport { _mirror as mirror } from './utils.js';\nimport './../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst { addCustomEvent } = record;\r\nconst { freezePage } = record;\n\nexport { addCustomEvent, freezePage };\n", "// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nfunction zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nfunction strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nfunction strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n\nexport { strFromU8, strToU8, unzlibSync, zlibSync };\n", "const MARK = 'v1';\n\nexport { MARK };\n", "import { strFromU8, zlibSync, strToU8 } from './../../../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nconst pack = (event) => {\r\n    const _e = Object.assign(Object.assign({}, event), { v: MARK });\r\n    return strFromU8(zlibSync(strToU8(JSON.stringify(_e))), true);\r\n};\n\nexport { pack };\n", "import { strFromU8, unzlibSync, strToU8 } from './../../../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nconst unpack = (raw) => {\r\n    if (typeof raw !== 'string') {\r\n        return raw;\r\n    }\r\n    try {\r\n        const e = JSON.parse(raw);\r\n        if (e.timestamp) {\r\n            return e;\r\n        }\r\n    }\r\n    catch (error) {\r\n    }\r\n    try {\r\n        const e = JSON.parse(strFromU8(unzlibSync(strToU8(raw, true))));\r\n        if (e.v === MARK) {\r\n            return e;\r\n        }\r\n        throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer ${MARK}.`);\r\n    }\r\n    catch (error) {\r\n        console.error(error);\r\n        throw new Error('Unknown data format.');\r\n    }\r\n};\n\nexport { unpack };\n", "class StackFrame {\r\n    constructor(obj) {\r\n        this.fileName = obj.fileName || '';\r\n        this.functionName = obj.functionName || '';\r\n        this.lineNumber = obj.lineNumber;\r\n        this.columnNumber = obj.columnNumber;\r\n    }\r\n    toString() {\r\n        const lineNumber = this.lineNumber || '';\r\n        const columnNumber = this.columnNumber || '';\r\n        if (this.functionName)\r\n            return `${this.functionName} (${this.fileName}:${lineNumber}:${columnNumber})`;\r\n        return `${this.fileName}:${lineNumber}:${columnNumber}`;\r\n    }\r\n}\r\nconst FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\r\nconst CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\r\nconst SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\r\nconst ErrorStackParser = {\r\n    parse: function (error) {\r\n        if (!error) {\r\n            return [];\r\n        }\r\n        if (typeof error.stacktrace !== 'undefined' ||\r\n            typeof error['opera#sourceloc'] !== 'undefined') {\r\n            return this.parseOpera(error);\r\n        }\r\n        else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\r\n            return this.parseV8OrIE(error);\r\n        }\r\n        else if (error.stack) {\r\n            return this.parseFFOrSafari(error);\r\n        }\r\n        else {\r\n            console.warn('[console-record-plugin]: Failed to parse error object:', error);\r\n            return [];\r\n        }\r\n    },\r\n    extractLocation: function (urlLike) {\r\n        if (urlLike.indexOf(':') === -1) {\r\n            return [urlLike];\r\n        }\r\n        const regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\r\n        const parts = regExp.exec(urlLike.replace(/[()]/g, ''));\r\n        if (!parts)\r\n            throw new Error(`Cannot parse given url: ${urlLike}`);\r\n        return [parts[1], parts[2] || undefined, parts[3] || undefined];\r\n    },\r\n    parseV8OrIE: function (error) {\r\n        const filtered = error.stack.split('\\n').filter(function (line) {\r\n            return !!line.match(CHROME_IE_STACK_REGEXP);\r\n        }, this);\r\n        return filtered.map(function (line) {\r\n            if (line.indexOf('(eval ') > -1) {\r\n                line = line\r\n                    .replace(/eval code/g, 'eval')\r\n                    .replace(/(\\(eval at [^()]*)|(\\),.*$)/g, '');\r\n            }\r\n            let sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(');\r\n            const location = sanitizedLine.match(/ (\\((.+):(\\d+):(\\d+)\\)$)/);\r\n            sanitizedLine = location\r\n                ? sanitizedLine.replace(location[0], '')\r\n                : sanitizedLine;\r\n            const tokens = sanitizedLine.split(/\\s+/).slice(1);\r\n            const locationParts = this.extractLocation(location ? location[1] : tokens.pop());\r\n            const functionName = tokens.join(' ') || undefined;\r\n            const fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1\r\n                ? undefined\r\n                : locationParts[0];\r\n            return new StackFrame({\r\n                functionName,\r\n                fileName,\r\n                lineNumber: locationParts[1],\r\n                columnNumber: locationParts[2],\r\n            });\r\n        }, this);\r\n    },\r\n    parseFFOrSafari: function (error) {\r\n        const filtered = error.stack.split('\\n').filter(function (line) {\r\n            return !line.match(SAFARI_NATIVE_CODE_REGEXP);\r\n        }, this);\r\n        return filtered.map(function (line) {\r\n            if (line.indexOf(' > eval') > -1) {\r\n                line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\r\n            }\r\n            if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\r\n                return new StackFrame({\r\n                    functionName: line,\r\n                });\r\n            }\r\n            else {\r\n                const functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\r\n                const matches = line.match(functionNameRegex);\r\n                const functionName = matches && matches[1] ? matches[1] : undefined;\r\n                const locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\r\n                return new StackFrame({\r\n                    functionName,\r\n                    fileName: locationParts[0],\r\n                    lineNumber: locationParts[1],\r\n                    columnNumber: locationParts[2],\r\n                });\r\n            }\r\n        }, this);\r\n    },\r\n    parseOpera: function (e) {\r\n        if (!e.stacktrace ||\r\n            (e.message.indexOf('\\n') > -1 &&\r\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\r\n            return this.parseOpera9(e);\r\n        }\r\n        else if (!e.stack) {\r\n            return this.parseOpera10(e);\r\n        }\r\n        else {\r\n            return this.parseOpera11(e);\r\n        }\r\n    },\r\n    parseOpera9: function (e) {\r\n        const lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\r\n        const lines = e.message.split('\\n');\r\n        const result = [];\r\n        for (let i = 2, len = lines.length; i < len; i += 2) {\r\n            const match = lineRE.exec(lines[i]);\r\n            if (match) {\r\n                result.push(new StackFrame({\r\n                    fileName: match[2],\r\n                    lineNumber: parseFloat(match[1]),\r\n                }));\r\n            }\r\n        }\r\n        return result;\r\n    },\r\n    parseOpera10: function (e) {\r\n        const lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\r\n        const lines = e.stacktrace.split('\\n');\r\n        const result = [];\r\n        for (let i = 0, len = lines.length; i < len; i += 2) {\r\n            const match = lineRE.exec(lines[i]);\r\n            if (match) {\r\n                result.push(new StackFrame({\r\n                    functionName: match[3] || undefined,\r\n                    fileName: match[2],\r\n                    lineNumber: parseFloat(match[1]),\r\n                }));\r\n            }\r\n        }\r\n        return result;\r\n    },\r\n    parseOpera11: function (error) {\r\n        const filtered = error.stack.split('\\n').filter(function (line) {\r\n            return (!!line.match(FIREFOX_SAFARI_STACK_REGEXP) &&\r\n                !line.match(/^Error created at/));\r\n        }, this);\r\n        return filtered.map(function (line) {\r\n            const tokens = line.split('@');\r\n            const locationParts = this.extractLocation(tokens.pop());\r\n            const functionCall = tokens.shift() || '';\r\n            const functionName = functionCall\r\n                .replace(/<anonymous function(: (\\w+))?>/, '$2')\r\n                .replace(/\\([^)]*\\)/g, '') || undefined;\r\n            return new StackFrame({\r\n                functionName,\r\n                fileName: locationParts[0],\r\n                lineNumber: locationParts[1],\r\n                columnNumber: locationParts[2],\r\n            });\r\n        }, this);\r\n    },\r\n};\n\nexport { ErrorStackParser, StackFrame };\n", "function pathToSelector(node) {\r\n    if (!node || !node.outerHTML) {\r\n        return '';\r\n    }\r\n    let path = '';\r\n    while (node.parentElement) {\r\n        let name = node.localName;\r\n        if (!name) {\r\n            break;\r\n        }\r\n        name = name.toLowerCase();\r\n        const parent = node.parentElement;\r\n        const domSiblings = [];\r\n        if (parent.children && parent.children.length > 0) {\r\n            for (let i = 0; i < parent.children.length; i++) {\r\n                const sibling = parent.children[i];\r\n                if (sibling.localName && sibling.localName.toLowerCase) {\r\n                    if (sibling.localName.toLowerCase() === name) {\r\n                        domSiblings.push(sibling);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (domSiblings.length > 1) {\r\n            name += `:eq(${domSiblings.indexOf(node)})`;\r\n        }\r\n        path = name + (path ? '>' + path : '');\r\n        node = parent;\r\n    }\r\n    return path;\r\n}\r\nfunction isObject(obj) {\r\n    return Object.prototype.toString.call(obj) === '[object Object]';\r\n}\r\nfunction isObjTooDeep(obj, limit) {\r\n    if (limit === 0) {\r\n        return true;\r\n    }\r\n    const keys = Object.keys(obj);\r\n    for (const key of keys) {\r\n        if (isObject(obj[key]) &&\r\n            isObjTooDeep(obj[key], limit - 1)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction stringify(obj, stringifyOptions) {\r\n    const options = {\r\n        numOfKeysLimit: 50,\r\n        depthOfLimit: 4,\r\n    };\r\n    Object.assign(options, stringifyOptions);\r\n    const stack = [];\r\n    const keys = [];\r\n    return JSON.stringify(obj, function (key, value) {\r\n        if (stack.length > 0) {\r\n            const thisPos = stack.indexOf(this);\r\n            ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\r\n            ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\r\n            if (~stack.indexOf(value)) {\r\n                if (stack[0] === value) {\r\n                    value = '[Circular ~]';\r\n                }\r\n                else {\r\n                    value =\r\n                        '[Circular ~.' +\r\n                            keys.slice(0, stack.indexOf(value)).join('.') +\r\n                            ']';\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            stack.push(value);\r\n        }\r\n        if (value === null)\r\n            return value;\r\n        if (value === undefined)\r\n            return 'undefined';\r\n        if (shouldIgnore(value)) {\r\n            return toString(value);\r\n        }\r\n        if (typeof value === 'bigint') {\r\n            return value.toString() + 'n';\r\n        }\r\n        if (value instanceof Event) {\r\n            const eventResult = {};\r\n            for (const eventKey in value) {\r\n                const eventValue = value[eventKey];\r\n                if (Array.isArray(eventValue)) {\r\n                    eventResult[eventKey] = pathToSelector((eventValue.length ? eventValue[0] : null));\r\n                }\r\n                else {\r\n                    eventResult[eventKey] = eventValue;\r\n                }\r\n            }\r\n            return eventResult;\r\n        }\r\n        else if (value instanceof Node) {\r\n            if (value instanceof HTMLElement) {\r\n                return value ? value.outerHTML : '';\r\n            }\r\n            return value.nodeName;\r\n        }\r\n        else if (value instanceof Error) {\r\n            return value.stack\r\n                ? value.stack + '\\nEnd of stack for Error object'\r\n                : value.name + ': ' + value.message;\r\n        }\r\n        return value;\r\n    });\r\n    function shouldIgnore(_obj) {\r\n        if (isObject(_obj) && Object.keys(_obj).length > options.numOfKeysLimit) {\r\n            return true;\r\n        }\r\n        if (typeof _obj === 'function') {\r\n            return true;\r\n        }\r\n        if (isObject(_obj) &&\r\n            isObjTooDeep(_obj, options.depthOfLimit)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    function toString(_obj) {\r\n        let str = _obj.toString();\r\n        if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\r\n            str = `${str.slice(0, options.stringLengthLimit)}...`;\r\n        }\r\n        return str;\r\n    }\r\n}\n\nexport { stringify };\n", "import { patch } from '../../../utils.js';\nimport { ErrorStackParser } from './error-stack-parser.js';\nimport { stringify } from './stringify.js';\n\nconst defaultLogOptions = {\r\n    level: [\r\n        'assert',\r\n        'clear',\r\n        'count',\r\n        'countReset',\r\n        'debug',\r\n        'dir',\r\n        'dirxml',\r\n        'error',\r\n        'group',\r\n        'groupCollapsed',\r\n        'groupEnd',\r\n        'info',\r\n        'log',\r\n        'table',\r\n        'time',\r\n        'timeEnd',\r\n        'timeLog',\r\n        'trace',\r\n        'warn',\r\n    ],\r\n    lengthThreshold: 1000,\r\n    logger: 'console',\r\n};\r\nfunction initLogObserver(cb, win, options) {\r\n    const logOptions = (options ? Object.assign({}, defaultLogOptions, options) : defaultLogOptions);\r\n    const loggerType = logOptions.logger;\r\n    if (!loggerType) {\r\n        return () => {\r\n        };\r\n    }\r\n    let logger;\r\n    if (typeof loggerType === 'string') {\r\n        logger = win[loggerType];\r\n    }\r\n    else {\r\n        logger = loggerType;\r\n    }\r\n    let logCount = 0;\r\n    let inStack = false;\r\n    const cancelHandlers = [];\r\n    if (logOptions.level.includes('error')) {\r\n        const errorHandler = (event) => {\r\n            const message = event.message, error = event.error;\r\n            const trace = ErrorStackParser.parse(error).map((stackFrame) => stackFrame.toString());\r\n            const payload = [stringify(message, logOptions.stringifyOptions)];\r\n            cb({\r\n                level: 'error',\r\n                trace,\r\n                payload,\r\n            });\r\n        };\r\n        win.addEventListener('error', errorHandler);\r\n        cancelHandlers.push(() => {\r\n            win.removeEventListener('error', errorHandler);\r\n        });\r\n        const unhandledrejectionHandler = (event) => {\r\n            let error;\r\n            let payload;\r\n            if (event.reason instanceof Error) {\r\n                error = event.reason;\r\n                payload = [\r\n                    stringify(`Uncaught (in promise) ${error.name}: ${error.message}`, logOptions.stringifyOptions),\r\n                ];\r\n            }\r\n            else {\r\n                error = new Error();\r\n                payload = [\r\n                    stringify('Uncaught (in promise)', logOptions.stringifyOptions),\r\n                    stringify(event.reason, logOptions.stringifyOptions),\r\n                ];\r\n            }\r\n            const trace = ErrorStackParser.parse(error).map((stackFrame) => stackFrame.toString());\r\n            cb({\r\n                level: 'error',\r\n                trace,\r\n                payload,\r\n            });\r\n        };\r\n        win.addEventListener('unhandledrejection', unhandledrejectionHandler);\r\n        cancelHandlers.push(() => {\r\n            win.removeEventListener('unhandledrejection', unhandledrejectionHandler);\r\n        });\r\n    }\r\n    for (const levelType of logOptions.level) {\r\n        cancelHandlers.push(replace(logger, levelType));\r\n    }\r\n    return () => {\r\n        cancelHandlers.forEach((h) => h());\r\n    };\r\n    function replace(_logger, level) {\r\n        if (!_logger[level]) {\r\n            return () => {\r\n            };\r\n        }\r\n        return patch(_logger, level, (original) => {\r\n            return (...args) => {\r\n                original.apply(this, args);\r\n                if (inStack) {\r\n                    return;\r\n                }\r\n                inStack = true;\r\n                try {\r\n                    const trace = ErrorStackParser.parse(new Error())\r\n                        .map((stackFrame) => stackFrame.toString())\r\n                        .splice(1);\r\n                    const payload = args.map((s) => stringify(s, logOptions.stringifyOptions));\r\n                    logCount++;\r\n                    if (logCount < logOptions.lengthThreshold) {\r\n                        cb({\r\n                            level,\r\n                            trace,\r\n                            payload,\r\n                        });\r\n                    }\r\n                    else if (logCount === logOptions.lengthThreshold) {\r\n                        cb({\r\n                            level: 'warn',\r\n                            trace: [],\r\n                            payload: [\r\n                                stringify('The number of log records reached the threshold.'),\r\n                            ],\r\n                        });\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    original('rrweb logger error:', error, ...args);\r\n                }\r\n                finally {\r\n                    inStack = false;\r\n                }\r\n            };\r\n        });\r\n    }\r\n}\r\nconst PLUGIN_NAME = 'rrweb/console@1';\r\nconst getRecordConsolePlugin = (options) => ({\r\n    name: PLUGIN_NAME,\r\n    observer: initLogObserver,\r\n    options: options,\r\n});\n\nexport { PLUGIN_NAME, getRecordConsolePlugin };\n", "import { PLUGIN_NAME } from '../record/index.js';\nimport { EventType, IncrementalSource } from '../../../../../types/dist/types.js';\n\nconst ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\r\nconst defaultLogConfig = {\r\n    level: [\r\n        'assert',\r\n        'clear',\r\n        'count',\r\n        'countReset',\r\n        'debug',\r\n        'dir',\r\n        'dirxml',\r\n        'error',\r\n        'group',\r\n        'groupCollapsed',\r\n        'groupEnd',\r\n        'info',\r\n        'log',\r\n        'table',\r\n        'time',\r\n        'timeEnd',\r\n        'timeLog',\r\n        'trace',\r\n        'warn',\r\n    ],\r\n    replayLogger: undefined,\r\n};\r\nclass LogReplayPlugin {\r\n    constructor(config) {\r\n        this.config = Object.assign(defaultLogConfig, config);\r\n    }\r\n    getConsoleLogger() {\r\n        const replayLogger = {};\r\n        for (const level of this.config.level) {\r\n            if (level === 'trace') {\r\n                replayLogger[level] = (data) => {\r\n                    const logger = console.log[ORIGINAL_ATTRIBUTE_NAME]\r\n                        ? console.log[ORIGINAL_ATTRIBUTE_NAME]\r\n                        : console.log;\r\n                    logger(...data.payload.map((s) => JSON.parse(s)), this.formatMessage(data));\r\n                };\r\n            }\r\n            else {\r\n                replayLogger[level] = (data) => {\r\n                    const logger = console[level][ORIGINAL_ATTRIBUTE_NAME]\r\n                        ? console[level][ORIGINAL_ATTRIBUTE_NAME]\r\n                        : console[level];\r\n                    logger(...data.payload.map((s) => JSON.parse(s)), this.formatMessage(data));\r\n                };\r\n            }\r\n        }\r\n        return replayLogger;\r\n    }\r\n    formatMessage(data) {\r\n        if (data.trace.length === 0) {\r\n            return '';\r\n        }\r\n        const stackPrefix = '\\n\\tat ';\r\n        let result = stackPrefix;\r\n        result += data.trace.join(stackPrefix);\r\n        return result;\r\n    }\r\n}\r\nconst getReplayConsolePlugin = (options) => {\r\n    const replayLogger = (options === null || options === void 0 ? void 0 : options.replayLogger) || new LogReplayPlugin(options).getConsoleLogger();\r\n    return {\r\n        handler(event, _isSync, context) {\r\n            let logData = null;\r\n            if (event.type === EventType.IncrementalSnapshot &&\r\n                event.data.source === IncrementalSource.Log) {\r\n                logData = event.data;\r\n            }\r\n            else if (event.type === EventType.Plugin &&\r\n                event.data.plugin === PLUGIN_NAME) {\r\n                logData = event.data.payload;\r\n            }\r\n            if (logData) {\r\n                try {\r\n                    if (typeof replayLogger[logData.level] === 'function') {\r\n                        replayLogger[logData.level](logData);\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (context.replayer.config.showWarning) {\r\n                        console.warn(error);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n    };\r\n};\n\nexport { getReplayConsolePlugin };\n", "import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { decode } from './../../../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst webGLVarMap = new Map();\r\nfunction variableListFor(ctx, ctor) {\r\n    let contextMap = webGLVarMap.get(ctx);\r\n    if (!contextMap) {\r\n        contextMap = new Map();\r\n        webGLVarMap.set(ctx, contextMap);\r\n    }\r\n    if (!contextMap.has(ctor)) {\r\n        contextMap.set(ctor, []);\r\n    }\r\n    return contextMap.get(ctor);\r\n}\r\nfunction deserializeArg(imageMap, ctx, preload) {\r\n    return (arg) => __awaiter(this, void 0, void 0, function* () {\r\n        if (arg && typeof arg === 'object' && 'rr_type' in arg) {\r\n            if (preload)\r\n                preload.isUnchanged = false;\r\n            if (arg.rr_type === 'ImageBitmap' && 'args' in arg) {\r\n                const args = yield deserializeArg(imageMap, ctx, preload)(arg.args);\r\n                return yield createImageBitmap.apply(null, args);\r\n            }\r\n            else if ('index' in arg) {\r\n                if (preload || ctx === null)\r\n                    return arg;\r\n                const { rr_type: name, index } = arg;\r\n                return variableListFor(ctx, name)[index];\r\n            }\r\n            else if ('args' in arg) {\r\n                const { rr_type: name, args } = arg;\r\n                const ctor = window[name];\r\n                return new ctor(...(yield Promise.all(args.map(deserializeArg(imageMap, ctx, preload)))));\r\n            }\r\n            else if ('base64' in arg) {\r\n                return decode(arg.base64);\r\n            }\r\n            else if ('src' in arg) {\r\n                const image = imageMap.get(arg.src);\r\n                if (image) {\r\n                    return image;\r\n                }\r\n                else {\r\n                    const image = new Image();\r\n                    image.src = arg.src;\r\n                    imageMap.set(arg.src, image);\r\n                    return image;\r\n                }\r\n            }\r\n            else if ('data' in arg && arg.rr_type === 'Blob') {\r\n                const blobContents = yield Promise.all(arg.data.map(deserializeArg(imageMap, ctx, preload)));\r\n                const blob = new Blob(blobContents, {\r\n                    type: arg.type,\r\n                });\r\n                return blob;\r\n            }\r\n        }\r\n        else if (Array.isArray(arg)) {\r\n            const result = yield Promise.all(arg.map(deserializeArg(imageMap, ctx, preload)));\r\n            return result;\r\n        }\r\n        return arg;\r\n    });\r\n}\n\nexport { deserializeArg, variableListFor };\n", "import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../../types/dist/types.js';\nimport { deserializeArg, variableListFor } from './deserialize-args.js';\n\nfunction getContext(target, type) {\r\n    try {\r\n        if (type === CanvasContext.WebGL) {\r\n            return (target.getContext('webgl') || target.getContext('experimental-webgl'));\r\n        }\r\n        return target.getContext('webgl2');\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\nconst WebGLVariableConstructorsNames = [\r\n    'WebGLActiveInfo',\r\n    'WebGLBuffer',\r\n    'WebGLFramebuffer',\r\n    'WebGLProgram',\r\n    'WebGLRenderbuffer',\r\n    'WebGLShader',\r\n    'WebGLShaderPrecisionFormat',\r\n    'WebGLTexture',\r\n    'WebGLUniformLocation',\r\n    'WebGLVertexArrayObject',\r\n];\r\nfunction saveToWebGLVarMap(ctx, result) {\r\n    if (!(result === null || result === void 0 ? void 0 : result.constructor))\r\n        return;\r\n    const { name } = result.constructor;\r\n    if (!WebGLVariableConstructorsNames.includes(name))\r\n        return;\r\n    const variables = variableListFor(ctx, name);\r\n    if (!variables.includes(result))\r\n        variables.push(result);\r\n}\r\nfunction webglMutation({ mutation, target, type, imageMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const ctx = getContext(target, type);\r\n            if (!ctx)\r\n                return;\r\n            if (mutation.setter) {\r\n                ctx[mutation.property] = mutation.args[0];\r\n                return;\r\n            }\r\n            const original = ctx[mutation.property];\r\n            const args = yield Promise.all(mutation.args.map(deserializeArg(imageMap, ctx)));\r\n            const result = original.apply(ctx, args);\r\n            saveToWebGLVarMap(ctx, result);\r\n            const debugMode = false;\r\n            if (debugMode) ;\r\n        }\r\n        catch (error) {\r\n            errorHandler(mutation, error);\r\n        }\r\n    });\r\n}\n\nexport { webglMutation as default };\n", "import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { deserializeArg } from './deserialize-args.js';\n\nfunction canvasMutation({ event, mutations, target, imageMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const ctx = target.getContext('2d');\r\n        if (!ctx) {\r\n            errorHandler(mutations[0], new Error('Canvas context is null'));\r\n            return;\r\n        }\r\n        const mutationArgsPromises = mutations.map((mutation) => __awaiter(this, void 0, void 0, function* () {\r\n            return Promise.all(mutation.args.map(deserializeArg(imageMap, ctx)));\r\n        }));\r\n        const args = yield Promise.all(mutationArgsPromises);\r\n        args.forEach((args, index) => {\r\n            const mutation = mutations[index];\r\n            try {\r\n                if (mutation.setter) {\r\n                    ctx[mutation.property] =\r\n                        mutation.args[0];\r\n                    return;\r\n                }\r\n                const original = ctx[mutation.property];\r\n                if (mutation.property === 'drawImage' &&\r\n                    typeof mutation.args[0] === 'string') {\r\n                    imageMap.get(event);\r\n                    original.apply(ctx, mutation.args);\r\n                }\r\n                else {\r\n                    original.apply(ctx, args);\r\n                }\r\n            }\r\n            catch (error) {\r\n                errorHandler(mutation, error);\r\n            }\r\n            return;\r\n        });\r\n    });\r\n}\n\nexport { canvasMutation as default };\n", "import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../../types/dist/types.js';\nimport webglMutation from './webgl.js';\nimport canvasMutation$1 from './2d.js';\n\nfunction canvasMutation({ event, mutation, target, imageMap, canvasEventMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const precomputedMutation = canvasEventMap.get(event) || mutation;\r\n            const commands = 'commands' in precomputedMutation\r\n                ? precomputedMutation.commands\r\n                : [precomputedMutation];\r\n            if ([CanvasContext.WebGL, CanvasContext.WebGL2].includes(mutation.type)) {\r\n                for (let i = 0; i < commands.length; i++) {\r\n                    const command = commands[i];\r\n                    yield webglMutation({\r\n                        mutation: command,\r\n                        type: mutation.type,\r\n                        target,\r\n                        imageMap,\r\n                        errorHandler,\r\n                    });\r\n                }\r\n                return;\r\n            }\r\n            yield canvasMutation$1({\r\n                event,\r\n                mutations: commands,\r\n                target,\r\n                imageMap,\r\n                errorHandler,\r\n            });\r\n        }\r\n        catch (error) {\r\n            errorHandler(mutation, error);\r\n        }\r\n    });\r\n}\n\nexport { canvasMutation as default };\n", "function mitt(n){return {all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e]);},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]));},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e);}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e);});}}}\n\nexport { mitt as default };\n", "function polyfill(w = window, d = document) {\r\n    if ('scrollBehavior' in d.documentElement.style &&\r\n        w.__forceSmoothScrollPolyfill__ !== true) {\r\n        return;\r\n    }\r\n    const Element = w.HTMLElement || w.Element;\r\n    const SCROLL_TIME = 468;\r\n    const original = {\r\n        scroll: w.scroll || w.scrollTo,\r\n        scrollBy: w.scrollBy,\r\n        elementScroll: Element.prototype.scroll || scrollElement,\r\n        scrollIntoView: Element.prototype.scrollIntoView,\r\n    };\r\n    const now = w.performance && w.performance.now\r\n        ? w.performance.now.bind(w.performance)\r\n        : Date.now;\r\n    function isMicrosoftBrowser(userAgent) {\r\n        const userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\r\n        return new RegExp(userAgentPatterns.join('|')).test(userAgent);\r\n    }\r\n    const ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\r\n    function scrollElement(x, y) {\r\n        this.scrollLeft = x;\r\n        this.scrollTop = y;\r\n    }\r\n    function ease(k) {\r\n        return 0.5 * (1 - Math.cos(Math.PI * k));\r\n    }\r\n    function shouldBailOut(firstArg) {\r\n        if (firstArg === null ||\r\n            typeof firstArg !== 'object' ||\r\n            firstArg.behavior === undefined ||\r\n            firstArg.behavior === 'auto' ||\r\n            firstArg.behavior === 'instant') {\r\n            return true;\r\n        }\r\n        if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\r\n            return false;\r\n        }\r\n        throw new TypeError('behavior member of ScrollOptions ' +\r\n            firstArg.behavior +\r\n            ' is not a valid value for enumeration ScrollBehavior.');\r\n    }\r\n    function hasScrollableSpace(el, axis) {\r\n        if (axis === 'Y') {\r\n            return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\r\n        }\r\n        if (axis === 'X') {\r\n            return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\r\n        }\r\n    }\r\n    function canOverflow(el, axis) {\r\n        const overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\r\n        return overflowValue === 'auto' || overflowValue === 'scroll';\r\n    }\r\n    function isScrollable(el) {\r\n        const isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\r\n        const isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\r\n        return isScrollableY || isScrollableX;\r\n    }\r\n    function findScrollableParent(el) {\r\n        while (el !== d.body && isScrollable(el) === false) {\r\n            el = el.parentNode || el.host;\r\n        }\r\n        return el;\r\n    }\r\n    function step(context) {\r\n        const time = now();\r\n        let value;\r\n        let currentX;\r\n        let currentY;\r\n        let elapsed = (time - context.startTime) / SCROLL_TIME;\r\n        elapsed = elapsed > 1 ? 1 : elapsed;\r\n        value = ease(elapsed);\r\n        currentX = context.startX + (context.x - context.startX) * value;\r\n        currentY = context.startY + (context.y - context.startY) * value;\r\n        context.method.call(context.scrollable, currentX, currentY);\r\n        if (currentX !== context.x || currentY !== context.y) {\r\n            w.requestAnimationFrame(step.bind(w, context));\r\n        }\r\n    }\r\n    function smoothScroll(el, x, y) {\r\n        let scrollable;\r\n        let startX;\r\n        let startY;\r\n        let method;\r\n        const startTime = now();\r\n        if (el === d.body) {\r\n            scrollable = w;\r\n            startX = w.scrollX || w.pageXOffset;\r\n            startY = w.scrollY || w.pageYOffset;\r\n            method = original.scroll;\r\n        }\r\n        else {\r\n            scrollable = el;\r\n            startX = el.scrollLeft;\r\n            startY = el.scrollTop;\r\n            method = scrollElement;\r\n        }\r\n        step({\r\n            scrollable: scrollable,\r\n            method: method,\r\n            startTime: startTime,\r\n            startX: startX,\r\n            startY: startY,\r\n            x: x,\r\n            y: y,\r\n        });\r\n    }\r\n    w.scroll = w.scrollTo = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.scroll.call(w, arguments[0].left !== undefined\r\n                ? arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? arguments[0]\r\n                    : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\r\n                ? arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? arguments[1]\r\n                    : w.scrollY || w.pageYOffset);\r\n            return;\r\n        }\r\n        smoothScroll.call(w, d.body, arguments[0].left !== undefined\r\n            ? ~~arguments[0].left\r\n            : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\r\n            ? ~~arguments[0].top\r\n            : w.scrollY || w.pageYOffset);\r\n    };\r\n    w.scrollBy = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0])) {\r\n            original.scrollBy.call(w, arguments[0].left !== undefined\r\n                ? arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? arguments[0]\r\n                    : 0, arguments[0].top !== undefined\r\n                ? arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? arguments[1]\r\n                    : 0);\r\n            return;\r\n        }\r\n        smoothScroll.call(w, d.body, ~~arguments[0].left + (w.scrollX || w.pageXOffset), ~~arguments[0].top + (w.scrollY || w.pageYOffset));\r\n    };\r\n    Element.prototype.scroll = Element.prototype.scrollTo = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\r\n                throw new SyntaxError('Value could not be converted');\r\n            }\r\n            original.elementScroll.call(this, arguments[0].left !== undefined\r\n                ? ~~arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? ~~arguments[0]\r\n                    : this.scrollLeft, arguments[0].top !== undefined\r\n                ? ~~arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? ~~arguments[1]\r\n                    : this.scrollTop);\r\n            return;\r\n        }\r\n        const left = arguments[0].left;\r\n        const top = arguments[0].top;\r\n        smoothScroll.call(this, this, typeof left === 'undefined' ? this.scrollLeft : ~~left, typeof top === 'undefined' ? this.scrollTop : ~~top);\r\n    };\r\n    Element.prototype.scrollBy = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.elementScroll.call(this, arguments[0].left !== undefined\r\n                ? ~~arguments[0].left + this.scrollLeft\r\n                : ~~arguments[0] + this.scrollLeft, arguments[0].top !== undefined\r\n                ? ~~arguments[0].top + this.scrollTop\r\n                : ~~arguments[1] + this.scrollTop);\r\n            return;\r\n        }\r\n        this.scroll({\r\n            left: ~~arguments[0].left + this.scrollLeft,\r\n            top: ~~arguments[0].top + this.scrollTop,\r\n            behavior: arguments[0].behavior,\r\n        });\r\n    };\r\n    Element.prototype.scrollIntoView = function () {\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.scrollIntoView.call(this, arguments[0] === undefined ? true : arguments[0]);\r\n            return;\r\n        }\r\n        const scrollableParent = findScrollableParent(this);\r\n        const parentRects = scrollableParent.getBoundingClientRect();\r\n        const clientRects = this.getBoundingClientRect();\r\n        if (scrollableParent !== d.body) {\r\n            smoothScroll.call(this, scrollableParent, scrollableParent.scrollLeft + clientRects.left - parentRects.left, scrollableParent.scrollTop + clientRects.top - parentRects.top);\r\n            if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\r\n                w.scrollBy({\r\n                    left: parentRects.left,\r\n                    top: parentRects.top,\r\n                    behavior: 'smooth',\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            w.scrollBy({\r\n                left: clientRects.left,\r\n                top: clientRects.top,\r\n                behavior: 'smooth',\r\n            });\r\n        }\r\n    };\r\n}\n\nexport { polyfill };\n", "import { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass Timer {\r\n    constructor(actions = [], config) {\r\n        this.timeOffset = 0;\r\n        this.raf = null;\r\n        this.actions = actions;\r\n        this.speed = config.speed;\r\n    }\r\n    addAction(action) {\r\n        const rafWasActive = this.raf === true;\r\n        if (!this.actions.length ||\r\n            this.actions[this.actions.length - 1].delay <= action.delay) {\r\n            this.actions.push(action);\r\n        }\r\n        else {\r\n            const index = this.findActionIndex(action);\r\n            this.actions.splice(index, 0, action);\r\n        }\r\n        if (rafWasActive) {\r\n            this.raf = requestAnimationFrame(this.rafCheck.bind(this));\r\n        }\r\n    }\r\n    start() {\r\n        this.timeOffset = 0;\r\n        this.lastTimestamp = performance.now();\r\n        this.raf = requestAnimationFrame(this.rafCheck.bind(this));\r\n    }\r\n    rafCheck() {\r\n        const time = performance.now();\r\n        this.timeOffset += (time - this.lastTimestamp) * this.speed;\r\n        this.lastTimestamp = time;\r\n        while (this.actions.length) {\r\n            const action = this.actions[0];\r\n            if (this.timeOffset >= action.delay) {\r\n                this.actions.shift();\r\n                action.doAction();\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (this.actions.length > 0) {\r\n            this.raf = requestAnimationFrame(this.rafCheck.bind(this));\r\n        }\r\n        else {\r\n            this.raf = true;\r\n        }\r\n    }\r\n    clear() {\r\n        if (this.raf) {\r\n            if (this.raf !== true) {\r\n                cancelAnimationFrame(this.raf);\r\n            }\r\n            this.raf = null;\r\n        }\r\n        this.actions.length = 0;\r\n    }\r\n    setSpeed(speed) {\r\n        this.speed = speed;\r\n    }\r\n    isActive() {\r\n        return this.raf !== null;\r\n    }\r\n    findActionIndex(action) {\r\n        let start = 0;\r\n        let end = this.actions.length - 1;\r\n        while (start <= end) {\r\n            const mid = Math.floor((start + end) / 2);\r\n            if (this.actions[mid].delay < action.delay) {\r\n                start = mid + 1;\r\n            }\r\n            else if (this.actions[mid].delay > action.delay) {\r\n                end = mid - 1;\r\n            }\r\n            else {\r\n                return mid + 1;\r\n            }\r\n        }\r\n        return start;\r\n    }\r\n}\r\nfunction addDelay(event, baselineTime) {\r\n    if (event.type === EventType.IncrementalSnapshot &&\r\n        event.data.source === IncrementalSource.MouseMove &&\r\n        event.data.positions &&\r\n        event.data.positions.length) {\r\n        const firstOffset = event.data.positions[0].timeOffset;\r\n        const firstTimestamp = event.timestamp + firstOffset;\r\n        event.delay = firstTimestamp - baselineTime;\r\n        return firstTimestamp - baselineTime;\r\n    }\r\n    event.delay = event.timestamp - baselineTime;\r\n    return event.delay;\r\n}\n\nexport { Timer, addDelay };\n", "/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nfunction t(t,n){var e=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),a=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)a.push(r.value);}catch(t){o={error:t};}finally{try{r&&!r.done&&(e=i.return)&&e.call(i);}finally{if(o)throw o.error}}return a}var n;!function(t){t[t.NotStarted=0]=\"NotStarted\",t[t.Running=1]=\"Running\",t[t.Stopped=2]=\"Stopped\";}(n||(n={}));var e={type:\"xstate.init\"};function r(t){return void 0===t?[]:[].concat(t)}function o(t){return {type:\"xstate.assign\",assignment:t}}function i(t,n){return \"string\"==typeof(t=\"string\"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:\"function\"==typeof t?{type:t.name,exec:t}:t}function a(t){return function(n){return t===n}}function u(t){return \"string\"==typeof t?{type:t}:t}function c(t,n){return {value:t,context:n,actions:[],changed:!1,matches:a(t)}}function f(t,n,e){var r=n,o=!1;return [t.filter((function(t){if(\"xstate.assign\"===t.type){o=!0;var n=Object.assign({},r);return \"function\"==typeof t.assignment?n=t.assignment(r,e):Object.keys(t.assignment).forEach((function(o){n[o]=\"function\"==typeof t.assignment[o]?t.assignment[o](r,e):t.assignment[o];})),r=n,!1}return !0})),r,o]}function s(n,o){void 0===o&&(o={});var s=t(f(r(n.states[n.initial].entry).map((function(t){return i(t,o.actions)})),n.context,e),2),l=s[0],v=s[1],y={config:n,_options:o,initialState:{value:n.initial,actions:l,context:v,matches:a(n.initial)},transition:function(e,o){var s,l,v=\"string\"==typeof e?{value:e,context:n.context}:e,p=v.value,g=v.context,d=u(o),x=n.states[p];if(x.on){var m=r(x.on[d.type]);try{for(var h=function(t){var n=\"function\"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&\"number\"==typeof t.length)return {next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}(m),b=h.next();!b.done;b=h.next()){var S=b.value;if(void 0===S)return c(p,g);var w=\"string\"==typeof S?{target:S}:S,j=w.target,E=w.actions,R=void 0===E?[]:E,N=w.cond,O=void 0===N?function(){return !0}:N,_=void 0===j,k=null!=j?j:p,T=n.states[k];if(O(g,d)){var q=t(f((_?r(R):[].concat(x.exit,R,T.entry).filter((function(t){return t}))).map((function(t){return i(t,y._options.actions)})),g,d),3),z=q[0],A=q[1],B=q[2],C=null!=j?j:p;return {value:C,context:A,actions:z,changed:j!==p||z.length>0||B,matches:a(C)}}}}catch(t){s={error:t};}finally{try{b&&!b.done&&(l=h.return)&&l.call(h);}finally{if(s)throw s.error}}}return c(p,g)}};return y}var l=function(t,n){return t.actions.forEach((function(e){var r=e.exec;return r&&r(t.context,n)}))};function v(t){var r=t.initialState,o=n.NotStarted,i=new Set,c={_machine:t,send:function(e){o===n.Running&&(r=t.transition(r,e),l(r,u(e)),i.forEach((function(t){return t(r)})));},subscribe:function(t){return i.add(t),t(r),{unsubscribe:function(){return i.delete(t)}}},start:function(i){if(i){var u=\"object\"==typeof i?i:{context:t.config.context,value:i};r={value:u.value,actions:[],context:u.context,matches:a(u.value)};}return o=n.Running,l(r,e),c},stop:function(){return o=n.Stopped,i.clear(),c},get state(){return r},get status(){return o}};return c}\n\nexport { n as InterpreterStatus, o as assign, s as createMachine, v as interpret };\n", "import { interpret as v, createMachine as s, assign as o } from './../../../../ext/@xstate/fsm/es/index.js';\nimport { EventType, IncrementalSource, ReplayerEvents } from '../../../types/dist/types.js';\nimport { addDelay } from './timer.js';\n\nfunction discardPriorSnapshots(events, baselineTime) {\r\n    for (let idx = events.length - 1; idx >= 0; idx--) {\r\n        const event = events[idx];\r\n        if (event.type === EventType.Meta) {\r\n            if (event.timestamp <= baselineTime) {\r\n                return events.slice(idx);\r\n            }\r\n        }\r\n    }\r\n    return events;\r\n}\r\nfunction createPlayerService(context, { getCastFn, applyEventsSynchronously, emitter }) {\r\n    const playerMachine = s({\r\n        id: 'player',\r\n        context,\r\n        initial: 'paused',\r\n        states: {\r\n            playing: {\r\n                on: {\r\n                    PAUSE: {\r\n                        target: 'paused',\r\n                        actions: ['pause'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'playing',\r\n                        actions: 'castEvent',\r\n                    },\r\n                    END: {\r\n                        target: 'paused',\r\n                        actions: ['resetLastPlayedEvent', 'pause'],\r\n                    },\r\n                    ADD_EVENT: {\r\n                        target: 'playing',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                },\r\n            },\r\n            paused: {\r\n                on: {\r\n                    PLAY: {\r\n                        target: 'playing',\r\n                        actions: ['recordTimeOffset', 'play'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'paused',\r\n                        actions: 'castEvent',\r\n                    },\r\n                    TO_LIVE: {\r\n                        target: 'live',\r\n                        actions: ['startLive'],\r\n                    },\r\n                    ADD_EVENT: {\r\n                        target: 'paused',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                },\r\n            },\r\n            live: {\r\n                on: {\r\n                    ADD_EVENT: {\r\n                        target: 'live',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'live',\r\n                        actions: ['castEvent'],\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    }, {\r\n        actions: {\r\n            castEvent: o({\r\n                lastPlayedEvent: (ctx, event) => {\r\n                    if (event.type === 'CAST_EVENT') {\r\n                        return event.payload.event;\r\n                    }\r\n                    return ctx.lastPlayedEvent;\r\n                },\r\n            }),\r\n            recordTimeOffset: o((ctx, event) => {\r\n                let timeOffset = ctx.timeOffset;\r\n                if ('payload' in event && 'timeOffset' in event.payload) {\r\n                    timeOffset = event.payload.timeOffset;\r\n                }\r\n                return Object.assign(Object.assign({}, ctx), { timeOffset, baselineTime: ctx.events[0].timestamp + timeOffset });\r\n            }),\r\n            play(ctx) {\r\n                var _a;\r\n                const { timer, events, baselineTime, lastPlayedEvent } = ctx;\r\n                timer.clear();\r\n                for (const event of events) {\r\n                    addDelay(event, baselineTime);\r\n                }\r\n                const neededEvents = discardPriorSnapshots(events, baselineTime);\r\n                let lastPlayedTimestamp = lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.timestamp;\r\n                if ((lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.type) === EventType.IncrementalSnapshot &&\r\n                    lastPlayedEvent.data.source === IncrementalSource.MouseMove) {\r\n                    lastPlayedTimestamp =\r\n                        lastPlayedEvent.timestamp +\r\n                            ((_a = lastPlayedEvent.data.positions[0]) === null || _a === void 0 ? void 0 : _a.timeOffset);\r\n                }\r\n                if (baselineTime < (lastPlayedTimestamp || 0)) {\r\n                    emitter.emit(ReplayerEvents.PlayBack);\r\n                }\r\n                const syncEvents = new Array();\r\n                for (const event of neededEvents) {\r\n                    if (lastPlayedTimestamp &&\r\n                        lastPlayedTimestamp < baselineTime &&\r\n                        (event.timestamp <= lastPlayedTimestamp ||\r\n                            event === lastPlayedEvent)) {\r\n                        continue;\r\n                    }\r\n                    if (event.timestamp < baselineTime) {\r\n                        syncEvents.push(event);\r\n                    }\r\n                    else {\r\n                        const castFn = getCastFn(event, false);\r\n                        timer.addAction({\r\n                            doAction: () => {\r\n                                castFn();\r\n                            },\r\n                            delay: event.delay,\r\n                        });\r\n                    }\r\n                }\r\n                applyEventsSynchronously(syncEvents);\r\n                emitter.emit(ReplayerEvents.Flush);\r\n                timer.start();\r\n            },\r\n            pause(ctx) {\r\n                ctx.timer.clear();\r\n            },\r\n            resetLastPlayedEvent: o((ctx) => {\r\n                return Object.assign(Object.assign({}, ctx), { lastPlayedEvent: null });\r\n            }),\r\n            startLive: o({\r\n                baselineTime: (ctx, event) => {\r\n                    ctx.timer.start();\r\n                    if (event.type === 'TO_LIVE' && event.payload.baselineTime) {\r\n                        return event.payload.baselineTime;\r\n                    }\r\n                    return Date.now();\r\n                },\r\n            }),\r\n            addEvent: o((ctx, machineEvent) => {\r\n                const { baselineTime, timer, events } = ctx;\r\n                if (machineEvent.type === 'ADD_EVENT') {\r\n                    const { event } = machineEvent.payload;\r\n                    addDelay(event, baselineTime);\r\n                    let end = events.length - 1;\r\n                    if (!events[end] || events[end].timestamp <= event.timestamp) {\r\n                        events.push(event);\r\n                    }\r\n                    else {\r\n                        let insertionIndex = -1;\r\n                        let start = 0;\r\n                        while (start <= end) {\r\n                            const mid = Math.floor((start + end) / 2);\r\n                            if (events[mid].timestamp <= event.timestamp) {\r\n                                start = mid + 1;\r\n                            }\r\n                            else {\r\n                                end = mid - 1;\r\n                            }\r\n                        }\r\n                        if (insertionIndex === -1) {\r\n                            insertionIndex = start;\r\n                        }\r\n                        events.splice(insertionIndex, 0, event);\r\n                    }\r\n                    const isSync = event.timestamp < baselineTime;\r\n                    const castFn = getCastFn(event, isSync);\r\n                    if (isSync) {\r\n                        castFn();\r\n                    }\r\n                    else if (timer.isActive()) {\r\n                        timer.addAction({\r\n                            doAction: () => {\r\n                                castFn();\r\n                            },\r\n                            delay: event.delay,\r\n                        });\r\n                    }\r\n                }\r\n                return Object.assign(Object.assign({}, ctx), { events });\r\n            }),\r\n        },\r\n    });\r\n    return v(playerMachine);\r\n}\r\nfunction createSpeedService(context) {\r\n    const speedMachine = s({\r\n        id: 'speed',\r\n        context,\r\n        initial: 'normal',\r\n        states: {\r\n            normal: {\r\n                on: {\r\n                    FAST_FORWARD: {\r\n                        target: 'skipping',\r\n                        actions: ['recordSpeed', 'setSpeed'],\r\n                    },\r\n                    SET_SPEED: {\r\n                        target: 'normal',\r\n                        actions: ['setSpeed'],\r\n                    },\r\n                },\r\n            },\r\n            skipping: {\r\n                on: {\r\n                    BACK_TO_NORMAL: {\r\n                        target: 'normal',\r\n                        actions: ['restoreSpeed'],\r\n                    },\r\n                    SET_SPEED: {\r\n                        target: 'normal',\r\n                        actions: ['setSpeed'],\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    }, {\r\n        actions: {\r\n            setSpeed: (ctx, event) => {\r\n                if ('payload' in event) {\r\n                    ctx.timer.setSpeed(event.payload.speed);\r\n                }\r\n            },\r\n            recordSpeed: o({\r\n                normalSpeed: (ctx) => ctx.timer.speed,\r\n            }),\r\n            restoreSpeed: (ctx) => {\r\n                ctx.timer.setSpeed(ctx.normalSpeed);\r\n            },\r\n        },\r\n    });\r\n    return v(speedMachine);\r\n}\n\nexport { createPlayerService, createSpeedService, discardPriorSnapshots };\n", "const rules = (blockClass) => [\r\n    `.${blockClass} { background: currentColor }`,\r\n    'noscript { display: none !important; }',\r\n];\n\nexport { rules as default };\n", "import { ReplayerEvents } from '../../../../types/dist/types.js';\n\nclass MediaManager {\r\n    constructor(options) {\r\n        this.mediaMap = new Map();\r\n        this.metadataCallbackMap = new Map();\r\n        this.warn = options.warn;\r\n        this.service = options.service;\r\n        this.speedService = options.speedService;\r\n        this.emitter = options.emitter;\r\n        this.getCurrentTime = options.getCurrentTime;\r\n        this.emitter.on(ReplayerEvents.Start, this.start.bind(this));\r\n        this.emitter.on(ReplayerEvents.SkipStart, this.start.bind(this));\r\n        this.emitter.on(ReplayerEvents.Pause, this.pause.bind(this));\r\n        this.emitter.on(ReplayerEvents.Finish, this.pause.bind(this));\r\n        this.speedService.subscribe(() => {\r\n            this.syncAllMediaElements();\r\n        });\r\n    }\r\n    syncAllMediaElements(options = { pause: false }) {\r\n        this.mediaMap.forEach((mediaState, target) => {\r\n            this.syncTargetWithState(target);\r\n            if (options.pause) {\r\n                target.pause();\r\n            }\r\n        });\r\n    }\r\n    start() {\r\n        this.syncAllMediaElements();\r\n    }\r\n    pause() {\r\n        this.syncAllMediaElements({ pause: true });\r\n    }\r\n    seekTo({ time, target, mediaState, }) {\r\n        if (mediaState.isPlaying) {\r\n            const differenceBetweenCurrentTimeAndMediaMutationTimestamp = time - mediaState.lastInteractionTimeOffset;\r\n            const mediaPlaybackOffset = (differenceBetweenCurrentTimeAndMediaMutationTimestamp / 1000) *\r\n                mediaState.playbackRate;\r\n            const duration = 'duration' in target && target.duration;\r\n            if (Number.isNaN(duration)) {\r\n                this.waitForMetadata(target);\r\n                return;\r\n            }\r\n            let seekToTime = mediaState.currentTimeAtLastInteraction + mediaPlaybackOffset;\r\n            if (target.loop &&\r\n                duration !== false) {\r\n                seekToTime = seekToTime % duration;\r\n            }\r\n            target.currentTime = seekToTime;\r\n        }\r\n        else {\r\n            target.pause();\r\n            target.currentTime = mediaState.currentTimeAtLastInteraction;\r\n        }\r\n    }\r\n    waitForMetadata(target) {\r\n        if (this.metadataCallbackMap.has(target))\r\n            return;\r\n        if (!('addEventListener' in target))\r\n            return;\r\n        const onLoadedMetadata = () => {\r\n            this.metadataCallbackMap.delete(target);\r\n            const mediaState = this.mediaMap.get(target);\r\n            if (!mediaState)\r\n                return;\r\n            this.seekTo({\r\n                time: this.getCurrentTime(),\r\n                target,\r\n                mediaState,\r\n            });\r\n        };\r\n        this.metadataCallbackMap.set(target, onLoadedMetadata);\r\n        target.addEventListener('loadedmetadata', onLoadedMetadata, {\r\n            once: true,\r\n        });\r\n    }\r\n    getMediaStateFromMutation({ target, timeOffset, mutation, }) {\r\n        var _a, _b, _c, _d, _e;\r\n        const lastState = this.mediaMap.get(target);\r\n        const { type, playbackRate, currentTime, muted, volume, loop } = mutation;\r\n        const isPlaying = type === 0 ||\r\n            (type !== 1 &&\r\n                ((lastState === null || lastState === void 0 ? void 0 : lastState.isPlaying) || target.getAttribute('autoplay') !== null));\r\n        const mediaState = {\r\n            isPlaying,\r\n            currentTimeAtLastInteraction: (_a = currentTime !== null && currentTime !== void 0 ? currentTime : lastState === null || lastState === void 0 ? void 0 : lastState.currentTimeAtLastInteraction) !== null && _a !== void 0 ? _a : 0,\r\n            lastInteractionTimeOffset: timeOffset,\r\n            playbackRate: (_b = playbackRate !== null && playbackRate !== void 0 ? playbackRate : lastState === null || lastState === void 0 ? void 0 : lastState.playbackRate) !== null && _b !== void 0 ? _b : 1,\r\n            volume: (_c = volume !== null && volume !== void 0 ? volume : lastState === null || lastState === void 0 ? void 0 : lastState.volume) !== null && _c !== void 0 ? _c : 1,\r\n            muted: (_d = muted !== null && muted !== void 0 ? muted : lastState === null || lastState === void 0 ? void 0 : lastState.muted) !== null && _d !== void 0 ? _d : target.getAttribute('muted') === null,\r\n            loop: (_e = loop !== null && loop !== void 0 ? loop : lastState === null || lastState === void 0 ? void 0 : lastState.loop) !== null && _e !== void 0 ? _e : target.getAttribute('loop') === null,\r\n        };\r\n        return mediaState;\r\n    }\r\n    syncTargetWithState(target) {\r\n        const mediaState = this.mediaMap.get(target);\r\n        if (!mediaState)\r\n            return;\r\n        const { muted, loop, volume, isPlaying } = mediaState;\r\n        const playerIsPaused = this.service.state.matches('paused');\r\n        const playbackRate = mediaState.playbackRate * this.speedService.state.context.timer.speed;\r\n        try {\r\n            this.seekTo({\r\n                time: this.getCurrentTime(),\r\n                target,\r\n                mediaState,\r\n            });\r\n            if (target.volume !== volume) {\r\n                target.volume = volume;\r\n            }\r\n            target.muted = muted;\r\n            target.loop = loop;\r\n            if (target.playbackRate !== playbackRate) {\r\n                target.playbackRate = playbackRate;\r\n            }\r\n            if (isPlaying && !playerIsPaused) {\r\n                void target.play();\r\n            }\r\n            else {\r\n                target.pause();\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.warn(`Failed to replay media interactions: ${error.message || error}`);\r\n        }\r\n    }\r\n    addMediaElements(node, timeOffset, mirror) {\r\n        if (!['AUDIO', 'VIDEO'].includes(node.nodeName))\r\n            return;\r\n        const target = node;\r\n        const serializedNode = mirror.getMeta(target);\r\n        if (!serializedNode || !('attributes' in serializedNode))\r\n            return;\r\n        const playerIsPaused = this.service.state.matches('paused');\r\n        const mediaAttributes = serializedNode.attributes;\r\n        let isPlaying = false;\r\n        if (mediaAttributes.rr_mediaState) {\r\n            isPlaying = mediaAttributes.rr_mediaState === 'played';\r\n        }\r\n        else {\r\n            isPlaying = target.getAttribute('autoplay') !== null;\r\n        }\r\n        if (isPlaying && playerIsPaused)\r\n            target.pause();\r\n        let playbackRate = 1;\r\n        if (typeof mediaAttributes.rr_mediaPlaybackRate === 'number') {\r\n            playbackRate = mediaAttributes.rr_mediaPlaybackRate;\r\n        }\r\n        let muted = false;\r\n        if (typeof mediaAttributes.rr_mediaMuted === 'boolean') {\r\n            muted = mediaAttributes.rr_mediaMuted;\r\n        }\r\n        else {\r\n            muted = target.getAttribute('muted') !== null;\r\n        }\r\n        let loop = false;\r\n        if (typeof mediaAttributes.rr_mediaLoop === 'boolean') {\r\n            loop = mediaAttributes.rr_mediaLoop;\r\n        }\r\n        else {\r\n            loop = target.getAttribute('loop') !== null;\r\n        }\r\n        let volume = 1;\r\n        if (typeof mediaAttributes.rr_mediaVolume === 'number') {\r\n            volume = mediaAttributes.rr_mediaVolume;\r\n        }\r\n        let currentTimeAtLastInteraction = 0;\r\n        if (typeof mediaAttributes.rr_mediaCurrentTime === 'number') {\r\n            currentTimeAtLastInteraction = mediaAttributes.rr_mediaCurrentTime;\r\n        }\r\n        this.mediaMap.set(target, {\r\n            isPlaying,\r\n            currentTimeAtLastInteraction,\r\n            lastInteractionTimeOffset: timeOffset,\r\n            playbackRate,\r\n            volume,\r\n            muted,\r\n            loop,\r\n        });\r\n        this.syncTargetWithState(target);\r\n    }\r\n    mediaMutation({ target, timeOffset, mutation, }) {\r\n        this.mediaMap.set(target, this.getMediaStateFromMutation({\r\n            target,\r\n            timeOffset,\r\n            mutation,\r\n        }));\r\n        this.syncTargetWithState(target);\r\n    }\r\n    isSupportedMediaElement(node) {\r\n        return ['AUDIO', 'VIDEO'].includes(node.nodeName);\r\n    }\r\n    reset() {\r\n        this.mediaMap.clear();\r\n    }\r\n}\n\nexport { MediaManager };\n", "import { __awaiter } from './../../../../ext/tslib/tslib.es6.js';\nimport { createCache, createMirror, rebuild, buildNodeWithSN, toLowerCase, NodeType } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { RRDocument, diff, createOrGetNode, getDefaultSN, buildFromDom, buildFromNode } from '../../../rrdom/es/rrdom.js';\nimport * as mitt$1 from './../../../../ext/mitt/dist/mitt.mjs.js';\nimport mitt$2 from './../../../../ext/mitt/dist/mitt.mjs.js';\nimport { polyfill } from './smoothscroll.js';\nimport { Timer } from './timer.js';\nimport { createPlayerService, createSpeedService } from './machine.js';\nimport { EventType, ReplayerEvents, IncrementalSource, MouseInteractions } from '../../../types/dist/types.js';\nimport { StyleSheetMirror, polyfill as polyfill$1, isSerializedIframe, hasShadowRoot, queueToResolveTrees, iterateResolveTree, uniqueTextMutations, getPositionsAndIndex, getNestedRule, getBaseDimension } from '../utils.js';\nimport rules from './styles/inject-style.js';\nimport canvasMutation from './canvas/index.js';\nimport { deserializeArg } from './canvas/deserialize-args.js';\nimport { MediaManager } from './media/index.js';\n\nconst SKIP_TIME_INTERVAL = 5 * 1000;\r\nconst mitt = mitt$2 || mitt$1;\r\nconst REPLAY_CONSOLE_PREFIX = '[replayer]';\r\nconst defaultMouseTailConfig = {\r\n    duration: 500,\r\n    lineCap: 'round',\r\n    lineWidth: 3,\r\n    strokeStyle: 'red',\r\n};\r\nfunction indicatesTouchDevice(e) {\r\n    return (e.type == EventType.IncrementalSnapshot &&\r\n        (e.data.source == IncrementalSource.TouchMove ||\r\n            (e.data.source == IncrementalSource.MouseInteraction &&\r\n                e.data.type == MouseInteractions.TouchStart)));\r\n}\r\nclass Replayer {\r\n    get timer() {\r\n        return this.service.state.context.timer;\r\n    }\r\n    constructor(events, config) {\r\n        this.usingVirtualDom = false;\r\n        this.virtualDom = new RRDocument();\r\n        this.mouseTail = null;\r\n        this.tailPositions = [];\r\n        this.emitter = mitt();\r\n        this.legacy_missingNodeRetryMap = {};\r\n        this.cache = createCache();\r\n        this.imageMap = new Map();\r\n        this.canvasEventMap = new Map();\r\n        this.mirror = createMirror();\r\n        this.styleMirror = new StyleSheetMirror();\r\n        this.firstFullSnapshot = null;\r\n        this.newDocumentQueue = [];\r\n        this.mousePos = null;\r\n        this.touchActive = null;\r\n        this.lastMouseDownEvent = null;\r\n        this.lastSelectionData = null;\r\n        this.constructedStyleMutations = [];\r\n        this.adoptedStyleSheets = [];\r\n        this.handleResize = (dimension) => {\r\n            this.iframe.style.display = 'inherit';\r\n            for (const el of [this.mouseTail, this.iframe]) {\r\n                if (!el) {\r\n                    continue;\r\n                }\r\n                el.setAttribute('width', String(dimension.width));\r\n                el.setAttribute('height', String(dimension.height));\r\n            }\r\n        };\r\n        this.applyEventsSynchronously = (events) => {\r\n            for (const event of events) {\r\n                switch (event.type) {\r\n                    case EventType.DomContentLoaded:\r\n                    case EventType.Load:\r\n                    case EventType.Custom:\r\n                        continue;\r\n                    case EventType.FullSnapshot:\r\n                    case EventType.Meta:\r\n                    case EventType.Plugin:\r\n                    case EventType.IncrementalSnapshot:\r\n                        break;\r\n                }\r\n                const castFn = this.getCastFn(event, true);\r\n                castFn();\r\n            }\r\n        };\r\n        this.getCastFn = (event, isSync = false) => {\r\n            let castFn;\r\n            switch (event.type) {\r\n                case EventType.DomContentLoaded:\r\n                case EventType.Load:\r\n                    break;\r\n                case EventType.Custom:\r\n                    castFn = () => {\r\n                        this.emitter.emit(ReplayerEvents.CustomEvent, event);\r\n                    };\r\n                    break;\r\n                case EventType.Meta:\r\n                    castFn = () => this.emitter.emit(ReplayerEvents.Resize, {\r\n                        width: event.data.width,\r\n                        height: event.data.height,\r\n                    });\r\n                    break;\r\n                case EventType.FullSnapshot:\r\n                    castFn = () => {\r\n                        var _a;\r\n                        if (this.firstFullSnapshot) {\r\n                            if (this.firstFullSnapshot === event) {\r\n                                this.firstFullSnapshot = true;\r\n                                return;\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.firstFullSnapshot = true;\r\n                        }\r\n                        this.mediaManager.reset();\r\n                        this.styleMirror.reset();\r\n                        this.rebuildFullSnapshot(event, isSync);\r\n                        (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo(event.data.initialOffset);\r\n                    };\r\n                    break;\r\n                case EventType.IncrementalSnapshot:\r\n                    castFn = () => {\r\n                        this.applyIncremental(event, isSync);\r\n                        if (isSync) {\r\n                            return;\r\n                        }\r\n                        if (event === this.nextUserInteractionEvent) {\r\n                            this.nextUserInteractionEvent = null;\r\n                            this.backToNormal();\r\n                        }\r\n                        if (this.config.skipInactive && !this.nextUserInteractionEvent) {\r\n                            for (const _event of this.service.state.context.events) {\r\n                                if (_event.timestamp <= event.timestamp) {\r\n                                    continue;\r\n                                }\r\n                                if (this.isUserInteraction(_event)) {\r\n                                    if (_event.delay - event.delay >\r\n                                        this.config.inactivePeriodThreshold *\r\n                                            this.speedService.state.context.timer.speed) {\r\n                                        this.nextUserInteractionEvent = _event;\r\n                                    }\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (this.nextUserInteractionEvent) {\r\n                                const skipTime = this.nextUserInteractionEvent.delay - event.delay;\r\n                                const payload = {\r\n                                    speed: Math.min(Math.round(skipTime / SKIP_TIME_INTERVAL), this.config.maxSpeed),\r\n                                };\r\n                                this.speedService.send({ type: 'FAST_FORWARD', payload });\r\n                                this.emitter.emit(ReplayerEvents.SkipStart, payload);\r\n                            }\r\n                        }\r\n                    };\r\n                    break;\r\n            }\r\n            const wrappedCastFn = () => {\r\n                if (castFn) {\r\n                    castFn();\r\n                }\r\n                for (const plugin of this.config.plugins || []) {\r\n                    if (plugin.handler)\r\n                        plugin.handler(event, isSync, { replayer: this });\r\n                }\r\n                this.service.send({ type: 'CAST_EVENT', payload: { event } });\r\n                const last_index = this.service.state.context.events.length - 1;\r\n                if (!this.config.liveMode &&\r\n                    event === this.service.state.context.events[last_index]) {\r\n                    const finish = () => {\r\n                        if (last_index < this.service.state.context.events.length - 1) {\r\n                            return;\r\n                        }\r\n                        this.backToNormal();\r\n                        this.service.send('END');\r\n                        this.emitter.emit(ReplayerEvents.Finish);\r\n                    };\r\n                    let finish_buffer = 50;\r\n                    if (event.type === EventType.IncrementalSnapshot &&\r\n                        event.data.source === IncrementalSource.MouseMove &&\r\n                        event.data.positions.length) {\r\n                        finish_buffer += Math.max(0, -event.data.positions[0].timeOffset);\r\n                    }\r\n                    setTimeout(finish, finish_buffer);\r\n                }\r\n                this.emitter.emit(ReplayerEvents.EventCast, event);\r\n            };\r\n            return wrappedCastFn;\r\n        };\r\n        if (!(config === null || config === void 0 ? void 0 : config.liveMode) && events.length < 2) {\r\n            throw new Error('Replayer need at least 2 events.');\r\n        }\r\n        const defaultConfig = {\r\n            speed: 1,\r\n            maxSpeed: 360,\r\n            root: document.body,\r\n            loadTimeout: 0,\r\n            skipInactive: false,\r\n            inactivePeriodThreshold: 10 * 1000,\r\n            showWarning: true,\r\n            showDebug: false,\r\n            blockClass: 'rr-block',\r\n            liveMode: false,\r\n            insertStyleRules: [],\r\n            triggerFocus: true,\r\n            UNSAFE_replayCanvas: false,\r\n            pauseAnimation: true,\r\n            mouseTail: defaultMouseTailConfig,\r\n            useVirtualDom: true,\r\n            logger: console,\r\n        };\r\n        this.config = Object.assign({}, defaultConfig, config);\r\n        this.handleResize = this.handleResize.bind(this);\r\n        this.getCastFn = this.getCastFn.bind(this);\r\n        this.applyEventsSynchronously = this.applyEventsSynchronously.bind(this);\r\n        this.emitter.on(ReplayerEvents.Resize, this.handleResize);\r\n        this.setupDom();\r\n        for (const plugin of this.config.plugins || []) {\r\n            if (plugin.getMirror)\r\n                plugin.getMirror({ nodeMirror: this.mirror });\r\n        }\r\n        this.emitter.on(ReplayerEvents.Flush, () => {\r\n            if (this.usingVirtualDom) {\r\n                const replayerHandler = {\r\n                    mirror: this.mirror,\r\n                    applyCanvas: (canvasEvent, canvasMutationData, target) => {\r\n                        void canvasMutation({\r\n                            event: canvasEvent,\r\n                            mutation: canvasMutationData,\r\n                            target,\r\n                            imageMap: this.imageMap,\r\n                            canvasEventMap: this.canvasEventMap,\r\n                            errorHandler: this.warnCanvasMutationFailed.bind(this),\r\n                        });\r\n                    },\r\n                    applyInput: this.applyInput.bind(this),\r\n                    applyScroll: this.applyScroll.bind(this),\r\n                    applyStyleSheetMutation: (data, styleSheet) => {\r\n                        if (data.source === IncrementalSource.StyleSheetRule)\r\n                            this.applyStyleSheetRule(data, styleSheet);\r\n                        else if (data.source === IncrementalSource.StyleDeclaration)\r\n                            this.applyStyleDeclaration(data, styleSheet);\r\n                    },\r\n                    afterAppend: (node, id) => {\r\n                        for (const plugin of this.config.plugins || []) {\r\n                            if (plugin.onBuild)\r\n                                plugin.onBuild(node, { id, replayer: this });\r\n                        }\r\n                    },\r\n                };\r\n                if (this.iframe.contentDocument)\r\n                    try {\r\n                        diff(this.iframe.contentDocument, this.virtualDom, replayerHandler, this.virtualDom.mirror);\r\n                    }\r\n                    catch (e) {\r\n                        console.warn(e);\r\n                    }\r\n                this.virtualDom.destroyTree();\r\n                this.usingVirtualDom = false;\r\n                if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n                    for (const key in this.legacy_missingNodeRetryMap) {\r\n                        try {\r\n                            const value = this.legacy_missingNodeRetryMap[key];\r\n                            const realNode = createOrGetNode(value.node, this.mirror, this.virtualDom.mirror);\r\n                            diff(realNode, value.node, replayerHandler, this.virtualDom.mirror);\r\n                            value.node = realNode;\r\n                        }\r\n                        catch (error) {\r\n                            this.warn(error);\r\n                        }\r\n                    }\r\n                }\r\n                this.constructedStyleMutations.forEach((data) => {\r\n                    this.applyStyleSheetMutation(data);\r\n                });\r\n                this.constructedStyleMutations = [];\r\n                this.adoptedStyleSheets.forEach((data) => {\r\n                    this.applyAdoptedStyleSheet(data);\r\n                });\r\n                this.adoptedStyleSheets = [];\r\n            }\r\n            if (this.mousePos) {\r\n                this.moveAndHover(this.mousePos.x, this.mousePos.y, this.mousePos.id, true, this.mousePos.debugData);\r\n                this.mousePos = null;\r\n            }\r\n            if (this.touchActive === true) {\r\n                this.mouse.classList.add('touch-active');\r\n            }\r\n            else if (this.touchActive === false) {\r\n                this.mouse.classList.remove('touch-active');\r\n            }\r\n            this.touchActive = null;\r\n            if (this.lastMouseDownEvent) {\r\n                const [target, event] = this.lastMouseDownEvent;\r\n                target.dispatchEvent(event);\r\n            }\r\n            this.lastMouseDownEvent = null;\r\n            if (this.lastSelectionData) {\r\n                this.applySelection(this.lastSelectionData);\r\n                this.lastSelectionData = null;\r\n            }\r\n        });\r\n        this.emitter.on(ReplayerEvents.PlayBack, () => {\r\n            this.firstFullSnapshot = null;\r\n            this.mirror.reset();\r\n            this.styleMirror.reset();\r\n            this.mediaManager.reset();\r\n        });\r\n        const timer = new Timer([], {\r\n            speed: this.config.speed,\r\n        });\r\n        this.service = createPlayerService({\r\n            events: events\r\n                .map((e) => {\r\n                if (config && config.unpackFn) {\r\n                    return config.unpackFn(e);\r\n                }\r\n                return e;\r\n            })\r\n                .sort((a1, a2) => a1.timestamp - a2.timestamp),\r\n            timer,\r\n            timeOffset: 0,\r\n            baselineTime: 0,\r\n            lastPlayedEvent: null,\r\n        }, {\r\n            getCastFn: this.getCastFn,\r\n            applyEventsSynchronously: this.applyEventsSynchronously,\r\n            emitter: this.emitter,\r\n        });\r\n        this.service.start();\r\n        this.service.subscribe((state) => {\r\n            this.emitter.emit(ReplayerEvents.StateChange, {\r\n                player: state,\r\n            });\r\n        });\r\n        this.speedService = createSpeedService({\r\n            normalSpeed: -1,\r\n            timer,\r\n        });\r\n        this.speedService.start();\r\n        this.speedService.subscribe((state) => {\r\n            this.emitter.emit(ReplayerEvents.StateChange, {\r\n                speed: state,\r\n            });\r\n        });\r\n        this.mediaManager = new MediaManager({\r\n            warn: this.warn.bind(this),\r\n            service: this.service,\r\n            speedService: this.speedService,\r\n            emitter: this.emitter,\r\n            getCurrentTime: this.getCurrentTime.bind(this),\r\n        });\r\n        const firstMeta = this.service.state.context.events.find((e) => e.type === EventType.Meta);\r\n        const firstFullsnapshot = this.service.state.context.events.find((e) => e.type === EventType.FullSnapshot);\r\n        if (firstMeta) {\r\n            const { width, height } = firstMeta.data;\r\n            setTimeout(() => {\r\n                this.emitter.emit(ReplayerEvents.Resize, {\r\n                    width,\r\n                    height,\r\n                });\r\n            }, 0);\r\n        }\r\n        if (firstFullsnapshot) {\r\n            setTimeout(() => {\r\n                var _a;\r\n                if (this.firstFullSnapshot) {\r\n                    return;\r\n                }\r\n                this.firstFullSnapshot = firstFullsnapshot;\r\n                this.rebuildFullSnapshot(firstFullsnapshot);\r\n                (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo(firstFullsnapshot.data.initialOffset);\r\n            }, 1);\r\n        }\r\n        if (this.service.state.context.events.find(indicatesTouchDevice)) {\r\n            this.mouse.classList.add('touch-device');\r\n        }\r\n    }\r\n    on(event, handler) {\r\n        this.emitter.on(event, handler);\r\n        return this;\r\n    }\r\n    off(event, handler) {\r\n        this.emitter.off(event, handler);\r\n        return this;\r\n    }\r\n    setConfig(config) {\r\n        Object.keys(config).forEach((key) => {\r\n            config[key];\r\n            this.config[key] = config[key];\r\n        });\r\n        if (!this.config.skipInactive) {\r\n            this.backToNormal();\r\n        }\r\n        if (typeof config.speed !== 'undefined') {\r\n            this.speedService.send({\r\n                type: 'SET_SPEED',\r\n                payload: {\r\n                    speed: config.speed,\r\n                },\r\n            });\r\n        }\r\n        if (typeof config.mouseTail !== 'undefined') {\r\n            if (config.mouseTail === false) {\r\n                if (this.mouseTail) {\r\n                    this.mouseTail.style.display = 'none';\r\n                }\r\n            }\r\n            else {\r\n                if (!this.mouseTail) {\r\n                    this.mouseTail = document.createElement('canvas');\r\n                    this.mouseTail.width = Number.parseFloat(this.iframe.width);\r\n                    this.mouseTail.height = Number.parseFloat(this.iframe.height);\r\n                    this.mouseTail.classList.add('replayer-mouse-tail');\r\n                    this.wrapper.insertBefore(this.mouseTail, this.iframe);\r\n                }\r\n                this.mouseTail.style.display = 'inherit';\r\n            }\r\n        }\r\n    }\r\n    getMetaData() {\r\n        const firstEvent = this.service.state.context.events[0];\r\n        const lastEvent = this.service.state.context.events[this.service.state.context.events.length - 1];\r\n        return {\r\n            startTime: firstEvent.timestamp,\r\n            endTime: lastEvent.timestamp,\r\n            totalTime: lastEvent.timestamp - firstEvent.timestamp,\r\n        };\r\n    }\r\n    getCurrentTime() {\r\n        return this.timer.timeOffset + this.getTimeOffset();\r\n    }\r\n    getTimeOffset() {\r\n        const { baselineTime, events } = this.service.state.context;\r\n        return baselineTime - events[0].timestamp;\r\n    }\r\n    getMirror() {\r\n        return this.mirror;\r\n    }\r\n    play(timeOffset = 0) {\r\n        var _a, _b;\r\n        if (this.service.state.matches('paused')) {\r\n            this.service.send({ type: 'PLAY', payload: { timeOffset } });\r\n        }\r\n        else {\r\n            this.service.send({ type: 'PAUSE' });\r\n            this.service.send({ type: 'PLAY', payload: { timeOffset } });\r\n        }\r\n        (_b = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0]) === null || _b === void 0 ? void 0 : _b.classList.remove('rrweb-paused');\r\n        this.emitter.emit(ReplayerEvents.Start);\r\n    }\r\n    pause(timeOffset) {\r\n        var _a, _b;\r\n        if (timeOffset === undefined && this.service.state.matches('playing')) {\r\n            this.service.send({ type: 'PAUSE' });\r\n        }\r\n        if (typeof timeOffset === 'number') {\r\n            this.play(timeOffset);\r\n            this.service.send({ type: 'PAUSE' });\r\n        }\r\n        (_b = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0]) === null || _b === void 0 ? void 0 : _b.classList.add('rrweb-paused');\r\n        this.emitter.emit(ReplayerEvents.Pause);\r\n    }\r\n    resume(timeOffset = 0) {\r\n        this.warn(`The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface.`);\r\n        this.play(timeOffset);\r\n        this.emitter.emit(ReplayerEvents.Resume);\r\n    }\r\n    destroy() {\r\n        this.pause();\r\n        this.mirror.reset();\r\n        this.styleMirror.reset();\r\n        this.mediaManager.reset();\r\n        this.config.root.removeChild(this.wrapper);\r\n        this.emitter.emit(ReplayerEvents.Destroy);\r\n    }\r\n    startLive(baselineTime) {\r\n        this.service.send({ type: 'TO_LIVE', payload: { baselineTime } });\r\n    }\r\n    addEvent(rawEvent) {\r\n        const event = this.config.unpackFn\r\n            ? this.config.unpackFn(rawEvent)\r\n            : rawEvent;\r\n        if (indicatesTouchDevice(event)) {\r\n            this.mouse.classList.add('touch-device');\r\n        }\r\n        void Promise.resolve().then(() => this.service.send({ type: 'ADD_EVENT', payload: { event } }));\r\n    }\r\n    enableInteract() {\r\n        this.iframe.setAttribute('scrolling', 'auto');\r\n        this.iframe.style.pointerEvents = 'auto';\r\n    }\r\n    disableInteract() {\r\n        this.iframe.setAttribute('scrolling', 'no');\r\n        this.iframe.style.pointerEvents = 'none';\r\n    }\r\n    resetCache() {\r\n        this.cache = createCache();\r\n    }\r\n    setupDom() {\r\n        this.wrapper = document.createElement('div');\r\n        this.wrapper.classList.add('replayer-wrapper');\r\n        this.config.root.appendChild(this.wrapper);\r\n        this.mouse = document.createElement('div');\r\n        this.mouse.classList.add('replayer-mouse');\r\n        this.wrapper.appendChild(this.mouse);\r\n        if (this.config.mouseTail !== false) {\r\n            this.mouseTail = document.createElement('canvas');\r\n            this.mouseTail.classList.add('replayer-mouse-tail');\r\n            this.mouseTail.style.display = 'inherit';\r\n            this.wrapper.appendChild(this.mouseTail);\r\n        }\r\n        this.iframe = document.createElement('iframe');\r\n        const attributes = ['allow-same-origin'];\r\n        if (this.config.UNSAFE_replayCanvas) {\r\n            attributes.push('allow-scripts');\r\n        }\r\n        this.iframe.style.display = 'none';\r\n        this.iframe.setAttribute('sandbox', attributes.join(' '));\r\n        this.disableInteract();\r\n        this.wrapper.appendChild(this.iframe);\r\n        if (this.iframe.contentWindow && this.iframe.contentDocument) {\r\n            polyfill(this.iframe.contentWindow, this.iframe.contentDocument);\r\n            polyfill$1(this.iframe.contentWindow);\r\n        }\r\n    }\r\n    rebuildFullSnapshot(event, isSync = false) {\r\n        if (!this.iframe.contentDocument) {\r\n            return this.warn('Looks like your replayer has been destroyed.');\r\n        }\r\n        if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n            this.warn('Found unresolved missing node map', this.legacy_missingNodeRetryMap);\r\n        }\r\n        this.legacy_missingNodeRetryMap = {};\r\n        const collected = [];\r\n        const afterAppend = (builtNode, id) => {\r\n            this.collectIframeAndAttachDocument(collected, builtNode);\r\n            if (this.mediaManager.isSupportedMediaElement(builtNode)) {\r\n                const { events } = this.service.state.context;\r\n                this.mediaManager.addMediaElements(builtNode, event.timestamp - events[0].timestamp, this.mirror);\r\n            }\r\n            for (const plugin of this.config.plugins || []) {\r\n                if (plugin.onBuild)\r\n                    plugin.onBuild(builtNode, {\r\n                        id,\r\n                        replayer: this,\r\n                    });\r\n            }\r\n        };\r\n        if (this.usingVirtualDom) {\r\n            this.virtualDom.destroyTree();\r\n            this.usingVirtualDom = false;\r\n        }\r\n        this.mirror.reset();\r\n        rebuild(event.data.node, {\r\n            doc: this.iframe.contentDocument,\r\n            afterAppend,\r\n            cache: this.cache,\r\n            mirror: this.mirror,\r\n        });\r\n        afterAppend(this.iframe.contentDocument, event.data.node.id);\r\n        for (const { mutationInQueue, builtNode } of collected) {\r\n            this.attachDocumentToIframe(mutationInQueue, builtNode);\r\n            this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n        }\r\n        const { documentElement, head } = this.iframe.contentDocument;\r\n        this.insertStyleRules(documentElement, head);\r\n        if (!this.service.state.matches('playing')) {\r\n            this.iframe.contentDocument\r\n                .getElementsByTagName('html')[0]\r\n                .classList.add('rrweb-paused');\r\n        }\r\n        this.emitter.emit(ReplayerEvents.FullsnapshotRebuilded, event);\r\n        if (!isSync) {\r\n            this.waitForStylesheetLoad();\r\n        }\r\n        if (this.config.UNSAFE_replayCanvas) {\r\n            void this.preloadAllImages();\r\n        }\r\n    }\r\n    insertStyleRules(documentElement, head) {\r\n        var _a;\r\n        const injectStylesRules = rules(this.config.blockClass).concat(this.config.insertStyleRules);\r\n        if (this.config.pauseAnimation) {\r\n            injectStylesRules.push('html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }');\r\n        }\r\n        if (this.usingVirtualDom) {\r\n            const styleEl = this.virtualDom.createElement('style');\r\n            this.virtualDom.mirror.add(styleEl, getDefaultSN(styleEl, this.virtualDom.unserializedId));\r\n            documentElement.insertBefore(styleEl, head);\r\n            styleEl.rules.push({\r\n                source: IncrementalSource.StyleSheetRule,\r\n                adds: injectStylesRules.map((cssText, index) => ({\r\n                    rule: cssText,\r\n                    index,\r\n                })),\r\n            });\r\n        }\r\n        else {\r\n            const styleEl = document.createElement('style');\r\n            documentElement.insertBefore(styleEl, head);\r\n            for (let idx = 0; idx < injectStylesRules.length; idx++) {\r\n                (_a = styleEl.sheet) === null || _a === void 0 ? void 0 : _a.insertRule(injectStylesRules[idx], idx);\r\n            }\r\n        }\r\n    }\r\n    attachDocumentToIframe(mutation, iframeEl) {\r\n        const mirror = this.usingVirtualDom\r\n            ? this.virtualDom.mirror\r\n            : this.mirror;\r\n        const collected = [];\r\n        const afterAppend = (builtNode, id) => {\r\n            this.collectIframeAndAttachDocument(collected, builtNode);\r\n            const sn = mirror.getMeta(builtNode);\r\n            if ((sn === null || sn === void 0 ? void 0 : sn.type) === NodeType.Element &&\r\n                (sn === null || sn === void 0 ? void 0 : sn.tagName.toUpperCase()) === 'HTML') {\r\n                const { documentElement, head } = iframeEl.contentDocument;\r\n                this.insertStyleRules(documentElement, head);\r\n            }\r\n            if (this.usingVirtualDom)\r\n                return;\r\n            for (const plugin of this.config.plugins || []) {\r\n                if (plugin.onBuild)\r\n                    plugin.onBuild(builtNode, {\r\n                        id,\r\n                        replayer: this,\r\n                    });\r\n            }\r\n        };\r\n        buildNodeWithSN(mutation.node, {\r\n            doc: iframeEl.contentDocument,\r\n            mirror: mirror,\r\n            hackCss: true,\r\n            skipChild: false,\r\n            afterAppend,\r\n            cache: this.cache,\r\n        });\r\n        afterAppend(iframeEl.contentDocument, mutation.node.id);\r\n        for (const { mutationInQueue, builtNode } of collected) {\r\n            this.attachDocumentToIframe(mutationInQueue, builtNode);\r\n            this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n        }\r\n    }\r\n    collectIframeAndAttachDocument(collected, builtNode) {\r\n        if (isSerializedIframe(builtNode, this.mirror)) {\r\n            const mutationInQueue = this.newDocumentQueue.find((m) => m.parentId === this.mirror.getId(builtNode));\r\n            if (mutationInQueue) {\r\n                collected.push({\r\n                    mutationInQueue,\r\n                    builtNode: builtNode,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    waitForStylesheetLoad() {\r\n        var _a;\r\n        const head = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.head;\r\n        if (head) {\r\n            const unloadSheets = new Set();\r\n            let timer;\r\n            let beforeLoadState = this.service.state;\r\n            const stateHandler = () => {\r\n                beforeLoadState = this.service.state;\r\n            };\r\n            this.emitter.on(ReplayerEvents.Start, stateHandler);\r\n            this.emitter.on(ReplayerEvents.Pause, stateHandler);\r\n            const unsubscribe = () => {\r\n                this.emitter.off(ReplayerEvents.Start, stateHandler);\r\n                this.emitter.off(ReplayerEvents.Pause, stateHandler);\r\n            };\r\n            head\r\n                .querySelectorAll('link[rel=\"stylesheet\"]')\r\n                .forEach((css) => {\r\n                if (!css.sheet) {\r\n                    unloadSheets.add(css);\r\n                    css.addEventListener('load', () => {\r\n                        unloadSheets.delete(css);\r\n                        if (unloadSheets.size === 0 && timer !== -1) {\r\n                            if (beforeLoadState.matches('playing')) {\r\n                                this.play(this.getCurrentTime());\r\n                            }\r\n                            this.emitter.emit(ReplayerEvents.LoadStylesheetEnd);\r\n                            if (timer) {\r\n                                clearTimeout(timer);\r\n                            }\r\n                            unsubscribe();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            if (unloadSheets.size > 0) {\r\n                this.service.send({ type: 'PAUSE' });\r\n                this.emitter.emit(ReplayerEvents.LoadStylesheetStart);\r\n                timer = setTimeout(() => {\r\n                    if (beforeLoadState.matches('playing')) {\r\n                        this.play(this.getCurrentTime());\r\n                    }\r\n                    timer = -1;\r\n                    unsubscribe();\r\n                }, this.config.loadTimeout);\r\n            }\r\n        }\r\n    }\r\n    preloadAllImages() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.service.state;\r\n            const stateHandler = () => {\r\n                this.service.state;\r\n            };\r\n            this.emitter.on(ReplayerEvents.Start, stateHandler);\r\n            this.emitter.on(ReplayerEvents.Pause, stateHandler);\r\n            const promises = [];\r\n            for (const event of this.service.state.context.events) {\r\n                if (event.type === EventType.IncrementalSnapshot &&\r\n                    event.data.source === IncrementalSource.CanvasMutation) {\r\n                    promises.push(this.deserializeAndPreloadCanvasEvents(event.data, event));\r\n                    const commands = 'commands' in event.data ? event.data.commands : [event.data];\r\n                    commands.forEach((c) => {\r\n                        this.preloadImages(c, event);\r\n                    });\r\n                }\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n    preloadImages(data, event) {\r\n        if (data.property === 'drawImage' &&\r\n            typeof data.args[0] === 'string' &&\r\n            !this.imageMap.has(event)) {\r\n            const canvas = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            const imgd = ctx === null || ctx === void 0 ? void 0 : ctx.createImageData(canvas.width, canvas.height);\r\n            imgd === null || imgd === void 0 ? void 0 : imgd.data;\r\n            JSON.parse(data.args[0]);\r\n            ctx === null || ctx === void 0 ? void 0 : ctx.putImageData(imgd, 0, 0);\r\n        }\r\n    }\r\n    deserializeAndPreloadCanvasEvents(data, event) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.canvasEventMap.has(event)) {\r\n                const status = {\r\n                    isUnchanged: true,\r\n                };\r\n                if ('commands' in data) {\r\n                    const commands = yield Promise.all(data.commands.map((c) => __awaiter(this, void 0, void 0, function* () {\r\n                        const args = yield Promise.all(c.args.map(deserializeArg(this.imageMap, null, status)));\r\n                        return Object.assign(Object.assign({}, c), { args });\r\n                    })));\r\n                    if (status.isUnchanged === false)\r\n                        this.canvasEventMap.set(event, Object.assign(Object.assign({}, data), { commands }));\r\n                }\r\n                else {\r\n                    const args = yield Promise.all(data.args.map(deserializeArg(this.imageMap, null, status)));\r\n                    if (status.isUnchanged === false)\r\n                        this.canvasEventMap.set(event, Object.assign(Object.assign({}, data), { args }));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    applyIncremental(e, isSync) {\r\n        var _a, _b, _c;\r\n        const { data: d } = e;\r\n        switch (d.source) {\r\n            case IncrementalSource.Mutation: {\r\n                try {\r\n                    this.applyMutation(d, isSync);\r\n                }\r\n                catch (error) {\r\n                    this.warn(`Exception in mutation ${error.message || error}`, d);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Drag:\r\n            case IncrementalSource.TouchMove:\r\n            case IncrementalSource.MouseMove:\r\n                if (isSync) {\r\n                    const lastPosition = d.positions[d.positions.length - 1];\r\n                    this.mousePos = {\r\n                        x: lastPosition.x,\r\n                        y: lastPosition.y,\r\n                        id: lastPosition.id,\r\n                        debugData: d,\r\n                    };\r\n                }\r\n                else {\r\n                    d.positions.forEach((p) => {\r\n                        const action = {\r\n                            doAction: () => {\r\n                                this.moveAndHover(p.x, p.y, p.id, isSync, d);\r\n                            },\r\n                            delay: p.timeOffset +\r\n                                e.timestamp -\r\n                                this.service.state.context.baselineTime,\r\n                        };\r\n                        this.timer.addAction(action);\r\n                    });\r\n                    this.timer.addAction({\r\n                        doAction() {\r\n                        },\r\n                        delay: e.delay - ((_a = d.positions[0]) === null || _a === void 0 ? void 0 : _a.timeOffset),\r\n                    });\r\n                }\r\n                break;\r\n            case IncrementalSource.MouseInteraction: {\r\n                if (d.id === -1) {\r\n                    break;\r\n                }\r\n                const event = new Event(toLowerCase(MouseInteractions[d.type]));\r\n                const target = this.mirror.getNode(d.id);\r\n                if (!target) {\r\n                    return this.debugNodeNotFound(d, d.id);\r\n                }\r\n                this.emitter.emit(ReplayerEvents.MouseInteraction, {\r\n                    type: d.type,\r\n                    target,\r\n                });\r\n                const { triggerFocus } = this.config;\r\n                switch (d.type) {\r\n                    case MouseInteractions.Blur:\r\n                        if ('blur' in target) {\r\n                            target.blur();\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.Focus:\r\n                        if (triggerFocus && target.focus) {\r\n                            target.focus({\r\n                                preventScroll: true,\r\n                            });\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.Click:\r\n                    case MouseInteractions.TouchStart:\r\n                    case MouseInteractions.TouchEnd:\r\n                    case MouseInteractions.MouseDown:\r\n                    case MouseInteractions.MouseUp:\r\n                        if (isSync) {\r\n                            if (d.type === MouseInteractions.TouchStart) {\r\n                                this.touchActive = true;\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchEnd) {\r\n                                this.touchActive = false;\r\n                            }\r\n                            if (d.type === MouseInteractions.MouseDown) {\r\n                                this.lastMouseDownEvent = [target, event];\r\n                            }\r\n                            else if (d.type === MouseInteractions.MouseUp) {\r\n                                this.lastMouseDownEvent = null;\r\n                            }\r\n                            this.mousePos = {\r\n                                x: d.x || 0,\r\n                                y: d.y || 0,\r\n                                id: d.id,\r\n                                debugData: d,\r\n                            };\r\n                        }\r\n                        else {\r\n                            if (d.type === MouseInteractions.TouchStart) {\r\n                                this.tailPositions.length = 0;\r\n                            }\r\n                            this.moveAndHover(d.x || 0, d.y || 0, d.id, isSync, d);\r\n                            if (d.type === MouseInteractions.Click) {\r\n                                this.mouse.classList.remove('active');\r\n                                void this.mouse.offsetWidth;\r\n                                this.mouse.classList.add('active');\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchStart) {\r\n                                void this.mouse.offsetWidth;\r\n                                this.mouse.classList.add('touch-active');\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchEnd) {\r\n                                this.mouse.classList.remove('touch-active');\r\n                            }\r\n                            else {\r\n                                target.dispatchEvent(event);\r\n                            }\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.TouchCancel:\r\n                        if (isSync) {\r\n                            this.touchActive = false;\r\n                        }\r\n                        else {\r\n                            this.mouse.classList.remove('touch-active');\r\n                        }\r\n                        break;\r\n                    default:\r\n                        target.dispatchEvent(event);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Scroll: {\r\n                if (d.id === -1) {\r\n                    break;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.scrollData = d;\r\n                    break;\r\n                }\r\n                this.applyScroll(d, isSync);\r\n                break;\r\n            }\r\n            case IncrementalSource.ViewportResize:\r\n                this.emitter.emit(ReplayerEvents.Resize, {\r\n                    width: d.width,\r\n                    height: d.height,\r\n                });\r\n                break;\r\n            case IncrementalSource.Input: {\r\n                if (d.id === -1) {\r\n                    break;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.inputData = d;\r\n                    break;\r\n                }\r\n                this.applyInput(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.MediaInteraction: {\r\n                const target = this.usingVirtualDom\r\n                    ? this.virtualDom.mirror.getNode(d.id)\r\n                    : this.mirror.getNode(d.id);\r\n                if (!target) {\r\n                    return this.debugNodeNotFound(d, d.id);\r\n                }\r\n                const mediaEl = target;\r\n                const { events } = this.service.state.context;\r\n                this.mediaManager.mediaMutation({\r\n                    target: mediaEl,\r\n                    timeOffset: e.timestamp - events[0].timestamp,\r\n                    mutation: d,\r\n                });\r\n                break;\r\n            }\r\n            case IncrementalSource.StyleSheetRule:\r\n            case IncrementalSource.StyleDeclaration: {\r\n                if (this.usingVirtualDom) {\r\n                    if (d.styleId)\r\n                        this.constructedStyleMutations.push(d);\r\n                    else if (d.id)\r\n                        (_b = this.virtualDom.mirror.getNode(d.id)) === null || _b === void 0 ? void 0 : _b.rules.push(d);\r\n                }\r\n                else\r\n                    this.applyStyleSheetMutation(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.CanvasMutation: {\r\n                if (!this.config.UNSAFE_replayCanvas) {\r\n                    return;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.canvasMutations.push({\r\n                        event: e,\r\n                        mutation: d,\r\n                    });\r\n                }\r\n                else {\r\n                    const target = this.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    void canvasMutation({\r\n                        event: e,\r\n                        mutation: d,\r\n                        target: target,\r\n                        imageMap: this.imageMap,\r\n                        canvasEventMap: this.canvasEventMap,\r\n                        errorHandler: this.warnCanvasMutationFailed.bind(this),\r\n                    });\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Font: {\r\n                try {\r\n                    const fontFace = new FontFace(d.family, d.buffer\r\n                        ? new Uint8Array(JSON.parse(d.fontSource))\r\n                        : d.fontSource, d.descriptors);\r\n                    (_c = this.iframe.contentDocument) === null || _c === void 0 ? void 0 : _c.fonts.add(fontFace);\r\n                }\r\n                catch (error) {\r\n                    this.warn(error);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Selection: {\r\n                if (isSync) {\r\n                    this.lastSelectionData = d;\r\n                    break;\r\n                }\r\n                this.applySelection(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.AdoptedStyleSheet: {\r\n                if (this.usingVirtualDom)\r\n                    this.adoptedStyleSheets.push(d);\r\n                else\r\n                    this.applyAdoptedStyleSheet(d);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    applyMutation(d, isSync) {\r\n        if (this.config.useVirtualDom && !this.usingVirtualDom && isSync) {\r\n            this.usingVirtualDom = true;\r\n            buildFromDom(this.iframe.contentDocument, this.mirror, this.virtualDom);\r\n            if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n                for (const key in this.legacy_missingNodeRetryMap) {\r\n                    try {\r\n                        const value = this.legacy_missingNodeRetryMap[key];\r\n                        const virtualNode = buildFromNode(value.node, this.virtualDom, this.mirror);\r\n                        if (virtualNode)\r\n                            value.node = virtualNode;\r\n                    }\r\n                    catch (error) {\r\n                        this.warn(error);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        const mirror = this.usingVirtualDom ? this.virtualDom.mirror : this.mirror;\r\n        d.removes = d.removes.filter((mutation) => {\r\n            if (!mirror.getNode(mutation.id)) {\r\n                this.warnNodeNotFound(d, mutation.id);\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        d.removes.forEach((mutation) => {\r\n            var _a;\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                return;\r\n            }\r\n            let parent = mirror.getNode(mutation.parentId);\r\n            if (!parent) {\r\n                return this.warnNodeNotFound(d, mutation.parentId);\r\n            }\r\n            if (mutation.isShadow && hasShadowRoot(parent)) {\r\n                parent = parent.shadowRoot;\r\n            }\r\n            mirror.removeNodeFromMap(target);\r\n            if (parent)\r\n                try {\r\n                    parent.removeChild(target);\r\n                    if (this.usingVirtualDom &&\r\n                        target.nodeName === '#text' &&\r\n                        parent.nodeName === 'STYLE' &&\r\n                        ((_a = parent.rules) === null || _a === void 0 ? void 0 : _a.length) > 0)\r\n                        parent.rules = [];\r\n                }\r\n                catch (error) {\r\n                    if (error instanceof DOMException) {\r\n                        this.warn('parent could not remove child in mutation', parent, target, d);\r\n                    }\r\n                    else {\r\n                        throw error;\r\n                    }\r\n                }\r\n        });\r\n        const legacy_missingNodeMap = Object.assign({}, this.legacy_missingNodeRetryMap);\r\n        const queue = [];\r\n        const nextNotInDOM = (mutation) => {\r\n            let next = null;\r\n            if (mutation.nextId) {\r\n                next = mirror.getNode(mutation.nextId);\r\n            }\r\n            if (mutation.nextId !== null &&\r\n                mutation.nextId !== undefined &&\r\n                mutation.nextId !== -1 &&\r\n                !next) {\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        const appendNode = (mutation) => {\r\n            var _a, _b;\r\n            if (!this.iframe.contentDocument) {\r\n                return this.warn('Looks like your replayer has been destroyed.');\r\n            }\r\n            let parent = mirror.getNode(mutation.parentId);\r\n            if (!parent) {\r\n                if (mutation.node.type === NodeType.Document) {\r\n                    return this.newDocumentQueue.push(mutation);\r\n                }\r\n                return queue.push(mutation);\r\n            }\r\n            if (mutation.node.isShadow) {\r\n                if (!hasShadowRoot(parent)) {\r\n                    parent.attachShadow({ mode: 'open' });\r\n                    parent = parent.shadowRoot;\r\n                }\r\n                else\r\n                    parent = parent.shadowRoot;\r\n            }\r\n            let previous = null;\r\n            let next = null;\r\n            if (mutation.previousId) {\r\n                previous = mirror.getNode(mutation.previousId);\r\n            }\r\n            if (mutation.nextId) {\r\n                next = mirror.getNode(mutation.nextId);\r\n            }\r\n            if (nextNotInDOM(mutation)) {\r\n                return queue.push(mutation);\r\n            }\r\n            if (mutation.node.rootId && !mirror.getNode(mutation.node.rootId)) {\r\n                return;\r\n            }\r\n            const targetDoc = mutation.node.rootId\r\n                ? mirror.getNode(mutation.node.rootId)\r\n                : this.usingVirtualDom\r\n                    ? this.virtualDom\r\n                    : this.iframe.contentDocument;\r\n            if (isSerializedIframe(parent, mirror)) {\r\n                this.attachDocumentToIframe(mutation, parent);\r\n                return;\r\n            }\r\n            const afterAppend = (node, id) => {\r\n                if (this.usingVirtualDom)\r\n                    return;\r\n                for (const plugin of this.config.plugins || []) {\r\n                    if (plugin.onBuild)\r\n                        plugin.onBuild(node, { id, replayer: this });\r\n                }\r\n            };\r\n            const target = buildNodeWithSN(mutation.node, {\r\n                doc: targetDoc,\r\n                mirror: mirror,\r\n                skipChild: true,\r\n                hackCss: true,\r\n                cache: this.cache,\r\n                afterAppend,\r\n            });\r\n            if (mutation.previousId === -1 || mutation.nextId === -1) {\r\n                legacy_missingNodeMap[mutation.node.id] = {\r\n                    node: target,\r\n                    mutation,\r\n                };\r\n                return;\r\n            }\r\n            const parentSn = mirror.getMeta(parent);\r\n            if (parentSn &&\r\n                parentSn.type === NodeType.Element &&\r\n                parentSn.tagName === 'textarea' &&\r\n                mutation.node.type === NodeType.Text) {\r\n                const childNodeArray = Array.isArray(parent.childNodes)\r\n                    ? parent.childNodes\r\n                    : Array.from(parent.childNodes);\r\n                for (const c of childNodeArray) {\r\n                    if (c.nodeType === parent.TEXT_NODE) {\r\n                        parent.removeChild(c);\r\n                    }\r\n                }\r\n            }\r\n            else if ((parentSn === null || parentSn === void 0 ? void 0 : parentSn.type) === NodeType.Document) {\r\n                const parentDoc = parent;\r\n                if (mutation.node.type === NodeType.DocumentType &&\r\n                    ((_a = parentDoc.childNodes[0]) === null || _a === void 0 ? void 0 : _a.nodeType) === Node.DOCUMENT_TYPE_NODE)\r\n                    parentDoc.removeChild(parentDoc.childNodes[0]);\r\n                if (target.nodeName === 'HTML' && parentDoc.documentElement)\r\n                    parentDoc.removeChild(parentDoc.documentElement);\r\n            }\r\n            if (previous && previous.nextSibling && previous.nextSibling.parentNode) {\r\n                parent.insertBefore(target, previous.nextSibling);\r\n            }\r\n            else if (next && next.parentNode) {\r\n                parent.contains(next)\r\n                    ? parent.insertBefore(target, next)\r\n                    : parent.insertBefore(target, null);\r\n            }\r\n            else {\r\n                parent.appendChild(target);\r\n            }\r\n            afterAppend(target, mutation.node.id);\r\n            if (this.usingVirtualDom &&\r\n                target.nodeName === '#text' &&\r\n                parent.nodeName === 'STYLE' &&\r\n                ((_b = parent.rules) === null || _b === void 0 ? void 0 : _b.length) > 0)\r\n                parent.rules = [];\r\n            if (isSerializedIframe(target, this.mirror)) {\r\n                const targetId = this.mirror.getId(target);\r\n                const mutationInQueue = this.newDocumentQueue.find((m) => m.parentId === targetId);\r\n                if (mutationInQueue) {\r\n                    this.attachDocumentToIframe(mutationInQueue, target);\r\n                    this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n                }\r\n            }\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(legacy_missingNodeMap, parent, target, mutation);\r\n            }\r\n        };\r\n        d.adds.forEach((mutation) => {\r\n            appendNode(mutation);\r\n        });\r\n        const startTime = Date.now();\r\n        while (queue.length) {\r\n            const resolveTrees = queueToResolveTrees(queue);\r\n            queue.length = 0;\r\n            if (Date.now() - startTime > 500) {\r\n                this.warn('Timeout in the loop, please check the resolve tree data:', resolveTrees);\r\n                break;\r\n            }\r\n            for (const tree of resolveTrees) {\r\n                const parent = mirror.getNode(tree.value.parentId);\r\n                if (!parent) {\r\n                    this.debug('Drop resolve tree since there is no parent for the root node.', tree);\r\n                }\r\n                else {\r\n                    iterateResolveTree(tree, (mutation) => {\r\n                        appendNode(mutation);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        if (Object.keys(legacy_missingNodeMap).length) {\r\n            Object.assign(this.legacy_missingNodeRetryMap, legacy_missingNodeMap);\r\n        }\r\n        uniqueTextMutations(d.texts).forEach((mutation) => {\r\n            var _a;\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                if (d.removes.find((r) => r.id === mutation.id)) {\r\n                    return;\r\n                }\r\n                return this.warnNodeNotFound(d, mutation.id);\r\n            }\r\n            target.textContent = mutation.value;\r\n            if (this.usingVirtualDom) {\r\n                const parent = target.parentNode;\r\n                if (((_a = parent === null || parent === void 0 ? void 0 : parent.rules) === null || _a === void 0 ? void 0 : _a.length) > 0)\r\n                    parent.rules = [];\r\n            }\r\n        });\r\n        d.attributes.forEach((mutation) => {\r\n            var _a;\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                if (d.removes.find((r) => r.id === mutation.id)) {\r\n                    return;\r\n                }\r\n                return this.warnNodeNotFound(d, mutation.id);\r\n            }\r\n            for (const attributeName in mutation.attributes) {\r\n                if (typeof attributeName === 'string') {\r\n                    const value = mutation.attributes[attributeName];\r\n                    if (value === null) {\r\n                        target.removeAttribute(attributeName);\r\n                    }\r\n                    else if (typeof value === 'string') {\r\n                        try {\r\n                            if (attributeName === '_cssText' &&\r\n                                (target.nodeName === 'LINK' || target.nodeName === 'STYLE')) {\r\n                                try {\r\n                                    const newSn = mirror.getMeta(target);\r\n                                    Object.assign(newSn.attributes, mutation.attributes);\r\n                                    const newNode = buildNodeWithSN(newSn, {\r\n                                        doc: target.ownerDocument,\r\n                                        mirror: mirror,\r\n                                        skipChild: true,\r\n                                        hackCss: true,\r\n                                        cache: this.cache,\r\n                                    });\r\n                                    const siblingNode = target.nextSibling;\r\n                                    const parentNode = target.parentNode;\r\n                                    if (newNode && parentNode) {\r\n                                        parentNode.removeChild(target);\r\n                                        parentNode.insertBefore(newNode, siblingNode);\r\n                                        mirror.replace(mutation.id, newNode);\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                catch (e) {\r\n                                }\r\n                            }\r\n                            if (attributeName === 'value' && target.nodeName === 'TEXTAREA') {\r\n                                const textarea = target;\r\n                                textarea.childNodes.forEach((c) => textarea.removeChild(c));\r\n                                const tn = (_a = target.ownerDocument) === null || _a === void 0 ? void 0 : _a.createTextNode(value);\r\n                                if (tn) {\r\n                                    textarea.appendChild(tn);\r\n                                }\r\n                            }\r\n                            else {\r\n                                target.setAttribute(attributeName, value);\r\n                            }\r\n                        }\r\n                        catch (error) {\r\n                            this.warn('An error occurred may due to the checkout feature.', error);\r\n                        }\r\n                    }\r\n                    else if (attributeName === 'style') {\r\n                        const styleValues = value;\r\n                        const targetEl = target;\r\n                        for (const s in styleValues) {\r\n                            if (styleValues[s] === false) {\r\n                                targetEl.style.removeProperty(s);\r\n                            }\r\n                            else if (styleValues[s] instanceof Array) {\r\n                                const svp = styleValues[s];\r\n                                targetEl.style.setProperty(s, svp[0], svp[1]);\r\n                            }\r\n                            else {\r\n                                const svs = styleValues[s];\r\n                                targetEl.style.setProperty(s, svs);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    applyScroll(d, isSync) {\r\n        var _a, _b;\r\n        const target = this.mirror.getNode(d.id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(d, d.id);\r\n        }\r\n        const sn = this.mirror.getMeta(target);\r\n        if (target === this.iframe.contentDocument) {\r\n            (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo({\r\n                top: d.y,\r\n                left: d.x,\r\n                behavior: isSync ? 'auto' : 'smooth',\r\n            });\r\n        }\r\n        else if ((sn === null || sn === void 0 ? void 0 : sn.type) === NodeType.Document) {\r\n            (_b = target.defaultView) === null || _b === void 0 ? void 0 : _b.scrollTo({\r\n                top: d.y,\r\n                left: d.x,\r\n                behavior: isSync ? 'auto' : 'smooth',\r\n            });\r\n        }\r\n        else {\r\n            try {\r\n                target.scrollTo({\r\n                    top: d.y,\r\n                    left: d.x,\r\n                    behavior: isSync ? 'auto' : 'smooth',\r\n                });\r\n            }\r\n            catch (error) {\r\n            }\r\n        }\r\n    }\r\n    applyInput(d) {\r\n        const target = this.mirror.getNode(d.id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(d, d.id);\r\n        }\r\n        try {\r\n            target.checked = d.isChecked;\r\n            target.value = d.text;\r\n        }\r\n        catch (error) {\r\n        }\r\n    }\r\n    applySelection(d) {\r\n        try {\r\n            const selectionSet = new Set();\r\n            const ranges = d.ranges.map(({ start, startOffset, end, endOffset }) => {\r\n                const startContainer = this.mirror.getNode(start);\r\n                const endContainer = this.mirror.getNode(end);\r\n                if (!startContainer || !endContainer)\r\n                    return;\r\n                const result = new Range();\r\n                result.setStart(startContainer, startOffset);\r\n                result.setEnd(endContainer, endOffset);\r\n                const doc = startContainer.ownerDocument;\r\n                const selection = doc === null || doc === void 0 ? void 0 : doc.getSelection();\r\n                selection && selectionSet.add(selection);\r\n                return {\r\n                    range: result,\r\n                    selection,\r\n                };\r\n            });\r\n            selectionSet.forEach((s) => s.removeAllRanges());\r\n            ranges.forEach((r) => { var _a; return r && ((_a = r.selection) === null || _a === void 0 ? void 0 : _a.addRange(r.range)); });\r\n        }\r\n        catch (error) {\r\n        }\r\n    }\r\n    applyStyleSheetMutation(data) {\r\n        var _a;\r\n        let styleSheet = null;\r\n        if (data.styleId)\r\n            styleSheet = this.styleMirror.getStyle(data.styleId);\r\n        else if (data.id)\r\n            styleSheet =\r\n                ((_a = this.mirror.getNode(data.id)) === null || _a === void 0 ? void 0 : _a.sheet) || null;\r\n        if (!styleSheet)\r\n            return;\r\n        if (data.source === IncrementalSource.StyleSheetRule)\r\n            this.applyStyleSheetRule(data, styleSheet);\r\n        else if (data.source === IncrementalSource.StyleDeclaration)\r\n            this.applyStyleDeclaration(data, styleSheet);\r\n    }\r\n    applyStyleSheetRule(data, styleSheet) {\r\n        var _a, _b, _c, _d;\r\n        (_a = data.adds) === null || _a === void 0 ? void 0 : _a.forEach(({ rule, index: nestedIndex }) => {\r\n            try {\r\n                if (Array.isArray(nestedIndex)) {\r\n                    const { positions, index } = getPositionsAndIndex(nestedIndex);\r\n                    const nestedRule = getNestedRule(styleSheet.cssRules, positions);\r\n                    nestedRule.insertRule(rule, index);\r\n                }\r\n                else {\r\n                    const index = nestedIndex === undefined\r\n                        ? undefined\r\n                        : Math.min(nestedIndex, styleSheet.cssRules.length);\r\n                    styleSheet === null || styleSheet === void 0 ? void 0 : styleSheet.insertRule(rule, index);\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        (_b = data.removes) === null || _b === void 0 ? void 0 : _b.forEach(({ index: nestedIndex }) => {\r\n            try {\r\n                if (Array.isArray(nestedIndex)) {\r\n                    const { positions, index } = getPositionsAndIndex(nestedIndex);\r\n                    const nestedRule = getNestedRule(styleSheet.cssRules, positions);\r\n                    nestedRule.deleteRule(index || 0);\r\n                }\r\n                else {\r\n                    styleSheet === null || styleSheet === void 0 ? void 0 : styleSheet.deleteRule(nestedIndex);\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        if (data.replace)\r\n            try {\r\n                void ((_c = styleSheet.replace) === null || _c === void 0 ? void 0 : _c.call(styleSheet, data.replace));\r\n            }\r\n            catch (e) {\r\n            }\r\n        if (data.replaceSync)\r\n            try {\r\n                (_d = styleSheet.replaceSync) === null || _d === void 0 ? void 0 : _d.call(styleSheet, data.replaceSync);\r\n            }\r\n            catch (e) {\r\n            }\r\n    }\r\n    applyStyleDeclaration(data, styleSheet) {\r\n        if (data.set) {\r\n            const rule = getNestedRule(styleSheet.rules, data.index);\r\n            rule.style.setProperty(data.set.property, data.set.value, data.set.priority);\r\n        }\r\n        if (data.remove) {\r\n            const rule = getNestedRule(styleSheet.rules, data.index);\r\n            rule.style.removeProperty(data.remove.property);\r\n        }\r\n    }\r\n    applyAdoptedStyleSheet(data) {\r\n        var _a;\r\n        const targetHost = this.mirror.getNode(data.id);\r\n        if (!targetHost)\r\n            return;\r\n        (_a = data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n            var _a;\r\n            let newStyleSheet = null;\r\n            let hostWindow = null;\r\n            if (hasShadowRoot(targetHost))\r\n                hostWindow = ((_a = targetHost.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) || null;\r\n            else if (targetHost.nodeName === '#document')\r\n                hostWindow = targetHost.defaultView;\r\n            if (!hostWindow)\r\n                return;\r\n            try {\r\n                newStyleSheet = new hostWindow.CSSStyleSheet();\r\n                this.styleMirror.add(newStyleSheet, style.styleId);\r\n                this.applyStyleSheetRule({\r\n                    source: IncrementalSource.StyleSheetRule,\r\n                    adds: style.rules,\r\n                }, newStyleSheet);\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        const MAX_RETRY_TIME = 10;\r\n        let count = 0;\r\n        const adoptStyleSheets = (targetHost, styleIds) => {\r\n            const stylesToAdopt = styleIds\r\n                .map((styleId) => this.styleMirror.getStyle(styleId))\r\n                .filter((style) => style !== null);\r\n            if (hasShadowRoot(targetHost))\r\n                targetHost.shadowRoot.adoptedStyleSheets =\r\n                    stylesToAdopt;\r\n            else if (targetHost.nodeName === '#document')\r\n                targetHost.adoptedStyleSheets = stylesToAdopt;\r\n            if (stylesToAdopt.length !== styleIds.length && count < MAX_RETRY_TIME) {\r\n                setTimeout(() => adoptStyleSheets(targetHost, styleIds), 0 + 100 * count);\r\n                count++;\r\n            }\r\n        };\r\n        adoptStyleSheets(targetHost, data.styleIds);\r\n    }\r\n    legacy_resolveMissingNode(map, parent, target, targetMutation) {\r\n        const { previousId, nextId } = targetMutation;\r\n        const previousInMap = previousId && map[previousId];\r\n        const nextInMap = nextId && map[nextId];\r\n        if (previousInMap) {\r\n            const { node, mutation } = previousInMap;\r\n            parent.insertBefore(node, target);\r\n            delete map[mutation.node.id];\r\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\r\n            }\r\n        }\r\n        if (nextInMap) {\r\n            const { node, mutation } = nextInMap;\r\n            parent.insertBefore(node, target.nextSibling);\r\n            delete map[mutation.node.id];\r\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\r\n            }\r\n        }\r\n    }\r\n    moveAndHover(x, y, id, isSync, debugData) {\r\n        const target = this.mirror.getNode(id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(debugData, id);\r\n        }\r\n        const base = getBaseDimension(target, this.iframe);\r\n        const _x = x * base.absoluteScale + base.x;\r\n        const _y = y * base.absoluteScale + base.y;\r\n        this.mouse.style.left = `${_x}px`;\r\n        this.mouse.style.top = `${_y}px`;\r\n        if (!isSync) {\r\n            this.drawMouseTail({ x: _x, y: _y });\r\n        }\r\n        this.hoverElements(target);\r\n    }\r\n    drawMouseTail(position) {\r\n        if (!this.mouseTail) {\r\n            return;\r\n        }\r\n        const { lineCap, lineWidth, strokeStyle, duration } = this.config.mouseTail === true\r\n            ? defaultMouseTailConfig\r\n            : Object.assign({}, defaultMouseTailConfig, this.config.mouseTail);\r\n        const draw = () => {\r\n            if (!this.mouseTail) {\r\n                return;\r\n            }\r\n            const ctx = this.mouseTail.getContext('2d');\r\n            if (!ctx || !this.tailPositions.length) {\r\n                return;\r\n            }\r\n            ctx.clearRect(0, 0, this.mouseTail.width, this.mouseTail.height);\r\n            ctx.beginPath();\r\n            ctx.lineWidth = lineWidth;\r\n            ctx.lineCap = lineCap;\r\n            ctx.strokeStyle = strokeStyle;\r\n            ctx.moveTo(this.tailPositions[0].x, this.tailPositions[0].y);\r\n            this.tailPositions.forEach((p) => ctx.lineTo(p.x, p.y));\r\n            ctx.stroke();\r\n        };\r\n        this.tailPositions.push(position);\r\n        draw();\r\n        setTimeout(() => {\r\n            this.tailPositions = this.tailPositions.filter((p) => p !== position);\r\n            draw();\r\n        }, duration / this.speedService.state.context.timer.speed);\r\n    }\r\n    hoverElements(el) {\r\n        var _a;\r\n        (_a = (this.lastHoveredRootNode || this.iframe.contentDocument)) === null || _a === void 0 ? void 0 : _a.querySelectorAll('.\\\\:hover').forEach((hoveredEl) => {\r\n            hoveredEl.classList.remove(':hover');\r\n        });\r\n        this.lastHoveredRootNode = el.getRootNode();\r\n        let currentEl = el;\r\n        while (currentEl) {\r\n            if (currentEl.classList) {\r\n                currentEl.classList.add(':hover');\r\n            }\r\n            currentEl = currentEl.parentElement;\r\n        }\r\n    }\r\n    isUserInteraction(event) {\r\n        if (event.type !== EventType.IncrementalSnapshot) {\r\n            return false;\r\n        }\r\n        return (event.data.source > IncrementalSource.Mutation &&\r\n            event.data.source <= IncrementalSource.Input);\r\n    }\r\n    backToNormal() {\r\n        this.nextUserInteractionEvent = null;\r\n        if (this.speedService.state.matches('normal')) {\r\n            return;\r\n        }\r\n        this.speedService.send({ type: 'BACK_TO_NORMAL' });\r\n        this.emitter.emit(ReplayerEvents.SkipEnd, {\r\n            speed: this.speedService.state.context.normalSpeed,\r\n        });\r\n    }\r\n    warnNodeNotFound(d, id) {\r\n        this.warn(`Node with id '${id}' not found. `, d);\r\n    }\r\n    warnCanvasMutationFailed(d, error) {\r\n        this.warn(`Has error on canvas update`, error, 'canvas mutation:', d);\r\n    }\r\n    debugNodeNotFound(d, id) {\r\n        this.debug(`Node with id '${id}' not found. `, d);\r\n    }\r\n    warn(...args) {\r\n        if (!this.config.showWarning) {\r\n            return;\r\n        }\r\n        this.config.logger.warn(REPLAY_CONSOLE_PREFIX, ...args);\r\n    }\r\n    debug(...args) {\r\n        if (!this.config.showDebug) {\r\n            return;\r\n        }\r\n        this.config.logger.log(REPLAY_CONSOLE_PREFIX, ...args);\r\n    }\r\n}\n\nexport { Replayer };\n", "export { addCustomEvent, freezePage } from '../index.js';\nexport { pack } from '../packer/pack.js';\nexport { unpack } from '../packer/unpack.js';\nexport { PLUGIN_NAME, getRecordConsolePlugin } from '../plugins/console/record/index.js';\nexport { getReplayConsolePlugin } from '../plugins/console/replay/index.js';\nexport { default as record } from '../record/index.js';\nexport { default as canvasMutation } from '../replay/canvas/index.js';\nexport { EventType, IncrementalSource, MouseInteractions, ReplayerEvents } from '../../../types/dist/types.js';\nexport { Replayer } from '../replay/index.js';\nimport * as utils from '../utils.js';\nexport { utils };\nexport { _mirror as mirror } from '../utils.js';\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionReplayClient = void 0;\nconst rrweb = require(\"rrweb\");\nconst client_core_1 = require(\"@statsig/client-core\");\nconst TIMEOUT_MS = 1000 * 60 * 60 * 4; // 4 hours\nconst CHECKOUT_WINDOW_MS = 1000 * 30; // 30 seconds\nclass SessionReplayClient {\n    constructor() {\n        this._startTimestamp = null;\n        this._endTimestamp = null;\n    }\n    record(callback, config, stopCallback, keepRollingWindow = false) {\n        if ((0, client_core_1._getDocumentSafe)() == null) {\n            return;\n        }\n        // Always reset session id and tracking fields for a new recording\n        this._startTimestamp = null;\n        this._endTimestamp = null;\n        this._stopCallback = stopCallback;\n        if (this._stopFn) {\n            return;\n        }\n        const emit = (event, isCheckOut) => {\n            var _a, _b, _c;\n            if (keepRollingWindow) {\n                // Reset start at each checkout\n                this._startTimestamp = isCheckOut\n                    ? event.timestamp\n                    : (_a = this._startTimestamp) !== null && _a !== void 0 ? _a : event.timestamp;\n            }\n            else {\n                // Reset start only for the first event\n                (_b = this._startTimestamp) !== null && _b !== void 0 ? _b : (this._startTimestamp = event.timestamp);\n            }\n            // Always keep a running end timestamp\n            this._endTimestamp = event.timestamp;\n            let clickCount = 0;\n            // Count clicks only for events representing a click\n            if (_isClickEvent(event)) {\n                clickCount++;\n            }\n            callback(Object.assign(Object.assign({}, event), { eventIndex: 0 }), {\n                startTime: this._startTimestamp,\n                endTime: this._endTimestamp,\n                clickCount,\n            }, isCheckOut !== null && isCheckOut !== void 0 ? isCheckOut : false);\n            if (this._endTimestamp - this._startTimestamp > TIMEOUT_MS) {\n                (_c = this._stopFn) === null || _c === void 0 ? void 0 : _c.call(this);\n                if (this._stopCallback) {\n                    this._stopCallback();\n                }\n            }\n        };\n        this._stopFn = _minifiedAwareRecord(emit, config, keepRollingWindow);\n    }\n    stop() {\n        if (this._stopFn) {\n            this._stopFn();\n            this._stopFn = undefined;\n        }\n    }\n    isRecording() {\n        return this._stopFn != null;\n    }\n}\nexports.SessionReplayClient = SessionReplayClient;\n/**\n * We do a simple concat of rrweb during minification.\n * This function ensures we handle both \"npm\" and \"<script ..>\" install options.\n */\nfunction _minifiedAwareRecord(emit, config, keepRollingWindow) {\n    const record = typeof rrweb === 'function' ? rrweb : rrweb.record;\n    if (keepRollingWindow) {\n        return record(Object.assign(Object.assign({}, config), { emit, checkoutEveryNms: CHECKOUT_WINDOW_MS }));\n    }\n    else {\n        return record(Object.assign(Object.assign({}, config), { emit }));\n    }\n}\nfunction _isClickEvent(event) {\n    // we use the raw number so we can support the minified rrweb file.\n    return (event.type === 3 && // rrweb.EventType.IncrementalSnapshot &&\n        event.data.source === 2 && // rrweb.IncrementalSource.MouseInteraction &&\n        (event.data.type === 2 /* rrweb.MouseInteractions.Click */ ||\n            event.data.type === 4) /* rrweb.MouseInteractions.DbClick */);\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._appendSlicedMetadata = exports._slicePayload = exports._makeLoggableRrwebEvent = exports.MAX_LOGS = exports.MAX_INDIVIDUAL_EVENT_BYTES = exports.REPLAY_ENQUEUE_TRIGGER_BYTES = void 0;\nconst client_core_1 = require(\"@statsig/client-core\");\nconst REPLAY_SLICE_BYTES = 1024 * 1024; // 1 MB\nexports.REPLAY_ENQUEUE_TRIGGER_BYTES = 1024 * 10; // 10 KB\nexports.MAX_INDIVIDUAL_EVENT_BYTES = 1024 * 1024 * 10; // 10 MB\nexports.MAX_LOGS = 10000; // 10K logs\nfunction _makeLoggableRrwebEvent(slice, payload, sessionID, data) {\n    const metadata = {\n        session_start_ts: String(data.startTime),\n        session_end_ts: String(data.endTime),\n        clicks_captured_cumulative: String(data.clickCount),\n        rrweb_events: slice,\n        rrweb_payload_size: String(payload.length),\n        session_replay_sdk_version: client_core_1.SDK_VERSION,\n    };\n    return {\n        eventName: 'statsig::session_recording',\n        value: sessionID,\n        metadata,\n    };\n}\nexports._makeLoggableRrwebEvent = _makeLoggableRrwebEvent;\nfunction _slicePayload(payload) {\n    const parts = [];\n    for (let i = 0; i < payload.length; i += REPLAY_SLICE_BYTES) {\n        parts.push(payload.slice(i, i + REPLAY_SLICE_BYTES));\n    }\n    return parts;\n}\nexports._slicePayload = _slicePayload;\nfunction _appendSlicedMetadata(metadata, slicedID, sliceIndex, sliceCount, sliceByteSize) {\n    metadata.sliced_id = slicedID;\n    metadata.slice_index = String(sliceIndex);\n    metadata.slice_count = String(sliceCount);\n    metadata.slice_byte_size = String(sliceByteSize);\n}\nexports._appendSlicedMetadata = _appendSlicedMetadata;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._fastApproxSizeOf = void 0;\nconst CURLY_AND_SQUARE_BRACKET_SIZE = 2; // [] for array, {} for object\nconst APPROX_ADDITIONAL_SIZE = 1; // additional size for comma and stuff\nconst _fastApproxSizeOf = (obj, max) => {\n    let size = 0;\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        const value = obj[key];\n        size += key.length;\n        if (typeof value === 'object' && value !== null) {\n            size += (0, exports._fastApproxSizeOf)(value, max) + CURLY_AND_SQUARE_BRACKET_SIZE;\n        }\n        else {\n            size += String(value).length + APPROX_ADDITIONAL_SIZE;\n        }\n        if (size >= max) {\n            // exit early if we've exceeded the max\n            return size;\n        }\n    }\n    return size;\n};\nexports._fastApproxSizeOf = _fastApproxSizeOf;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionReplayBase = exports.forceStartRecording = exports.startRecording = exports.stopRecording = void 0;\nconst client_core_1 = require(\"@statsig/client-core\");\nconst SessionReplayClient_1 = require(\"./SessionReplayClient\");\nconst SessionReplayUtils_1 = require(\"./SessionReplayUtils\");\nconst SizeOf_1 = require(\"./SizeOf\");\nfunction stopRecording(sdkKey) {\n    var _a;\n    (_a = _getInstanceFromSdkKey(sdkKey)) === null || _a === void 0 ? void 0 : _a.stopRecording();\n}\nexports.stopRecording = stopRecording;\nfunction startRecording(sdkKey) {\n    var _a;\n    (_a = _getInstanceFromSdkKey(sdkKey)) === null || _a === void 0 ? void 0 : _a.startRecording();\n}\nexports.startRecording = startRecording;\nfunction forceStartRecording(sdkKey) {\n    var _a;\n    (_a = _getInstanceFromSdkKey(sdkKey)) === null || _a === void 0 ? void 0 : _a.forceStartRecording();\n}\nexports.forceStartRecording = forceStartRecording;\nfunction _getInstanceFromSdkKey(sdkKey) {\n    var _a, _b;\n    const inst = sdkKey == null\n        ? (0, client_core_1._getStatsigGlobal)().firstSRInstance\n        : (_b = (_a = (0, client_core_1._getStatsigGlobal)()) === null || _a === void 0 ? void 0 : _a.srInstances) === null || _b === void 0 ? void 0 : _b[sdkKey];\n    return inst instanceof SessionReplayBase ? inst : null;\n}\nclass SessionReplayBase {\n    constructor(client, options) {\n        this._sessionData = {\n            startTime: -1,\n            endTime: 0,\n            clickCount: 0,\n        };\n        this._events = [];\n        this._wasStopped = false;\n        this._currentEventIndex = 0;\n        this._totalLogs = 0;\n        this._client = client;\n        this._options = options;\n        const { sdkKey, errorBoundary } = this._client.getContext();\n        this._errorBoundary = errorBoundary;\n        this._errorBoundary.wrap(this);\n        this._replayer = new SessionReplayClient_1.SessionReplayClient();\n        this._client.$on('pre_shutdown', () => this._shutdown());\n        this._client.on('session_expired', () => {\n            this._shutdown('session_expired');\n        });\n        if (!(0, client_core_1._isServerEnv)()) {\n            const statsigGlobal = (0, client_core_1._getStatsigGlobal)();\n            statsigGlobal.srInstances = Object.assign(Object.assign({}, statsigGlobal.srInstances), { [sdkKey]: this });\n            if (!statsigGlobal.firstSRInstance) {\n                statsigGlobal.firstSRInstance = this;\n            }\n        }\n        this._currentSessionID = this._getSessionIdFromClient();\n        this._subscribeToVisibilityChanged();\n    }\n    forceStartRecording() {\n        this._wasStopped = false;\n        this._attemptToStartRecording(true);\n    }\n    stopRecording() {\n        this._wasStopped = true;\n        this._shutdown();\n    }\n    startRecording() {\n        var _a;\n        this._wasStopped = false;\n        this._attemptToStartRecording((_a = this._options) === null || _a === void 0 ? void 0 : _a.forceRecording);\n    }\n    isRecording() {\n        return this._replayer.isRecording();\n    }\n    _logRecording(endReason) {\n        if (this._events.length === 0) {\n            return;\n        }\n        endReason = (0, client_core_1._isUnloading)() ? 'is_leaving_page' : endReason;\n        this._logRecordingWithSessionID(this._currentSessionID, endReason);\n    }\n    _onVisibilityChanged(visibility) {\n        if (visibility !== 'background') {\n            return;\n        }\n        this._logRecording();\n        this._client.flush().catch((e) => {\n            this._errorBoundary.logError('SR::visibility', e);\n        });\n    }\n    _subscribeToVisibilityChanged() {\n        // Note: this exists as a separate function to ensure closure scope only contains `sdkKey`\n        const { sdkKey } = this._client.getContext();\n        (0, client_core_1._subscribeToVisiblityChanged)((vis) => {\n            var _a, _b;\n            const inst = (_b = (_a = (0, client_core_1._getStatsigGlobal)()) === null || _a === void 0 ? void 0 : _a.srInstances) === null || _b === void 0 ? void 0 : _b[sdkKey];\n            if (inst instanceof SessionReplayBase) {\n                inst._onVisibilityChanged(vis);\n            }\n        });\n    }\n    _logRecordingWithSessionID(sessionID, endReason) {\n        const data = this._sessionData;\n        if (this._events.length === 0) {\n            return;\n        }\n        const payload = JSON.stringify(this._events);\n        const parts = (0, SessionReplayUtils_1._slicePayload)(payload);\n        const slicedID = parts.length > 1 ? (0, client_core_1.getUUID)() : null;\n        for (let i = 0; i < parts.length; i++) {\n            const slice = parts[i];\n            const event = (0, SessionReplayUtils_1._makeLoggableRrwebEvent)(slice, payload, sessionID, data);\n            if (slicedID != null) {\n                (0, SessionReplayUtils_1._appendSlicedMetadata)(event.metadata, slicedID, i, parts.length, slice.length);\n            }\n            if (endReason) {\n                event.metadata[endReason] = 'true';\n            }\n            this._totalLogs++;\n            this._client.logEvent(event);\n            if (slicedID != null) {\n                this._client.flush().catch((e) => {\n                    client_core_1.Log.error(e);\n                });\n            }\n        }\n        this._events = [];\n        if (this._totalLogs > SessionReplayUtils_1.MAX_LOGS) {\n            this._shutdown();\n        }\n    }\n    _bumpSessionIdleTimerAndLogRecording() {\n        this._getSessionIdFromClient();\n        this._logRecording();\n    }\n    _getSessionIdFromClient() {\n        return this._client.getContext().session.data.sessionID;\n    }\n    _shutdownImpl(endReason) {\n        if (this._replayer.isRecording()) {\n            this._replayer.stop();\n            client_core_1.StatsigMetadataProvider.add({ isRecordingSession: 'false' });\n        }\n        if (this._events.length === 0) {\n            // only reset if session expired otherwise we might start recording again\n            if (endReason === 'session_expired') {\n                this._currentEventIndex = 0;\n                this._sessionData = this._makeEmptySessionData();\n            }\n            return;\n        }\n        this._logRecording(endReason);\n        // only reset if session expired otherwise we might start recording again\n        if (endReason === 'session_expired') {\n            this._currentEventIndex = 0;\n            this._sessionData = this._makeEmptySessionData();\n        }\n    }\n    _makeEmptySessionData() {\n        return {\n            startTime: -1,\n            endTime: 0,\n            clickCount: 0,\n        };\n    }\n    _onRecordingEvent(event, data) {\n        // The session has expired so we should stop recording\n        if (this._currentSessionID !== this._getSessionIdFromClient()) {\n            this._shutdown('session_expired');\n            return;\n        }\n        if (this._totalLogs >= SessionReplayUtils_1.MAX_LOGS) {\n            this._shutdown();\n            return;\n        }\n        event.eventIndex = this._currentEventIndex++;\n        // Update the session data\n        this._sessionData.clickCount += data.clickCount;\n        this._sessionData.startTime =\n            this._sessionData.startTime === -1\n                ? data.startTime\n                : Math.min(this._sessionData.startTime, data.startTime);\n        this._sessionData.endTime = Math.max(this._sessionData.endTime, data.endTime);\n        const eventApproxSize = (0, SizeOf_1._fastApproxSizeOf)(event, SessionReplayUtils_1.MAX_INDIVIDUAL_EVENT_BYTES);\n        if (eventApproxSize > SessionReplayUtils_1.MAX_INDIVIDUAL_EVENT_BYTES) {\n            client_core_1.Log.warn(`SessionReplay event is too large (~${eventApproxSize} bytes) and will not be logged`, event);\n            return;\n        }\n        const approxArraySizeBefore = (0, SizeOf_1._fastApproxSizeOf)(this._events, SessionReplayUtils_1.REPLAY_ENQUEUE_TRIGGER_BYTES);\n        this._events.push(event);\n        if (approxArraySizeBefore + eventApproxSize <\n            SessionReplayUtils_1.REPLAY_ENQUEUE_TRIGGER_BYTES) {\n            return;\n        }\n        if ((0, client_core_1._isCurrentlyVisible)()) {\n            this._bumpSessionIdleTimerAndLogRecording();\n        }\n        else {\n            this._logRecording();\n        }\n    }\n}\nexports.SessionReplayBase = SessionReplayBase;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionReplay = exports.runStatsigSessionReplay = exports.StatsigSessionReplayPlugin = void 0;\nconst client_core_1 = require(\"@statsig/client-core\");\nconst SessionReplayBase_1 = require(\"./SessionReplayBase\");\nconst SessionReplayUtils_1 = require(\"./SessionReplayUtils\");\nclass StatsigSessionReplayPlugin {\n    constructor(options) {\n        this.options = options;\n        this.__plugin = 'session-replay';\n    }\n    bind(client) {\n        runStatsigSessionReplay(client, this.options);\n    }\n}\nexports.StatsigSessionReplayPlugin = StatsigSessionReplayPlugin;\nfunction runStatsigSessionReplay(client, options) {\n    new SessionReplay(client, options);\n}\nexports.runStatsigSessionReplay = runStatsigSessionReplay;\nclass SessionReplay extends SessionReplayBase_1.SessionReplayBase {\n    constructor(client, options) {\n        var _a;\n        super(client, options);\n        this._client.$on('values_updated', () => {\n            var _a;\n            if (!this._wasStopped) {\n                this._attemptToStartRecording((_a = this._options) === null || _a === void 0 ? void 0 : _a.forceRecording);\n            }\n        });\n        this._attemptToStartRecording((_a = this._options) === null || _a === void 0 ? void 0 : _a.forceRecording);\n    }\n    _shutdown(endReason) {\n        super._shutdownImpl(endReason);\n    }\n    _attemptToStartRecording(force = false) {\n        var _a, _b;\n        if (this._totalLogs >= SessionReplayUtils_1.MAX_LOGS) {\n            return;\n        }\n        const values = this._client.getContext().values;\n        if ((values === null || values === void 0 ? void 0 : values.recording_blocked) === true) {\n            this._shutdown();\n            return;\n        }\n        if (!force && (values === null || values === void 0 ? void 0 : values.can_record_session) !== true) {\n            this._shutdown();\n            return;\n        }\n        if ((values === null || values === void 0 ? void 0 : values.passes_session_recording_targeting) === false) {\n            this._shutdown();\n            return;\n        }\n        if (this._replayer.isRecording()) {\n            return;\n        }\n        this._wasStopped = false;\n        client_core_1.StatsigMetadataProvider.add({ isRecordingSession: 'true' });\n        this._replayer.record((e, d) => this._onRecordingEvent(e, d), (_b = (_a = this._options) === null || _a === void 0 ? void 0 : _a.rrwebConfig) !== null && _b !== void 0 ? _b : {}, () => {\n            this._shutdown();\n        });\n    }\n}\nexports.SessionReplay = SessionReplay;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TriggeredSessionReplay = exports.runStatsigTriggeredSessionReplay = exports.StatsigTriggeredSessionReplayPlugin = void 0;\nconst client_core_1 = require(\"@statsig/client-core\");\nconst SessionReplayBase_1 = require(\"./SessionReplayBase\");\nconst SessionReplayUtils_1 = require(\"./SessionReplayUtils\");\nclass StatsigTriggeredSessionReplayPlugin {\n    constructor(options) {\n        this.options = options;\n        this.__plugin = 'triggered-session-replay';\n    }\n    bind(client) {\n        runStatsigTriggeredSessionReplay(client, this.options);\n    }\n}\nexports.StatsigTriggeredSessionReplayPlugin = StatsigTriggeredSessionReplayPlugin;\nfunction runStatsigTriggeredSessionReplay(client, options) {\n    new TriggeredSessionReplay(client, options);\n}\nexports.runStatsigTriggeredSessionReplay = runStatsigTriggeredSessionReplay;\nclass TriggeredSessionReplay extends SessionReplayBase_1.SessionReplayBase {\n    constructor(client, options) {\n        var _a;\n        super(client, options);\n        this._runningEventData = [];\n        this._isActiveRecording = false;\n        this._subscribeToClientEvents(options);\n        if (options === null || options === void 0 ? void 0 : options.autoStartRecording) {\n            this._attemptToStartRecording((_a = this._options) === null || _a === void 0 ? void 0 : _a.forceRecording);\n        }\n        else if (options === null || options === void 0 ? void 0 : options.keepRollingWindow) {\n            this._attemptToStartRollingWindow();\n        }\n    }\n    _subscribeToClientEvents(options) {\n        this._subscribeToValuesUpdated(options);\n        this._subscribeToLogEventCalled();\n        this._subscribeToGateEvaluation();\n        this._subscribeToExperimentEvaluation();\n    }\n    _subscribeToValuesUpdated(options) {\n        this._client.$on('values_updated', () => {\n            var _a;\n            if (!this._wasStopped) {\n                if (options === null || options === void 0 ? void 0 : options.autoStartRecording) {\n                    this._attemptToStartRecording((_a = this._options) === null || _a === void 0 ? void 0 : _a.forceRecording);\n                }\n                else if (options === null || options === void 0 ? void 0 : options.keepRollingWindow) {\n                    this._attemptToStartRollingWindow();\n                }\n            }\n        });\n    }\n    _subscribeToLogEventCalled() {\n        this._client.$on('log_event_called', (event) => {\n            var _a;\n            if (this._wasStopped) {\n                return;\n            }\n            const values = this._client.getContext().values;\n            const passedTargeting = values === null || values === void 0 ? void 0 : values.passes_session_recording_targeting;\n            if (passedTargeting === false ||\n                (values === null || values === void 0 ? void 0 : values.session_recording_event_triggers) == null) {\n                return;\n            }\n            const trigger = values.session_recording_event_triggers[event.event.eventName];\n            if (trigger == null) {\n                return;\n            }\n            if (trigger.passes_sampling === false) {\n                return;\n            }\n            const targetValues = trigger.values;\n            if (targetValues == null) {\n                this._attemptToStartRecording(true);\n                return;\n            }\n            if (targetValues.includes(String((_a = event.event.value) !== null && _a !== void 0 ? _a : ''))) {\n                this._attemptToStartRecording(true);\n                return;\n            }\n        });\n    }\n    _subscribeToGateEvaluation() {\n        this._client.$on('gate_evaluation', (event) => {\n            this._tryStartExposureRecording(event.gate.name, String(event.gate.value));\n        });\n    }\n    _subscribeToExperimentEvaluation() {\n        this._client.$on('experiment_evaluation', (event) => {\n            var _a;\n            this._tryStartExposureRecording(event.experiment.name, (_a = event.experiment.groupName) !== null && _a !== void 0 ? _a : '');\n        });\n    }\n    _tryStartExposureRecording(name, value) {\n        var _a;\n        if (this._wasStopped) {\n            return;\n        }\n        const values = this._client.getContext().values;\n        const passedTargeting = values === null || values === void 0 ? void 0 : values.passes_session_recording_targeting;\n        if (passedTargeting === false ||\n            (values === null || values === void 0 ? void 0 : values.session_recording_exposure_triggers) == null) {\n            return;\n        }\n        const trigger = (_a = values.session_recording_exposure_triggers[name]) !== null && _a !== void 0 ? _a : values.session_recording_exposure_triggers[(0, client_core_1._DJB2)(name)];\n        if (trigger == null) {\n            return;\n        }\n        if (trigger.passes_sampling === false) {\n            return;\n        }\n        const targetValues = trigger.values;\n        if (targetValues == null) {\n            this._attemptToStartRecording(true);\n            return;\n        }\n        if (targetValues.includes(value)) {\n            this._attemptToStartRecording(true);\n            return;\n        }\n    }\n    forceStartRecording() {\n        super.forceStartRecording();\n    }\n    stopRecording() {\n        this._isActiveRecording = false;\n        this._runningEventData = [];\n        super.stopRecording();\n    }\n    _handleStartActiveRecording() {\n        this._isActiveRecording = true;\n        if (this._runningEventData.length === 0) {\n            return;\n        }\n        const currentEvents = this._runningEventData.map((e) => e.events).flat();\n        for (let i = 0; i < currentEvents.length; i++) {\n            currentEvents[i].event.eventIndex = i;\n            this._sessionData.clickCount += currentEvents[i].data.clickCount;\n            this._sessionData.startTime =\n                this._sessionData.startTime === -1\n                    ? currentEvents[i].data.startTime\n                    : Math.min(this._sessionData.startTime, currentEvents[i].data.startTime);\n            this._sessionData.endTime = Math.max(this._sessionData.endTime, currentEvents[i].data.endTime);\n        }\n        this._events = currentEvents.map((e) => e.event);\n        this._currentEventIndex = currentEvents.length;\n        if ((0, client_core_1._isCurrentlyVisible)()) {\n            this._bumpSessionIdleTimerAndLogRecording();\n        }\n        else {\n            this._logRecording();\n        }\n        // stop recording and since it will be started again\n        this._replayer.stop();\n    }\n    _shutdown(endReason) {\n        this._isActiveRecording = false;\n        this._runningEventData = [];\n        super._shutdownImpl(endReason);\n    }\n    _onRecordingEvent(event, data, isCheckOut) {\n        if (!this._isActiveRecording) {\n            // The session has expired so we should clear the current data\n            if (this._currentSessionID !== this._getSessionIdFromClient()) {\n                this._shutdown('session_expired');\n                return;\n            }\n            if ((isCheckOut && event.type === 4) || // Type 4 and type 2 both show up as checkout events but we only want to start a new entry for type 4\n                this._runningEventData.length === 0) {\n                // We only want to keep two entries\n                if (this._runningEventData.length > 1) {\n                    this._runningEventData.shift();\n                }\n                this._runningEventData.push({ events: [{ event, data }] });\n            }\n            else {\n                this._runningEventData[this._runningEventData.length - 1].events.push({\n                    event,\n                    data,\n                });\n            }\n            return;\n        }\n        super._onRecordingEvent(event, data);\n    }\n    _attemptToStartRollingWindow() {\n        var _a, _b;\n        const values = this._client.getContext().values;\n        if ((values === null || values === void 0 ? void 0 : values.passes_session_recording_targeting) === false) {\n            this._shutdown();\n            return;\n        }\n        if (this._replayer.isRecording()) {\n            return;\n        }\n        this._replayer.record((e, d, isCheckOut) => this._onRecordingEvent(e, d, isCheckOut), (_b = (_a = this._options) === null || _a === void 0 ? void 0 : _a.rrwebConfig) !== null && _b !== void 0 ? _b : {}, () => {\n            this._shutdown();\n        }, true);\n    }\n    _attemptToStartRecording(force = false) {\n        var _a, _b;\n        if (this._totalLogs >= SessionReplayUtils_1.MAX_LOGS) {\n            return;\n        }\n        const values = this._client.getContext().values;\n        if ((values === null || values === void 0 ? void 0 : values.recording_blocked) === true) {\n            this._shutdown();\n            return;\n        }\n        if (!force && (values === null || values === void 0 ? void 0 : values.can_record_session) !== true) {\n            this._shutdown();\n            return;\n        }\n        if ((values === null || values === void 0 ? void 0 : values.passes_session_recording_targeting) === false) {\n            this._shutdown();\n            return;\n        }\n        this._handleStartActiveRecording();\n        this._wasStopped = false;\n        client_core_1.StatsigMetadataProvider.add({ isRecordingSession: 'true' });\n        if (this._replayer.isRecording()) {\n            return;\n        }\n        this._replayer.record((e, d, isCheckOut) => this._onRecordingEvent(e, d, isCheckOut), (_b = (_a = this._options) === null || _a === void 0 ? void 0 : _a.rrwebConfig) !== null && _b !== void 0 ? _b : {}, () => {\n            this._shutdown();\n        });\n    }\n}\nexports.TriggeredSessionReplay = TriggeredSessionReplay;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.forceStartRecording = exports.stopRecording = exports.startRecording = exports.StatsigTriggeredSessionReplayPlugin = exports.StatsigSessionReplayPlugin = exports.runStatsigTriggeredSessionReplay = exports.runStatsigSessionReplay = exports.SessionReplay = exports.SessionReplayClient = void 0;\nconst client_core_1 = require(\"@statsig/client-core\");\nconst SessionReplay_1 = require(\"./SessionReplay\");\nObject.defineProperty(exports, \"SessionReplay\", { enumerable: true, get: function () { return SessionReplay_1.SessionReplay; } });\nObject.defineProperty(exports, \"StatsigSessionReplayPlugin\", { enumerable: true, get: function () { return SessionReplay_1.StatsigSessionReplayPlugin; } });\nObject.defineProperty(exports, \"runStatsigSessionReplay\", { enumerable: true, get: function () { return SessionReplay_1.runStatsigSessionReplay; } });\nconst SessionReplayBase_1 = require(\"./SessionReplayBase\");\nObject.defineProperty(exports, \"forceStartRecording\", { enumerable: true, get: function () { return SessionReplayBase_1.forceStartRecording; } });\nObject.defineProperty(exports, \"startRecording\", { enumerable: true, get: function () { return SessionReplayBase_1.startRecording; } });\nObject.defineProperty(exports, \"stopRecording\", { enumerable: true, get: function () { return SessionReplayBase_1.stopRecording; } });\nconst SessionReplayClient_1 = require(\"./SessionReplayClient\");\nObject.defineProperty(exports, \"SessionReplayClient\", { enumerable: true, get: function () { return SessionReplayClient_1.SessionReplayClient; } });\nconst TriggeredSessionReplay_1 = require(\"./TriggeredSessionReplay\");\nObject.defineProperty(exports, \"StatsigTriggeredSessionReplayPlugin\", { enumerable: true, get: function () { return TriggeredSessionReplay_1.StatsigTriggeredSessionReplayPlugin; } });\nObject.defineProperty(exports, \"runStatsigTriggeredSessionReplay\", { enumerable: true, get: function () { return TriggeredSessionReplay_1.runStatsigTriggeredSessionReplay; } });\nObject.assign((0, client_core_1._getStatsigGlobal)(), {\n    SessionReplayClient: SessionReplayClient_1.SessionReplayClient,\n    SessionReplay: SessionReplay_1.SessionReplay,\n    runStatsigSessionReplay: SessionReplay_1.runStatsigSessionReplay,\n    runStatsigTriggeredSessionReplay: TriggeredSessionReplay_1.runStatsigTriggeredSessionReplay,\n    StatsigSessionReplayPlugin: SessionReplay_1.StatsigSessionReplayPlugin,\n    StatsigTriggeredSessionReplayPlugin: TriggeredSessionReplay_1.StatsigTriggeredSessionReplayPlugin,\n    startRecording: SessionReplayBase_1.startRecording,\n    stopRecording: SessionReplayBase_1.stopRecording,\n    forceStartRecording: SessionReplayBase_1.forceStartRecording,\n});\n"],
  "mappings": "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",
  "names": ["n", "s", "rules", "a", "_a", "chars", "c", "e", "mirror", "i", "m", "v", "NodeType", "_a", "_b", "e", "n", "mirror", "i", "rules", "n", "mirror", "r", "parentId", "e", "_a", "_b", "mirror", "e", "text", "v", "rules", "FontFace", "i", "o", "c", "_a", "e", "n", "e", "s", "e", "t", "i", "i", "_a", "v", "_a", "mirror", "_a", "v", "i", "n", "WorkerFactory", "__awaiter", "e", "chars", "lookup", "i", "encode", "e", "_a", "r", "errorHandler", "e", "r", "_a", "a", "n", "v", "c", "NodeType", "_a", "s", "hyphenateRE", "canvasMutation", "e", "i", "oldChild", "getValidTagName", "createMirror", "Mirror", "n", "c", "mirror", "a", "l", "v", "i", "n", "c", "r", "_a", "s", "o", "e", "t", "t2", "i2", "_b", "fl", "e", "e", "i", "i", "errorHandler", "s", "init_record", "ORIGINAL_ATTRIBUTE_NAME", "init_record", "s", "variableListFor", "image", "e", "variableListFor", "errorHandler", "init_webgl", "errorHandler", "args", "init_d", "canvasMutation", "errorHandler", "i", "init_canvas", "init_webgl", "init_d", "n", "t", "e", "i", "polyfill", "Element", "t", "n", "e", "r", "o", "i", "a", "s", "l", "v", "c", "u", "_a", "_a", "_b", "mirror", "e", "mitt", "init_replay", "init_canvas", "events", "_a", "canvasMutation", "_b", "polyfill", "mirror", "c", "r", "s", "targetHost", "canvasMutation", "init_record", "init_canvas", "init_replay", "_a", "_b", "record", "i", "max", "i", "_a", "_b", "e", "i", "_a", "_b", "e", "_a", "e", "i", "_b", "require_src"]
}
